(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[27],{957:function(e,n,t){"use strict";t.r(n);var a=t(6),r=t(0),i=t.n(r),o=t(5),c=t(7),l=t(12);function s(){var e=Object(a.a)(['\n  > span {\n    cursor: pointer;\n    cursor: hand;\n\n    &.active {\n      border-color: #ebebeb !important;\n\n      &:after {\n        content: "";\n        width: 3px;\n        height: 100%;\n        background: #7a1b8b;\n        display: block;\n        position: absolute;\n        top: 0;\n        animation: fadeIn 0.15s linear;\n        left: 0;\n      }\n    }\n\n    svg {\n      width: 16px;\n    }\n  }\n']);return s=function(){return e},e}var m=o.b.div(s()),d=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.filter,o=void 0===a?"inbox":a,s=(e.onGoBack,e.counters,e.dictionary,Object(r.useState)(!1)),d=Object(c.a)(s,2),u=(d[0],d[1],function(e){e.persist(),document.body.classList.remove("mobile-modal-open")});return i.a.createElement(m,{className:"post-filter-item list-group list-group-flush ".concat(t)},i.a.createElement("span",{className:"list-group-item d-flex align-items-center ".concat(o&&"inbox"===o?"active":""),"data-value":"inbox",onClick:u},i.a.createElement(l.u,{className:"mr-2",icon:"inbox"}),"All"),i.a.createElement("span",{className:"list-group-item d-flex align-items-center ".concat(o&&"all"===o?"active":""),"data-value":"all",onClick:u},i.a.createElement(l.u,{className:"mr-2",icon:"clock"}),"Recently changed"),i.a.createElement("span",{className:"list-group-item d-flex align-items-center ".concat(o&&"my_posts"===o?"active":""),"data-value":"my_posts",onClick:u},i.a.createElement(l.u,{className:"mr-2",icon:"star"}),"Favorites"),i.a.createElement("span",{className:"list-group-item d-flex align-items-center ".concat(o&&"star"===o?"active":""),"data-value":"star",onClick:u},i.a.createElement(l.u,{className:"mr-2",icon:"archive"}),"Approved"))})),u=t(4),p=t(48);function f(){var e=Object(a.a)(["\n  width: 1em;\n  vertical-align: bottom;\n  margin-right: 40px;\n\n  &:hover {\n    color: #000000;\n  }\n"]);return f=function(){return e},e}function b(){var e=Object(a.a)(["\n  a {\n    cursor: pointer;\n  }\n  .list-group-item:last-child {\n    border-bottom-width: thin !important;\n  }\n"]);return b=function(){return e},e}var h=o.b.div(b()),g=Object(o.b)(l.u)(f()),v=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=Object(p.i)(),r=Object(u.d)((function(e){return e.wip.subjects})),o=Object(u.d)((function(e){return e.wip.activeSubject})),c=function(e){e.persist(),document.body.classList.remove("mobile-modal-open")},l=r.filter((function(e){return e.topic_id===parseInt(a.workspaceId)}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"post-filter-item list-group list-group-flush"},i.a.createElement("span",{className:"list-group-item d-flex align-items-center pr-3","data-value":"inbox"},"Filter",i.a.createElement("span",{className:"ml-auto"},i.a.createElement(g,{className:"mr-0",icon:"plus"})))),l.length>0&&i.a.createElement(h,{className:"list-group list-group-flush ".concat(t)},l.map((function(e){return i.a.createElement("a",{key:e.id,className:"list-group-item d-flex align-items-center ".concat(o&&o.name===e.name?"active":""),"data-value":e.id,onClick:c},i.a.createElement("span",{className:"text-primary fa fa-circle mr-2"}),e.name)}))))})),O=t(11);function E(){var e=Object(a.a)([""]);return E=function(){return e},e}function x(){var e=Object(a.a)(["\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n"]);return x=function(){return e},e}var w=o.b.div(x()),_=o.b.div(E()),S=i.a.memo((function(e){var n=Object(O.tb)();return i.a.createElement(w,{className:"col-md-3 app-sidebar bottom-modal-mobile"},i.a.createElement(_,{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),i.a.createElement("div",{className:"bottom-modal-mobile_inner"},i.a.createElement("div",{className:"app-sidebar-menu",tabIndex:"2"},i.a.createElement("div",{className:"card-body create-new-post-wrapper"},i.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return n.showModal()}},"Create WIP")),i.a.createElement(d,null),i.a.createElement(v,null))))})),y=t(64);function j(){var e=Object(a.a)(["\n  .btn-cross {\n    position: absolute;\n    top: 0;\n    right: 45px;\n    border: 0;\n    background: transparent;\n    padding: 0;\n    height: 100%;\n    width: 36px;\n    border-radius: 4px;\n    z-index: 9;\n    svg {\n      width: 16px;\n      color: #495057;\n    }\n  }\n"]);return j=function(){return e},e}var T=o.b.div(j()),N=i.a.memo((function(e){var n=e.search,t=void 0===n?"":n,a=e.placeholder,o=void 0===a?"":a,s=(Object(u.c)(),Object(r.useState)(t)),m=Object(c.a)(s,2),d=m[0],p=m[1],f=Object(y.debounce)((function(e){}),500);return i.a.createElement(T,{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:o,value:d,"aria-describedby":"button-addon1",onKeyDown:function(e){"Enter"===e.key&&f(d)},onChange:function(e){p(e.target.value),f(e.target.value.trim())}}),""!==t.trim()&&i.a.createElement("button",{onClick:function(){p("")},className:"btn-cross",type:"button"},i.a.createElement(l.u,{icon:"x"})),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-light",type:"button",id:"button-addon1",onClick:f},i.a.createElement("i",{className:"ti-search"}))))}));function k(){var e=Object(a.a)(["\n  overflow: unset !important;\n\n  .action-left {\n    ul.list-inline {\n      margin-bottom: 0;\n    }\n    .app-sidebar-menu-button {\n      margin-left: 0;\n      margin-top: 1rem;\n    }\n  }\n  .action-right {\n    margin: 0 !important;\n  }\n"]);return k=function(){return e},e}var R=o.b.div(k()),P=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n;e.search,e.dictionary;return i.a.createElement(R,{className:"post-filter-search-panel app-action ".concat(t)},i.a.createElement("div",{className:"action-left"},i.a.createElement("span",{className:"app-sidebar-menu-button btn btn-outline-light",onClick:function(){document.body.classList.toggle("mobile-modal-open")}},i.a.createElement(l.u,{icon:"menu"}))),i.a.createElement("div",{className:"action-right"},i.a.createElement(N,null)))})),A=t(1),C=t(20),I=t(34);function L(){var e=Object(a.a)(["\n  .text-muted {\n    font-size: 0.7rem;\n    cursor: pointer;\n    :hover {\n      color: "," !important;\n      text-decoration: underline;\n    }\n  }\n  > div {\n    margin-right: 0.5rem;\n  }\n"]);return L=function(){return e},e}var M=o.b.div(L(),(function(e){return e.theme.colors.primary})),D=function(e){var n=e.comment,t=e.toggleCommentInput,a=Object(u.c)(),r=Object(u.d)((function(e){return e.session.user})).id===n.author.id;return i.a.createElement(M,{className:"d-flex ml-1 file-comment-options"},r&&i.a.createElement("div",{className:"text-muted",onClick:function(){a(Object(I.S)(n))}},"Edit"),i.a.createElement("div",{className:"text-muted",onClick:t},"Comment"))};function q(){var e=Object(a.a)(["\n  border: 1px solid #ebebeb;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  position: relative;\n  min-height: 80px;\n  background: #f1f2f7;\n"]);return q=function(){return e},e}function F(){var e=Object(a.a)(["\n  &.chat-input {\n    max-height: 180px;\n    @media (min-width: 768px) {\n      max-height: 370px;\n    }\n    position: static;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .ql-container {\n    position: static;\n  }\n  .ql-toolbar {\n    display: none;\n  }\n  .ql-editor {\n    padding: 11px 9px;\n\n    &:focus {\n      box-shadow: none;\n      border-color: rgba(122, 27, 139, 0.8);\n    }\n  }\n\n  .ql-container {\n    border: none;\n  }\n  .ql-mention-list-container-top,\n  .ql-mention-list-container {\n    width: 300px !important;\n    max-height: 170px;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(26, 26, 26, 0.4) 0px 2px 3px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 0px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    z-index: 1000;\n\n    .dark & {\n      background: #25282c;\n      color: #c7c7c7;\n    }\n\n    .ql-mention-list {\n      padding: 0;\n\n      .ql-mention-list-item {\n        display: flex;\n        align-items: center;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n        padding-left: 1rem;\n\n        &.selected {\n          background: #7a1b8b;\n          color: #fff;\n          cursor: pointer;\n          span.all-pic > img {\n            filter: brightness(0) saturate(100%) invert(1);\n          }\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}function U(){var e=Object(a.a)(["\n  .body-wrapper,\n  .file-comment-options {\n    flex-flow: row-reverse;\n  }\n  .avatar-wrapper {\n    justify-content: flex-end;\n  }\n  .comment-author {\n    font-size: 0.75rem;\n  }\n  .comment-time {\n    font-size: 0.6rem;\n  }\n"]);return U=function(){return e},e}var H=o.b.div(U()),z=Object(o.b)(C.l)(F()),W=o.b.div(q()),B=function(e){var n=e.comment,a=e.parentId,o=e.isClosed,s=Object(r.useRef)(),m=Object(p.i)(),d=Object(O.eb)(),f=Object(O.xb)(),b=Object(u.d)((function(e){return e.workspaces.activeTopic})),h=Object(u.d)((function(e){return e.session.user})),g=Object(r.useState)(!1),v=Object(c.a)(g,2),E=v[0],x=v[1],w=Object(r.useState)({text:"",textOnly:"",quillContents:[]}),_=Object(c.a)(w,2),S=_[0],y=_[1],j=Object(O.R)({mode:"post_comment",callback:function(){var e={proposal_id:parseInt(m.wipId),media_id:parseInt(m.wipFileId),file_version_id:parseInt(m.wipFileVersion),body:S.text,mention_ids:[],file_ids:[],reference_id:t(61).generate(),parent_id:a,quote:null,annotation:null},n=Math.floor(Date.now()/1e3),r=Object(A.a)(Object(A.a)({},e),{},{author:{id:h.id,name:h.name,profile_image_link:h.profile_image_link},id:e.reference_id,created_at:{timestamp:n},annotation:null,file_id:e.media_id,workspace_id:b.id});f.addComment(r),f.submitComment(e),y({text:"",textOnly:"",quillContents:[]}),s.current&&s.current.getEditor()&&s.current.getEditor().setContents([])},mentionOrientation:"top",quillRef:s,members:b?b.members:[],prioMentionIds:b?b.members.map((function(e){return e.id})):[]}).modules;return Object(r.useEffect)((function(){E&&s.current&&s.current.focus()}),[E]),i.a.createElement(H,{className:"file-sub-comment mb-2",key:n.id},i.a.createElement("div",{className:"d-flex align-items-center body-wrapper"},i.a.createElement("div",{className:"file-comment-body",dangerouslySetInnerHTML:{__html:n.body}})),!o&&i.a.createElement(D,{className:"file-comment-options",comment:n,toggleCommentInput:function(){x((function(e){return!e}))}}),E&&i.a.createElement(W,{className:"sub-comment-input"},i.a.createElement(z,{className:"chat-input",modules:j,ref:s,onChange:function(e,n,t,a){null!==b&&y({text:e,textOnly:a.getText(e),quillContents:a.getContents()})}})),i.a.createElement("div",{className:"d-flex align-items-center avatar-wrapper"},i.a.createElement(l.a,{className:"avatar-sm mr-1",id:n.author.id,type:"USER",imageLink:n.author.profile_image_thumbnail_link,name:n.author.name,showSlider:!1}),i.a.createElement("span",{className:"mr-1 comment-author"},n.author.first_name),i.a.createElement("span",{className:"text-muted comment-time"},d.fromNow(n.created_at.timestamp))),i.a.createElement(G,{commentId:n.id}))};function Y(){var e=Object(a.a)([""]);return Y=function(){return e},e}var V=o.b.div(Y()),G=function(e){var n=e.commentId,t=e.isClosed,a=Object(O.zb)(n).comments;return 0===a.length?null:i.a.createElement(V,null,a.map((function(e){return i.a.createElement(B,{key:e.id,comment:e,parentId:n,isClosed:t})})))};function Q(){var e=Object(a.a)(["\n  border: 1px solid #ebebeb;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  position: relative;\n  min-height: 80px;\n  background: #f1f2f7;\n"]);return Q=function(){return e},e}function K(){var e=Object(a.a)(["\n  &.chat-input {\n    max-height: 180px;\n    @media (min-width: 768px) {\n      max-height: 370px;\n    }\n    position: static;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .ql-container {\n    position: static;\n  }\n  .ql-toolbar {\n    display: none;\n  }\n  .ql-editor {\n    padding: 11px 9px;\n\n    &:focus {\n      box-shadow: none;\n      border-color: rgba(122, 27, 139, 0.8);\n    }\n  }\n\n  .ql-container {\n    border: none;\n  }\n  .ql-mention-list-container-top,\n  .ql-mention-list-container {\n    width: 300px !important;\n    max-height: 170px;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(26, 26, 26, 0.4) 0px 2px 3px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 0px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    z-index: 1000;\n\n    .dark & {\n      background: #25282c;\n      color: #c7c7c7;\n    }\n\n    .ql-mention-list {\n      padding: 0;\n\n      .ql-mention-list-item {\n        display: flex;\n        align-items: center;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n        padding-left: 1rem;\n\n        &.selected {\n          background: #7a1b8b;\n          color: #fff;\n          cursor: pointer;\n          span.all-pic > img {\n            filter: brightness(0) saturate(100%) invert(1);\n          }\n        }\n      }\n    }\n  }\n"]);return K=function(){return e},e}function J(){var e=Object(a.a)(["\n  border-radius: 50%;\n  box-sizing: border-box;\n  height: 1rem;\n  position: absolute;\n  -webkit-transform: translate3d(-50%, -50%, 0);\n  -ms-transform: translate3d(-50%, -50%, 0);\n  transform: translate3d(-50%, -50%, 0);\n  width: 1rem;\n  background: purple;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  color: #fff;\n  top: 2px;\n  font-size: 0.6rem;\n  left: 2px;\n"]);return J=function(){return e},e}function X(){var e=Object(a.a)(["\n  .comment-author {\n    font-size: 0.75rem;\n  }\n  .comment-time {\n    font-size: 0.6rem;\n  }\n"]);return X=function(){return e},e}var Z=o.b.div(X()),$=o.b.div(J()),ee=Object(o.b)(C.l)(K()),ne=o.b.div(Q()),te=function(e){var n=e.comment,a=e.annotation,o=e.isClosed,s=Object(r.useRef)(),m=Object(p.i)(),d=Object(O.eb)(),f=Object(O.xb)(),b=Object(u.d)((function(e){return e.workspaces.activeTopic})),h=Object(u.d)((function(e){return e.session.user})),g=Object(r.useState)(!1),v=Object(c.a)(g,2),E=v[0],x=v[1],w=Object(r.useState)({text:"",textOnly:"",quillContents:[]}),_=Object(c.a)(w,2),S=_[0],y=_[1],j=Object(O.R)({mode:"post_comment",callback:function(){var e={proposal_id:parseInt(m.wipId),media_id:parseInt(m.wipFileId),file_version_id:parseInt(m.wipFileVersion),body:S.text,mention_ids:[],file_ids:[],reference_id:t(61).generate(),parent_id:n.id,quote:null,annotation:null},a=Math.floor(Date.now()/1e3),r=Object(A.a)(Object(A.a)({},e),{},{author:{id:h.id,name:h.name,profile_image_link:h.profile_image_link},id:e.reference_id,created_at:{timestamp:a},annotation:null,file_id:e.media_id,workspace_id:b.id});f.addComment(r),f.submitComment(e),y({text:"",textOnly:"",quillContents:[]}),s.current&&s.current.getEditor()&&s.current.getEditor().setContents([])},mentionOrientation:"top",quillRef:s,members:b?b.members:[],prioMentionIds:b?b.members.map((function(e){return e.id})):[]}).modules;return Object(r.useEffect)((function(){E&&s.current&&s.current.focus()}),[E]),i.a.createElement(Z,{className:"file-comment mb-2",key:n.id},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"file-comment-body",dangerouslySetInnerHTML:{__html:n.body}})),!o&&i.a.createElement(D,{className:"file-comment-options",comment:n,toggleCommentInput:function(){x((function(e){return!e}))}}),E&&i.a.createElement(ne,{className:"sub-comment-input"},i.a.createElement(ee,{className:"chat-input",modules:j,ref:s,onChange:function(e,n,t,a){null!==b&&y({text:e,textOnly:a.getText(e),quillContents:a.getContents()})}})),a&&i.a.createElement($,null,a.annotation.data.id),i.a.createElement("div",{className:"d-flex align-items-center mt-1"},i.a.createElement(l.a,{className:"avatar-sm mr-1",id:n.author.id,type:"USER",imageLink:n.author.profile_image_thumbnail_link,name:n.author.name,showSlider:!1}),i.a.createElement("span",{className:"mr-1 comment-author"},n.author.first_name),i.a.createElement("span",{className:"text-muted comment-time"},d.fromNow(n.created_at.timestamp))),i.a.createElement(G,{commentId:n.id,isClosed:o}))};function ae(){var e=Object(a.a)(["\n  &.card-body {\n    padding: 15px;\n    overflow-y: auto;\n    overflow-x: hidden;\n    .file-comment-body {\n      border-radius: 6px;\n      padding: 0.5rem;\n      background: #f0f0f0;\n      display: inline-block;\n    }\n  }\n  .file-comments-thread {\n    width: 100%;\n  }\n  .avatar.avatar-sm {\n    height: 2rem;\n    width: 2rem;\n  }\n  .file-comment {\n    position: relative;\n  }\n"]);return ae=function(){return e},e}var re=o.b.div(ae()),ie=function(e){var n=e.annotations,t=e.isClosed,a=Object(r.useRef)(),o=Object(O.yb)(a).comments;return i.a.createElement(re,{className:"card-body d-flex",ref:a},i.a.createElement("div",{className:"file-comments-thread"},o.length>0&&o.map((function(e){var a=n.find((function(n){return n.comment_id===e.id&&null!==n.annotation}));return i.a.createElement(te,{key:e.id,comment:e,annotation:a,isClosed:t})}))))},oe=t(13);function ce(){var e=Object(a.a)(["\n  padding: 10px 0px;\n  display: inline-flex;\n  width: 100%;\n  overflow: hidden;\n  .edit-body {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    > div {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(a.a)(["\n  border-radius: 50%;\n  box-sizing: border-box;\n  height: 1.2rem;\n  position: absolute;\n  transform: translate3d(-50%, -50%, 0);\n  width: 1.2rem;\n  background: purple;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n"]);return le=function(){return e},e}function se(){var e=Object(a.a)(["\n  padding: 10px;\n  width: auto !important;\n"]);return se=function(){return e},e}function me(){var e=Object(a.a)(["\n  padding: 0.5rem;\n  font-size: 0.7rem;\n"]);return me=function(){return e},e}function de(){var e=Object(a.a)(["\n  &.chat-input {\n    // border: 1px solid #afb8bd;\n    // border-radius: 5px;\n    max-height: 180px;\n    @media (min-width: 768px) {\n      max-height: 370px;\n    }\n    position: static;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .ql-container {\n    position: static;\n  }\n  .ql-toolbar {\n    display: none;\n  }\n  .ql-editor {\n    padding: 11px 9px;\n\n    &:focus {\n      box-shadow: none;\n      border-color: rgba(122, 27, 139, 0.8);\n    }\n  }\n\n  .ql-container {\n    border: none;\n  }\n  .ql-mention-list-container-top,\n  .ql-mention-list-container {\n    width: 300px !important;\n    max-height: 170px;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(26, 26, 26, 0.4) 0px 2px 3px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 0px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    z-index: 1000;\n\n    .dark & {\n      background: #25282c;\n      color: #c7c7c7;\n    }\n\n    .ql-mention-list {\n      padding: 0;\n\n      .ql-mention-list-item {\n        display: flex;\n        align-items: center;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n        padding-left: 1rem;\n\n        &.selected {\n          background: #7a1b8b;\n          color: #fff;\n          cursor: pointer;\n          span.all-pic > img {\n            filter: brightness(0) saturate(100%) invert(1);\n          }\n        }\n      }\n    }\n  }\n"]);return de=function(){return e},e}function ue(){var e=Object(a.a)([""]);return ue=function(){return e},e}function pe(){var e=Object(a.a)(["\n  position relative;\n  display: flex;\n  flex-flow: column;\n  .bottom-modal-mobile_inner {\n   flex: 1 1;\n   max-height: calc(100% - 40px);\n  }\n  .app-sidebar-menu {\n    height: 100%;\n    \n  }\n  .card-header {\n    height: 70px;\n  }\n  .card-footer {\n    border: none;\n    flex-flow: column;\n    .close-submit {\n      justify-content: space-between;\n    }\n    .file-input-wrapper {\n      border: 1px solid #ebebeb;\n      border-radius: 6px;\n      margin-bottom: 1rem;\n      position: relative;\n      min-height: 125px;\n      background: #f1f2f7;\n    }\n  }\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n  .card {\n    padding: 0;\n  }\n"]);return pe=function(){return e},e}var fe=o.b.div(pe()),be=o.b.div(ue()),he=Object(o.b)(C.l)(de()),ge=o.b.div(me()),ve=o.b.button(se()),Oe=o.b.div(le()),Ee=o.b.div(ce()),xe=i.a.memo((function(e){var n=e.item,a=Object(u.c)(),o=Object(O.tb)(),s=Object(O.xb)(),m=Object(p.i)(),d=n.files.find((function(e){return e.id===parseInt(m.wipFileId)})),f=d.file_versions.length?d.file_versions[d.file_versions.length-1]:d.link_versions[d.link_versions.length-1],b=Object(r.useRef)(),h=Object(u.d)((function(e){return e.session.user})),g=Object(u.d)((function(e){return e.workspaces.activeTopic})),v=Object(u.d)((function(e){return e.wip.annotation})),E=Object(u.d)((function(e){return e.wip.editFileComment})),x=Object(r.useState)({text:"",textOnly:"",quillContents:[]}),w=Object(c.a)(x,2),_=w[0],S=w[1],y=Object(r.useState)({mentionedUserIds:[],ignoredMentionedUserIds:[]}),j=Object(c.a)(y,2),T=(j[0],j[1],Object(r.useState)(!1)),N=Object(c.a)(T,2),k=(N[0],N[1],Object(r.useState)(!1)),R=Object(c.a)(k,2),P=R[0],L=R[1],M=function(){a(Object(I.S)(null))},D=function(){var e={proposal_id:n.id,media_id:d.id,file_version_id:f.id,body:_.text,mention_ids:[],file_ids:[],reference_id:t(61).generate(),parent_id:null,quote:null,annotation:v.hasOwnProperty("selection")?JSON.stringify(Object(A.a)(Object(A.a)({},v),{},{data:v.selection.data})):null},a=Math.floor(Date.now()/1e3),r=Object(A.a)(Object(A.a)({},e),{},{author:{id:h.id,name:h.name,profile_image_link:h.profile_image_link},id:e.reference_id,created_at:{timestamp:a},annotation:v.hasOwnProperty("selection")?Object(A.a)(Object(A.a)({},v),{},{data:v.selection.data}):null,file_id:e.media_id,workspace_id:g.id});E?(e=Object(A.a)(Object(A.a)({},e),{},{id:E.id,annotation:null,parent_id:E.parent_id}),s.updateComment(e),M()):(s.addComment(r,(function(){return o.annotate({})})),s.submitComment(e)),S({text:"",textOnly:"",quillContents:[]}),b.current&&b.current.getEditor()&&b.current.getEditor().setContents([])};Object(r.useEffect)((function(){E&&(b.current.getEditor().clipboard.dangerouslyPasteHTML(0,E.body),S({text:E.body,textOnly:E.body,quillContents:[]}))}),[E]);var q=Object(O.R)({mode:"post_comment",callback:D,mentionOrientation:"top",quillRef:b,members:g?g.members:[],prioMentionIds:g?g.members.map((function(e){return e.id})):[]}).modules,F=n.author.id===h.id,U=n.approver_ids.some((function(e){return e===h.id}));return i.a.createElement(fe,{className:"col-md-3 app-sidebar bottom-modal-mobile"},i.a.createElement(be,{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),i.a.createElement("div",{className:"bottom-modal-mobile_inner"},i.a.createElement("div",{className:"app-sidebar-menu",tabIndex:"2"},i.a.createElement("div",{className:"card card-body create-new-post-wrapper h-100"},i.a.createElement("div",{className:"card-header d-flex align-items-center"},i.a.createElement("span",null,i.a.createElement(l.u,{icon:"message-square",className:"mr-2"})," Comments")),i.a.createElement(ie,{annotations:f.annotations,isClosed:1===f.is_close}),i.a.createElement("div",{className:"card-footer d-flex"},i.a.createElement("div",{className:"file-input-wrapper"},v.hasOwnProperty("geometry")&&i.a.createElement(Oe,null,v.selection.data.id),E&&i.a.createElement(Ee,null,i.a.createElement("div",{className:"mr-2"},i.a.createElement(l.u,{icon:"x",width:16,height:16,onClick:M})),i.a.createElement("div",{className:"overflow-hidden"},i.a.createElement("span",null,"Edit comment"),i.a.createElement("span",{className:"text-muted edit-body",dangerouslySetInnerHTML:{__html:E.body}}))),i.a.createElement(he,{className:"chat-input",modules:q,ref:b,onChange:function(e,n,t,a){null!==g&&S({text:e,textOnly:a.getText(e),quillContents:a.getContents()})},readOnly:1===f.is_close,placeholder:f.is_close?"Comments for this file is closed":"Your comment..."})),i.a.createElement("div",{className:"d-flex align-items-center mb-2 close-submit"},i.a.createElement(C.a,{name:"close",checked:1===f.is_close,onClick:function(){var e={type:"confirmation",headerText:f.is_close?"Open comments":"Close comments",submitText:"Ok",cancelText:"Cancel",bodyText:f.is_close?"Are you sure you want to open the comments for this file?":"Are you sure you want to close the comments for this file?",actions:{onSubmit:function(){s.closeComments({file_version_id:f.file_version_id,is_close:!f.is_close})}}};a(Object(oe.a)(e))},disabled:1===f.is_close},"Close comments"),i.a.createElement(ve,{className:"btn btn-primary btn-block",onClick:D},"Submit")),F&&"done"!==f.status&&i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{name:"final",checked:P,onClick:function(){L(!P)},disabled:0===f.is_close},"This is the final version"),i.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){s.openDialog({open:!0})},disabled:0===f.is_close},"Upload new version")),U&&"done"!==f.status&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){var e={type:"confirmation",headerText:"Approve file",submitText:"Ok",cancelText:"Cancel",bodyText:"Are you sure you want to approve this file?",actions:{onSubmit:function(){var e={file_version_id:f.file_version_id,approved:!0};s.approve(e)}}};a(Object(oe.a)(e))}},"Approve design")),"done"===f.status&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-success btn-block"},"Approved")))))),i.a.createElement(ge,null,"Only to be approved by: ",n.approver_users[0].name))})),we=t(9),_e=t(82);function Se(){var e=Object(a.a)(["\n  padding: 8rem 0;\n  max-width: 375px;\n  margin: auto;\n  text-align: center;\n\n  svg {\n    display: block;\n  }\n  button {\n    width: auto !important;\n    margin: 2rem auto;\n  }\n"]);return Se=function(){return e},e}function ye(){var e=Object(a.a)(["\n  background: #f1f2f7;\n"]);return ye=function(){return e},e}var je=o.b.div(ye()),Te=o.b.div(Se()),Ne=function(e){e.file;return i.a.createElement(je,{className:"card card-body app-content-body mb-4"},i.a.createElement(Te,null,i.a.createElement(l.s,{icon:3,height:252}),i.a.createElement("button",{className:"btn btn-outline-primary btn-block",onClick:function(){}},"Open link")))},ke=t(37),Re=t.n(ke),Pe=t(73),Ae=t(49),Ce=t(948),Ie=t(942),Le=t(66);function Me(){var e=Object(a.a)(["\n  //border: solid 3px white;\n  border-radius: 50%;\n  box-sizing: border-box;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 2px rgba(0, 0, 0, 0.2), 0 5px 4px rgba(0, 0, 0, 0.4);\n  height: 2rem;\n  position: absolute;\n  transform: translate3d(-50%, -50%, 0);\n  width: 2rem;\n  background: purple;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 1.2rem;\n"]);return Me=function(){return e},e}function De(){var e=Object(a.a)(["\n  height: 36px;\n  border-radius: 6px;\n  border: 1px solid;\n  width: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 0.5rem;\n  cursor: pointer;\n"]);return De=function(){return e},e}function qe(){var e=Object(a.a)(["\n  outline: ",";\n  opacity: ",";\n  position: relative;\n  :hover {\n    opacity: 1;\n  }\n  ","\n"]);return qe=function(){return e},e}function Fe(){var e=Object(a.a)(["\n  min-height: 130px;\n  border-top: 1px solid #ebebeb;\n  display: inline-flex;\n  padding: 10px 20px;\n  overflow: auto;\n  align-items: flex-end;\n  .img-card {\n    cursor: pointer;\n    max-height: 100px;\n    max-width: 100px;\n    min-height: 100px;\n    min-width: 100px;\n    border-radius: 6px;\n    // border: 1px solid #ebebeb;\n    // overflow: hidden;\n    text-align: center;\n    font-size: 2rem;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n    img {\n      width: 100px;\n      height: 100px;\n      border-radius: 6px;\n    }\n  }\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(a.a)(["\n  display: flex;\n  //height: 100%;\n  overflow: auto;\n  // img {\n  //   width: 100%;\n  //   height: auto;\n  //   object-fit: contain;\n  // }\n"]);return Ue=function(){return e},e}function He(){var e=Object(a.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  width: 100%;\n  flex-flow: column;\n  //   align-items: center;\n  //   justify-content: center;\n  height: calc(100% - 200px);\n  padding: 15px;\n"]);return He=function(){return e},e}function ze(){var e=Object(a.a)(["\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  height: 36px;\n  width: 40px;\n  align-items: center;\n  justify-content: center;\n  .feather-more-horizontal {\n    width: 25px;\n    height: 24px;\n  }\n  .more-options-tooltip {\n    left: auto;\n    right: 0;\n    top: 45px;\n    width: 250px;\n    height: 45px;\n\n    svg {\n      width: 14px;\n    }\n  }\n"]);return ze=function(){return e},e}function We(){var e=Object(a.a)(["\n  width: 16px;\n\n  &.close {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n  }\n"]);return We=function(){return e},e}function Be(){var e=Object(a.a)(["\n  min-height: 70px;\n  > div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  ul {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: 0;\n    padding: 0;\n    li {\n      list-style: none;\n      .post-title {\n        width: 100%;\n      }\n    }\n  }\n\n  .company-post-detail-header {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n  }\n  .close {\n    .dark & {\n      color: #fff;\n    }\n  }\n\n  .author-name {\n    color: #a7abc3;\n    font-size: 14px;\n  }\n  .deadline-label {\n    border-radius: 6px;\n    padding: 3px 5px;\n    background-color: hsla(0, 0%, 82.4%, 0.2);\n    font-size: 12px;\n    margin-right: 3px;\n    display: flex;\n    align-items: center;\n    font-weight: normal;\n    svg {\n      width: 12px;\n      height: 12px;\n    }\n  }\n  .react-select-container {\n    min-width: 130px;\n  }\n"]);return Be=function(){return e},e}function Ye(){var e=Object(a.a)(["\n  min-height: 240px;\n  .card-body {\n    padding: 1rem 1.5rem;\n  }\n  flex-flow: column;\n  height: 100%;\n  display: flex;\n"]);return Ye=function(){return e},e}function Ve(){var e=Object(a.a)([""]);return Ve=function(){return e},e}var Ge=o.b.div(Ve()),Qe=o.b.div(Ye()),Ke=o.b.div(Be()),Je=Object(o.b)(l.u)(We()),Xe=Object(o.b)(_e.c)(ze()),Ze=o.b.div(He()),$e=o.b.div(Ue()),en=o.b.div(Fe()),nn=o.b.div(qe(),(function(e){return e.selected?"3px solid ".concat(e.theme.colors.primary):"none"}),(function(e){return e.selected?"1":".5"}),(function(e){return e.selected&&':before {\n        content: "";\n        border-width: 10px;\n        border-style: solid;\n        border-color: transparent transparent '.concat(e.theme.colors.primary," transparent;\n        border-image: initial;\n        position: absolute;\n        top: -22px;\n        left: 40px;\n        z-index: 1;\n      }")})),tn=o.b.div(De()),an=o.b.div(Me()),rn=function(e){var n=e.children,t=e.geometry;e.style;return t?i.a.createElement(an,{style:{top:"".concat(t.y,"%"),left:"".concat(t.x,"%")}},n):null};function on(e){var n=e.annotation,t=(e.active,n.geometry),a=n.selection;return t?i.a.createElement(rn,{geometry:t},a.data.id):null}function cn(e){var n=e.annotation,t=(e.active,n.geometry),a=n.data;return t?i.a.createElement(rn,{geometry:t,key:a.id},a.id):null}var ln=function(e){var n=e.item,a=Object(r.useRef)(),o=Object(u.c)(),s=Object(p.i)(),m=Object(p.g)(),d=Object(O.tb)(),f=Object(O.xb)(),b=Object(u.d)((function(e){return e.session.user})),h=Object(u.d)((function(e){return e.settings.user.GENERAL_SETTINGS.dark_mode})),g=Object(u.d)((function(e){return e.wip.annotation})),v=Object(u.d)((function(e){return e.wip.uploadNewVersion})),E=n.files.find((function(e){return e.id===parseInt(s.wipFileId)})),x=E.file_versions.length?E.file_versions.find((function(e){return e.id===parseInt(s.wipFileVersion)})):E.link_versions[E.link_versions.length-1],w=n.files.reduce((function(e,n){var t=n.file_versions.map((function(e){return e.version_name}));return e=[].concat(Object(we.a)(e),Object(we.a)(t))}),[]),_=Object(we.a)(new Set(w)).map((function(e){return{value:e,label:e}})),S=Object(r.useState)(!1),y=Object(c.a)(S,2),j=y[0],T=y[1],N=Object(r.useState)(null),k=Object(c.a)(N,2),R=k[0],P=k[1],C=Object(r.useState)(x?_.find((function(e){return e.value===x.version_name})):null),I=Object(c.a)(C,2),L=I[0],M=I[1],D=n.files.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{file_versions:e.file_versions.filter((function(e){return e.version_name===L.value})),link_versions:e.link_versions.filter((function(e){return e.version_name===L.value}))})})).filter((function(e){return e.link_versions.length>0||e.file_versions.length>0})),q=function(){a.current&&a.current.open()},F=function(){T(!1)},U=function(){q(),P("new_version")},H=function(e,n){m.push(m.location.pathname.split("/file/")[0]+"/file/".concat(e,"/").concat(n))};Object(r.useEffect)((function(){v&&(U(),f.openDialog({open:!1}))}),[v]),Object(r.useEffect)((function(){M({value:x.version_name,label:x.version_name})}),[x.id]);var z=x.annotations.filter((function(e){return!e.hasOwnProperty("comment_id")||!!e.annotation})).map((function(e){return e.hasOwnProperty("comment_id")?e.annotation?e.annotation:void 0:e}));return i.a.createElement(Ge,{className:"card card-body app-content-body gallery-page"},i.a.createElement(Qe,{className:"fadeBottom"},i.a.createElement(Ke,{className:"card-header d-flex justify-content-between"},i.a.createElement("div",{className:"d-flex flex-column align-items-start"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",null,i.a.createElement(Je,{className:"close mr-2",icon:"arrow-left",width:"24",height:"24",onClick:function(){d.goBack()}})),i.a.createElement("div",null,i.a.createElement("h5",{className:"post-title mb-0"},i.a.createElement("span",null,x.media_link_title?x.media_link_title:x.file_code)),i.a.createElement("span",{className:"d-flex"},i.a.createElement("span",{className:"badge ".concat(n?"medium"===n.priority?"badge-warning":"high"===n.priority?"badge-danger":"badge-twitter":null)},n.priority),i.a.createElement("span",{className:"deadline-label ml-2"},i.a.createElement(Je,{className:"mr-2",icon:"calendar"}),Re()(n.deadline.timestamp,"X").format("DD-MM-YYYY")))))),i.a.createElement("div",null,i.a.createElement(Pe.a,{className:"react-select-container",classNamePrefix:"react-select",styles:"0"===h?Ae.b:Ae.a,value:L,onChange:function(e){if(M(e),E.file_versions.some((function(n){return n.version_name===e.value}))||E.link_versions.some((function(n){return n.version_name===e.value})))if(E.file_versions.length){var t=E.file_versions.filter((function(n){return n.version_name===e.value}));m.push(m.location.pathname.split("/file/")[0]+"/file/".concat(E.id,"/").concat(t[t.length-1].id))}else{var a=E.link_versions.filter((function(n){return n.version_name===e.value}));m.push(m.location.pathname.split("/file/")[0]+"/file/".concat(E.id,"/").concat(a[a.length-1].id))}else{var r=n.files.map((function(n){return Object(A.a)(Object(A.a)({},n),{},{file_versions:n.file_versions.filter((function(n){return n.version_name===e.value})),link_versions:n.link_versions.filter((function(n){return n.version_name===e.value}))})})).filter((function(e){return e.link_versions.length>0||e.file_versions.length>0}));m.push(m.location.pathname.split("/file/")[0]+"/file/".concat(r[0].id,"/").concat(r[0].file_versions.length?r[0].file_versions[r[0].file_versions.length-1].id:r[0].link_versions[r[0].link_versions.length-1].id))}},options:_}),i.a.createElement(tn,null,i.a.createElement(l.u,{icon:"download"})),n.author.id===b.id&&i.a.createElement("div",null,i.a.createElement(Xe,{className:"ml-2",width:170,moreButton:"more-horizontal"},0===x.is_close&&i.a.createElement("div",{onClick:function(){var e={type:"confirmation",headerText:"Replace current image",submitText:"Ok",cancelText:"Cancel",bodyText:"Are you sure you want to replace this image? Replacing the image will remove the comments and annotations for this image.",actions:{onSubmit:function(){q(),P("replace")}}};o(Object(oe.a)(e))}},"Replace current image"),1===x.is_close&&i.a.createElement("div",{onClick:U},"Upload new version"))))),i.a.createElement(Ze,null,i.a.createElement($e,{className:"w-100",isFileLink:null!==x.media_link_title},i.a.createElement(Le.a,{hide:!j,ref:a,onDragLeave:F,onDrop:function(e){!function(e){var n=[];e.forEach((function(e){var a=new FormData;a.append("file",e);var r=t(61).generate();n.push(Object(A.a)(Object(A.a)({},e),{},{type:"IMAGE",id:r,status:!1,src:URL.createObjectURL(e),bodyFormData:a,name:e.name?e.name:e.path}))})),F();var a={type:"wip_file",droppedFiles:n,file:x,mode:R};o(Object(oe.a)(a))}(e.acceptedFiles)},onCancel:F,acceptType:"imageOnly",maxFiles:1,multiple:!1}),x.media_link_title&&i.a.createElement(Ne,{file:x}),x.view_link&&i.a.createElement(Ce.a,{src:x.view_link,alt:x.file_name,annotations:z,type:Ie.PointSelector.TYPE,value:g,onChange:function(e){var n=x.annotations.filter((function(e){return e.annotation})).length;d.annotate(Object(A.a)(Object(A.a)({},e),{},{selection:Object(A.a)(Object(A.a)({},e.selection),{},{showEditor:!1,data:{id:n+1}})}))},onSubmit:function(e){d.annotate({})},renderSelector:on,renderHighlight:cn,disableZoom:!0,disableAnnotation:1===x.is_close}))),i.a.createElement(en,null,D.map((function(e){return i.a.createElement(nn,{className:"img-card mr-2",key:e.id,selected:e.id===parseInt(s.wipFileId)},e.file_versions.length>0?i.a.createElement("img",{alt:"card preview",src:e.file_versions[e.file_versions.length-1].view_link,onClick:function(n){return H(e.id,e.file_versions[e.file_versions.length-1].id)}}):i.a.createElement("span",{onClick:function(n){return H(e.id,e.link_versions[0].id)}},i.a.createElement("i",{class:"fa fa-link"})))})))))};function sn(){var e=Object(a.a)(["\n  display: flex;\n  flex-grow: 1;\n  width: 100%;\n  flex-flow: column;\n"]);return sn=function(){return e},e}function mn(){var e=Object(a.a)(["\n  width: 16px;\n\n  &.close {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n  }\n"]);return mn=function(){return e},e}function dn(){var e=Object(a.a)(["\n  .feather-eye-off {\n    position: relative;\n    top: -1px;\n    margin-right: 0.25rem;\n    width: 12px;\n  }\n  min-height: 70px;\n  > div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  ul {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: 0;\n    padding: 0;\n    li {\n      list-style: none;\n      .post-title {\n        width: 100%;\n      }\n    }\n  }\n\n  .company-post-detail-header {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n  }\n  .close {\n    .dark & {\n      color: #fff;\n    }\n  }\n\n  .author-name {\n    color: #a7abc3;\n    font-size: 14px;\n  }\n  .deadline-label {\n    border-radius: 6px;\n    padding: 3px 5px;\n    background-color: hsla(0, 0%, 82.4%, 0.2);\n    font-size: 12px;\n    margin-right: 3px;\n    display: flex;\n    align-items: center;\n    font-weight: normal;\n    svg {\n      width: 12px;\n      height: 12px;\n    }\n  }\n"]);return dn=function(){return e},e}function un(){var e=Object(a.a)(["\n  min-height: 240px;\n  .card-body {\n    padding: 1rem 1.5rem;\n  }\n"]);return un=function(){return e},e}var pn=o.b.div(un()),fn=o.b.div(dn()),bn=Object(o.b)(l.u)(mn()),hn=o.b.div(sn()),gn=function(e){var n=Object(O.tb)();return i.a.createElement("div",{className:"card card-body app-content-body"},i.a.createElement(pn,{className:"fadeBottom"},i.a.createElement(fn,{className:"card-header d-flex justify-content-between"},i.a.createElement("div",{className:"d-flex flex-column align-items-start"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",null,i.a.createElement(bn,{className:"close mr-2",icon:"arrow-left",width:"24",height:"24",onClick:function(){n.goBack()}})))),i.a.createElement("div",null)),i.a.createElement(hn,null)))};function vn(){var e=Object(a.a)([""]);return vn=function(){return e},e}function On(){var e=Object(a.a)(["\n  .card-header {\n    height: 70px;\n  }\n  .card-footer {\n    border: none;\n    flex-flow: column;\n    .custom-checkbox {\n      margin-bottom: 0.75rem;\n    }\n    .file-input-wrapper {\n      border: 1px solid #ebebeb;\n      border-radius: 6px;\n      margin-bottom: 2rem;\n      position: relative;\n      min-height: 125px;\n      background: #f1f2f7;\n    }\n  }\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n  .card {\n    padding: 0;\n  }\n"]);return On=function(){return e},e}var En=o.b.div(On()),xn=o.b.div(vn()),wn=i.a.memo((function(e){return i.a.createElement(En,{className:"col-md-3 app-sidebar bottom-modal-mobile"},i.a.createElement(xn,{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),i.a.createElement("div",{className:"bottom-modal-mobile_inner h-100"},i.a.createElement("div",{className:"app-sidebar-menu h-100",tabIndex:"2"},i.a.createElement("div",{className:"card card-body create-new-post-wrapper h-100"},i.a.createElement("div",{className:"card-body d-flex"})))))})),_n=function(e){var n=e.wip,t=Object(O.tb)(),a=Object(O.kb)()._t,r={star:a("POST.STAR","Mark with star"),unStar:a("POST.UNSTAR","Unmark star"),closeThisPost:a("POST.CLOSE_THIS_POST","Close this post"),openThisPost:a("POST.OPEN_THIS_POST","Open this post")},o=Object(u.d)((function(e){return e.session.user}));return i.a.createElement(_e.c,{className:"d-flex ml-2",width:220,moreButton:"more-horizontal"},n.author&&n.author.id===o.id&&i.a.createElement("div",{onClick:function(){t.showModal("edit",n)}},"Edit wip"),i.a.createElement("div",{onClick:function(){t.share(n)}},"Share wip"),i.a.createElement("div",{onClick:function(){t.favorite(n)}},n.is_pinned?r.unStar:r.star),i.a.createElement("div",{onClick:function(){}},n.is_close?r.openThisPost:r.closeThisPost))};function Sn(){var e=Object(a.a)(["\n  .count {\n    display: inline-flex;\n    align-items: center;\n    font-size: 12px;\n    color: #8b8b8b;\n    svg {\n      color: #fff;\n      width: 12px;\n      height: 12px;\n      stroke-width: 3;\n    }\n  }\n  .checked-circle {\n    border-radius: 50%;\n    background-color: #00c851;\n    width: 18px;\n    height: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .refresh-circle {\n    border-radius: 50%;\n    background-color: #505050;\n    width: 18px;\n    height: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .edit-circle {\n    border-radius: 50%;\n    background-color: #fb3;\n    width: 18px;\n    height: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]);return Sn=function(){return e},e}function yn(){var e=Object(a.a)(["\n  display: inline-block;\n  > svg {\n    width: 0.9rem;\n    height: 0.9rem;\n  }\n  .feather-pencil {\n    margin-right: 5px;\n  }\n"]);return yn=function(){return e},e}function jn(){var e=Object(a.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n"]);return jn=function(){return e},e}function Tn(){var e=Object(a.a)(["\n  &.custom-checkbox {\n    padding: 0;\n  }\n  label {\n    margin: 0;\n  }\n"]);return Tn=function(){return e},e}function Nn(){var e=Object(a.a)(["\n  position: relative;\n  .feather-corner-up-right {\n    position: absolute;\n    top: -23px;\n    right: 17px;\n  }\n"]);return Nn=function(){return e},e}function kn(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 5px;\n  font-weight: 400;\n  font-size: 11px;\n"]);return kn=function(){return e},e}function Rn(){var e=Object(a.a)(["\n  width: 16px;\n"]);return Rn=function(){return e},e}function Pn(){var e=Object(a.a)(["\n  flex-flow: column;\n  @media (max-width: 414px) {\n    padding-bottom: 30px !important;\n    .post-badge {\n      position: absolute;\n      bottom: 5px;\n      flex-flow: row wrap;\n      display: flex;\n    }\n  }\n  .post-recipients {\n    margin-bottom: 0.5rem;\n  }\n  .post-recipients.has-external {\n    margin-left: -25px;\n  }\n  .feather-eye-off {\n    position: relative;\n    top: -1px;\n    margin-right: 0.25rem;\n    width: 12px;\n  }\n  &:first-of-type {\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n  }\n  &:last-of-type {\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n  .custom-checkbox {\n    padding-left: 12px;\n  }\n\n  .app-list-title {\n    color: #343a40;\n    font-weight: normal;\n    width: 100%;\n    overflow: inherit;\n\n    &.has-unread {\n      font-weight: bold;\n    }\n\n    &.text-success {\n      text-decoration: line-through;\n    }\n\n    .time-stamp {\n      margin-left: 1rem;\n      font-weight: 400;\n      font-size: 11px;\n    }\n  }\n\n  .hover-btns {\n    display: none;\n    margin-right: 0.5rem;\n  }\n\n  &:hover {\n    .more-options,\n    .hover-btns {\n      display: inline-block;\n    }\n  }\n\n  .more-options {\n    padding: 0 4px;\n    svg {\n      width: 16px;\n    }\n  }\n  .feather {\n    &:hover {\n      color: #7a1b8b;\n    }\n  }\n\n  .post-read-title {\n    color: #363636;\n  }\n  .author-avatar {\n    img {\n      width: 2.5rem;\n      height: 2.5rem;\n    }\n    @media (max-width: 991.99px) {\n      img {\n        width: 2rem;\n        height: 2rem;\n      }\n    }\n  }\n  .subject-version {\n    span {\n      border-radius: 6px;\n      padding: 3px 5px;\n      background-color: hsla(0, 0%, 82.4%, 0.2);\n      font-size: 11px;\n      margin-right: 3px;\n      display: inline-block;\n      -webkit-box-align: center;\n      align-items: center;\n    }\n  }\n"]);return Pn=function(){return e},e}var An=o.b.li(Pn()),Cn=Object(o.b)(l.u)(Rn()),In=o.b.div(kn()),Ln=o.b.div(Nn()),Mn=Object(o.b)(C.o)(Tn()),Dn=o.b.div(jn()),qn=o.b.div(yn()),Fn=o.b.div(Sn()),Un=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.item,o=(e.dictionary,e.disableOptions),s=e.toggleCheckbox,m=e.checked,d=Object(u.d)((function(e){return e.session.user})),p=Object(O.eb)().fromNow,f=Object(O.tb)(),b=Object(r.useState)(0),h=Object(c.a)(b,2),g=h[0],v=(h[1],Object(r.useState)(!1)),E=Object(c.a)(v,2),x=(E[0],E[1],Object(r.useRef)(!0));Object(r.useEffect)((function(){return function(){x.current=!1}}),[]);var w=1===a.is_unread;return i.a.createElement(An,{appListWidthDiff:g+50,className:"list-group-item post-item-panel ".concat(w?"has-unread":""," ").concat(t," pl-3"),onClick:function(){f.openWIP(a)}},i.a.createElement("div",{className:"subject-version"},i.a.createElement("span",null,a.subject.name),i.a.createElement("span",null,"Version 1")),i.a.createElement(Dn,null,i.a.createElement(Mn,{name:"test",checked:m,onClick:function(){return s(a.id)},disabled:!1}),i.a.createElement(Ln,{className:"d-flex ml-2 mr-2"},i.a.createElement(l.a,{title:d.name,className:"author-avatar mr-2",id:a.author.id,name:a.author.name,imageLink:a.author.profile_image_link})),i.a.createElement("div",{className:"d-flex align-items-center justify-content-between flex-grow-1 min-width-0 mr-1"},i.a.createElement("div",{className:"app-list-title text-truncate ".concat(w?"has-unread":"")},i.a.createElement("div",{className:"text-truncate d-flex"},i.a.createElement("span",{className:"text-truncate"},a.title),i.a.createElement(qn,{className:"hover-btns ml-1"},!o&&a.author.id===d.id&&i.a.createElement(Cn,{icon:"pencil",onClick:function(e){e.preventDefault(),e.stopPropagation(),f.showModal("edit",a)}}),!o&&i.a.createElement(Cn,{icon:"clock",onClick:function(e){e.preventDefault(),e.stopPropagation()}}))),i.a.createElement(In,null,a.author.id!==d.id&&0===a.unread_count&&!a.view_user_ids.some((function(e){return e===d.id}))&&i.a.createElement("div",{className:"mr-2 badge badge-secondary text-white text-9"},"New"),0!==a.unread_count&&i.a.createElement("div",{className:"mr-2 badge badge-secondary text-white text-9"},a.unread_count," new"),i.a.createElement("span",{className:"time-stamp text-muted"},i.a.createElement("span",null,p(a.updated_at.timestamp)))))),i.a.createElement(Fn,{className:"WIP-counts"},i.a.createElement("span",{className:"count approved-count mr-2"},i.a.createElement("span",{className:"checked-circle mr-1"},i.a.createElement(l.u,{icon:"check"})),a.files.filter((function(e){return e.file_versions.some((function(e){return"done"===e.status}))})).length,"/",a.files.length),i.a.createElement("span",{className:"count todo-count mr-2"},i.a.createElement("span",{className:"edit-circle mr-1"},i.a.createElement(l.u,{icon:"pencil"})),a.files.filter((function(e){return e.file_versions.some((function(e){return"todo"===e.status}))})).length,"/",a.files.length),i.a.createElement("span",{className:"count todo-count mr-2"},i.a.createElement("span",{className:"refresh-circle mr-1"},i.a.createElement(l.u,{icon:"refresh-cw"})),a.files.filter((function(e){return e.file_versions.every((function(e){return"pending"===e.status}))})).length,"/",a.files.length)),i.a.createElement("div",{className:"d-flex"},i.a.createElement(_n,{wip:a}))))}));function Hn(){var e=Object(a.a)(["\n  margin: 0;\n  width: 100%;\n  text-align: center;\n  margin: auto;\n  text-align: center;\n  padding: 2rem;\n  border: 1px solid #ebebeb;\n  border-top: none;\n\n  svg {\n    display: block;\n    margin: 0 auto;\n  }\n\n  h3 {\n    font-size: 16px;\n  }\n  h5 {\n    margin-bottom: 0;\n    font-size: 14px;\n  }\n\n  button {\n    width: auto !important;\n    margin: 2rem auto;\n  }\n"]);return Hn=function(){return e},e}function zn(){var e=Object(a.a)(["\n  border-radius: ",";\n  border-bottom: ",";\n  .badge-light {\n    background: rgb(175, 184, 189, 0.2);\n    .dark & {\n      color: #fff;\n    }\n  }\n"]);return zn=function(){return e},e}function Wn(){var e=Object(a.a)(["\n  border-radius: 6px 6px 0 0 !important;\n  border-bottom: 1px solid #ebebeb;\n  // border-bottom: ",";\n  .badge-light {\n    background: rgb(175, 184, 189, 0.2);\n    .dark & {\n      color: #fff;\n    }\n  }\n"]);return Wn=function(){return e},e}function Bn(){var e=Object(a.a)(["\n  li {\n    border-radius: 0 !important;\n    background-color: #fafafa !important;\n    .dark & {\n      background-color: hsla(0, 0%, 100%, 0.0784313725490196) !important;\n    }\n  }\n"]);return Bn=function(){return e},e}function Yn(){var e=Object(a.a)(["\n  li {\n    border-radius: 0 !important;\n  }\n"]);return Yn=function(){return e},e}function Vn(){var e=Object(a.a)(["\n  margin-bottom: 10px;\n  .btn {\n    margin-left: 10px;\n  }\n"]);return Vn=function(){return e},e}function Gn(){var e=Object(a.a)(["\n  background: none;\n  box-shadow: none;\n  overflow: visible !important;\n  height: auto !important;\n  flex: unset !important;\n  min-height: auto !important;\n  .app-lists {\n    overflow: visible !important;\n  }\n"]);return Gn=function(){return e},e}o.b.div(Gn());var Qn=o.b.div(Vn()),Kn=o.b.div(Yn()),Jn=o.b.div(Bn()),Xn=o.b.li(Wn(),(function(e){return e.showPosts?"0":"1px solid #ebebeb"})),Zn=o.b.li(zn(),(function(e){return e.showPosts?"0":"0 0 6px 6px !important"}),(function(e){return e.showPosts?"0":"1px solid #ebebeb"})),$n=o.b.div(Hn()),et=function(e){var n=e.actions,t=e.filter,a=void 0===t?"all":t,o=e.loading,s=e.wips,m=Object(r.useRef)(!0),d=Object(O.kb)()._t,u={createNewPost:d("POST.CREATE_NEW_POST","Create new post"),all:d("POST.ALL","All"),inbox:d("POST.INBOX","Inbox"),newReply:d("POST.NEW_REPLY","New reply"),myPosts:d("POST.MY_POSTS","My sent posts"),starred:d("POST.STARRED","Starred"),archived:d("POST.ARCHIVED","Archived"),draft:d("POST.DRAFT","Draft"),drafts:d("POST.DRAFTS","Drafts"),category:d("POST.CATEGORY","Category"),replyRequired:d("POST.REPLY_REQUIRED","Reply required"),mustRead:d("POST.MUST_READ","Must read"),noReplies:d("POST.NO_REPLIES","No replies"),sortBy:d("POST.SORT_BY","Sort by"),starredFavorite:d("POST.STARRED_FAVORITE","Starred / Favorite"),recent:d("POST.RECENT","Recent"),unread:d("POST.UNREAD","Unread"),searchPost:d("POST.SEARCH_POST","Search by post title, content, or comment"),markAsRead:d("POST.MARK_AS_READ","Mark as read"),markAsUnread:d("POST.MARK_AS_UNREAD","Mark as unread"),share:d("POST.SHARE","Share"),snooze:d("POST.SNOOZE","Snooze"),follow:d("POST.FOLLOW","Follow"),unFollow:d("POST.UNFOLLOW","Unfollow"),files:d("POST.FILES","Files"),comment:d("POST.COMMENT","Comment"),editPost:d("POST.EDIT_POST","Edit post"),editReply:d("POST.EDIT_REPLY","Edit reply"),removeReply:d("POST.REMOVE_REPLY","Remove reply"),quote:d("POST.QUOTE","Quote"),mentionUser:d("POST.MENTION_USER","Mention user"),remindMeAboutThis:d("TODO.REMIND_ABOUT_THIS","Remind about this"),searchResult:d("POST.SEARCH_RESULT","Search Result:"),searchResults:d("POST.SEARCH_RESULTS","Search Results:"),searchNoResult:d("POST.NO_SEARCH_RESULT","No result found:"),private:d("POST.PRIVATE","Private"),by:d("POST.BY","by"),star:d("POST.STAR","Mark with star"),unStar:d("POST.UNSTAR","Unmark star"),alreadyReadThis:d("POST.ALREADY_READ_THIS","I've read this"),me:d("POST.LOGGED_USER_RESPONSIBLE","me"),quotedCommentFrom:d("POST.QUOTED_COMMENT_FROM","Quoted comment from"),showMore:d("SHOW_MORE","Show more"),showLess:d("SHOW_LESS","Show less"),markAll:d("POST.MARK_ALL_AS_READ","Mark all as read"),archiveAll:d("POST.ARCHIVE_ALL","Archive all"),noComment:d("POST.NO_COMMENT","no comment"),oneComment:d("POST.ONE_COMMENT","1 comment"),comments:d("POST.NUMBER_COMMENTS","::comment_count:: comments"),messageInSecureWs:d("POST.MESSAGE_IN_SECURE_WORKSPACE","message in a secure workspace"),markImportant:d("CHAT.MARK_IMPORTANT","Mark as important"),unMarkImportant:d("CHAT.UNMARK_IMPORTANT","Unmark as important"),archive:d("POST.ARCHIVE","Archive"),requestChange:d("POST.REQUEST_CHANGE","Request for change"),accept:d("POST.ACCEPT","Accept"),hasAcceptedProposal:d("POST.HAS_ACCEPTED_PROPOSAL","has accepted the proposal."),hasRequestedChange:d("POST.HAS_REQUESTED_CHANGE","has requested a change."),actionNeeded:d("POST.ACTION_NEEDED","Action needed"),changeRequested:d("POST.CHANGE_REQUESTED","Change requested"),accepted:d("POST.ACCEPTED","Accepted"),requestForApproval:d("POST.REQUEST_FOR_APPROVAL","Request for approval"),closeThisPost:d("POST.CLOSE_THIS_POST","Close this post"),repliesClosed:d("POST.REPLIES_CLOSED","Replies closed"),openThisPost:d("POST.OPEN_THIS_POST","Open this post"),creatorClosedPost:d("POST.CREATOR_CLOSED_POST","The creator/internal closed this post for commenting"),reopen:d("POST.REOPEN","Reopen"),closed:d("POST.CLOSED","Closed"),createNewList:d("POST.CREATE_NEW_LIST","New List"),addToList:d("POST.ADD_TO_LIST","Add to list"),removeToList:d("POST.REMOVE_TO_LIST","Remove to list"),allOthers:d("POST.ALL_OTHERS","All others"),sharedClientBadge:d("POST.BADGE_SHARED_CLIENT","The client can see this post"),notSharedClientBadge:d("POST.BADGE_NOT_SHARED_CLIENT","This post is private to our team"),selectAll:d("BUTTON.SELECT_ALL","Select all"),remove:d("BUTTON.REMOVE","Remove"),fileAutomaticallyRemoved:d("FILE.FILE_AUTOMATICALLY_REMOVED_LABEL","File automatically removed by owner request"),filesAutomaticallyRemoved:d("FILE.FILES_AUTOMATICALLY_REMOVED_LABEL","Files automatically removed by owner request"),errorLoadingPost:d("TOASTER.ERROR_LOADING_POST","Error loading post"),teamLabel:d("TEAM","Team"),new:d("POST.NEW","New")},p=[d("POSTS.NO_ITEMS_FOUND_HEADER_1","WOO!"),d("POSTS.NO_ITEMS_FOUND_HEADER_2","Queue\u2019s empty, time to dance!")],f=[d("POSTS.NO_ITEMS_FOUND_TEXT_1","Nothing here but me\u2026 \ud83d\udc7b"),d("POSTS.NO_ITEMS_FOUND_TEXT_2","Job well done!\ud83d\udc83\ud83d\udd7a")],b=Object(r.useState)(Math.floor(Math.random()*p.length)),h=Object(c.a)(b,2),g=h[0],v=h[1],E=[],x=Object.values(s),w=Object(r.useState)({showPending:!0,showArchived:!0}),_=Object(c.a)(w,2),S=_[0],y=_[1],j=Object(r.useState)([]),T=Object(c.a)(j,2),N=T[0],k=T[1],R=function(e){var n=!N.some((function(n){return n===e}))?[].concat(Object(we.a)(N),[e]):N.filter((function(n){return n!==e}));k(n)};return Object(r.useEffect)((function(){return function(){m.current=null}}),[]),Object(r.useEffect)((function(){m.current&&k([])}),[a]),Object(r.useEffect)((function(){v(Math.floor(Math.random()*p.length))}),[S]),i.a.createElement(i.a.Fragment,null,("all"===a||"inbox"===a)&&N.length>0&&i.a.createElement(Qn,null,i.a.createElement("button",{className:"btn all-action-button",onClick:function(){n.archiveAll({selected_post_ids:N,topic_id:null.id}),k([])}},"archive"),i.a.createElement("button",{className:"btn all-action-button",onClick:function(){n.readAll({selected_post_ids:N,topic_id:null.id}),k([]),n.getUnreadNotificationEntries({add_unread_comment:1})}},"read")),i.a.createElement("div",{className:"card card-body app-content-body mb-4 unset-flex"},i.a.createElement("div",{className:"app-lists",tabIndex:"1","data-loaded":"0","data-loading":o},!1,"all"!==a&&i.a.createElement("ul",{className:"list-group list-group-flush ui-sortable fadeIn"},i.a.createElement("div",null,Object.values(s).map((function(e){return i.a.createElement(Un,{key:e.id,item:e,toggleCheckbox:R,checked:N.some((function(n){return n===e.id})),dictionary:u})})))),"all"===a&&i.a.createElement("ul",{className:"list-group list-group-flush ui-sortable fadeIn"},i.a.createElement("div",null,i.a.createElement(Xn,{className:"list-group-item post-item-panel pl-3 unread-posts-header",onClick:function(){y((function(e){return Object(A.a)(Object(A.a)({},e),{},{showArchived:!S.showArchived,showPending:!S.showPending})}))},showPosts:S.showPending},i.a.createElement("span",{className:"badge badge-light"},i.a.createElement(l.u,{icon:S.showPending?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),"Pending"))),x.length>0&&i.a.createElement(Kn,{className:"unread-posts-container collapse ".concat(S.showPending?"show":""),id:"unread-posts-container",showPosts:S.showPending},x.length>0&&i.a.createElement(Jn,{className:"read-posts-container collapse ".concat(S.showArchived?"show":""),showPosts:S.showArchived},x.map((function(e,n){return i.a.createElement(Un,{key:e.id,item:e,toggleCheckbox:R,checked:N.some((function(n){return n===e.id})),dictionary:u})})))),S.showPending&&0===x.length&&i.a.createElement($n,null,i.a.createElement("h3",null,p[g]),i.a.createElement("h5",null,f[g]," ")),i.a.createElement("div",null,i.a.createElement(Zn,{className:"list-group-item post-item-panel pl-3 other-posts-header",onClick:function(){y((function(e){return Object(A.a)(Object(A.a)({},e),{},{showArchived:!S.showArchived,showPending:!S.showPending})}))},showPosts:S.showArchived},i.a.createElement("span",{className:"badge badge-light"},i.a.createElement(l.u,{icon:S.showArchived?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),"Archived"))),E.length>0&&i.a.createElement(Jn,{className:"read-posts-container collapse ".concat(S.showArchived?"show":""),showPosts:S.showArchived},E.map((function(e,n){return i.a.createElement(Un,{key:e.id,item:e,toggleCheckbox:R,checked:N.some((function(n){return n===e.id})),dictionary:u})})))))),i.a.createElement("div",{className:"mt-3 post-btm"},"\xa0"))},nt=t(85),tt=t(23),at=t(59),rt=t.n(at);function it(){var e=Object(a.a)(["\n  width: 16px;\n  cursor: pointer;\n"]);return it=function(){return e},e}function ot(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return ot=function(){return e},e}var ct=function(){document.querySelectorAll("span.react-tooltip-lite").forEach((function(e){e.parentElement.classList.toggle("tooltip-active")}))},lt=Object(o.b)(rt.a)(ot()),st=Object(o.b)(l.u)(it()),mt=function(e){e.dictionary;var n=e.item,t=Object(r.useRef)(!0),a=Object(O.eb)(),o=a.fromNow,l=a.localizeDate,s=(Object(O.J)(),Object(r.useState)(!1)),m=Object(c.a)(s,2),d=m[0],u=(m[1],Object(r.useState)(!1)),p=Object(c.a)(u,2),f=(p[0],p[1],Object(r.useState)(!1)),b=Object(c.a)(f,2);b[0],b[1];Object(r.useEffect)((function(){return function(){t.current=!1}}),[]);return i.a.createElement("div",{className:"d-inline-flex"},i.a.createElement(lt,{arrowSize:5,onToggle:ct,content:"favorite"},i.a.createElement(st,{className:"mr-2",onClick:function(){},icon:"star",fill:d?"#ffc107":"none",stroke:d?"#ffc107":"currentcolor"})),i.a.createElement(lt,{arrowSize:5,onToggle:ct,content:"archive"},i.a.createElement(st,{className:"mr-2",onClick:function(){},icon:"clock"})),i.a.createElement("div",{className:"time-stamp"},i.a.createElement(lt,{arrowSize:5,distance:10,onToggle:ct,content:"".concat(l(n.created_at.timestamp))},i.a.createElement("span",{className:"text-muted"},o(n.created_at.timestamp)))))},dt=t(372);function ut(){var e=Object(a.a)(["\n  //min-width: 150px;\n  margin-left: auto;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-end;\n"]);return ut=function(){return e},e}function pt(){var e=Object(a.a)(["\n  position: relative;\n  flex: unset;\n  .recipients svg {\n    margin: 0;\n  }\n\n  .author-avatar {\n    width: 40px;\n    height: 40px;\n  }\n\n  .avatar.post-author {\n    min-width: 45px;\n  }\n\n  .author-name {\n    display: block;\n    font-size: 14px;\n    font-weight: 500;\n    color: rgb(80, 80, 80);\n    .dark & {\n      color: #c7c7c7;\n    }\n  }\n\n  .recipients {\n    color: #8b8b8b;\n    font-size: 10px;\n  }\n\n  .ellipsis-hover {\n    position: relative;\n    cursor: pointer;\n\n    &:hover {\n      .recipient-names {\n        opacity: 1;\n        max-height: 300px;\n      }\n    }\n  }\n"]);return pt=function(){return e},e}var ft=o.b.div(pt()),bt=o.b.div(ut()),ht=i.a.memo((function(e){var n=e.item,t={container:Object(r.useRef)(null),body:Object(r.useRef)(null)},a=n.files;return i.a.createElement(ft,{ref:t.container,className:"card-body"},i.a.createElement("div",{className:"d-flex align-items-center p-l-r-0 m-b-20"},i.a.createElement("div",{className:"d-flex justify-content-between align-items-center text-muted w-100"},i.a.createElement("div",{className:"d-inline-flex align-items-start"},i.a.createElement(l.a,{className:"author-avatar mr-2 post-author",id:n.author.id,name:n.author.name,imageLink:n.author.profile_image_thumbnail_link?n.author.profile_image_thumbnail_link:n.author.profile_image_link}),i.a.createElement("div",null,i.a.createElement("span",{className:"author-name"},n.author.first_name))),i.a.createElement(bt,null,i.a.createElement(mt,{item:n})))),i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"w-100 post-body-content ql-editor",ref:t.body,dangerouslySetInnerHTML:{__html:nt.a.parseEmoji(n.description)}})),i.a.createElement(dt.a,{items:Object.values(a),showOptions:!1}))})),gt=t(153);function vt(){var e=Object(a.a)(["\n  width: 16px;\n\n  &.close {\n    cursor: pointer;\n  }\n"]);return vt=function(){return e},e}function Ot(){var e=Object(a.a)(["\n  width: 100%;\n  padding: 0.5rem 1.5rem;\n  flex-wrap: wrap;\n  .seen-indicator,\n  .post-reaction {\n    cursor: pointer;\n  }\n  img {\n    border-radius: 6px;\n    max-height: 250px;\n  }\n  .clap-true {\n    color: #7a1b8b;\n    fill: #7a1b8b;\n  }\n  .readers-container {\n    @media (max-width: 575.99px) {\n      flex: 0 1 100%;\n      .clap-count-wrapper {\n        display: inline-block;\n        margin-right: 0.5rem;\n      }\n      .user-reads-container {\n        .not-read-users-container,\n        .read-users-container {\n          right: -75px;\n        }\n        &.read-by {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          .not-read-users-container,\n          .read-users-container {\n            right: -20px;\n          }\n        }\n      }\n    }\n  }\n  .read-users-container {\n    span {\n      align-items: center;\n    }\n    .avatar.avatar-md {\n      min-height: 2.7rem;\n      min-width: 2.7rem;\n    }\n  }\n  /* slide enter */\n  .slide-enter,\n  .slide-appear {\n    opacity: 0;\n    transform: scale(0.97) translateY(50px);\n    z-index: 1;\n  }\n  .slide-enter.slide-enter-active,\n  .slide-appear.slide-appear-active {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n    transition: opacity 300ms linear 100ms, transform 300ms ease-in-out 100ms;\n  }\n\n  /* slide exit */\n  .slide-exit {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n  .slide-exit.slide-exit-active {\n    opacity: 0;\n    transform: scale(0.97) translateY(50px);\n    transition: opacity 150ms linear, transform 150ms ease-out;\n  }\n  .slide-exit-done {\n    opacity: 0;\n  }\n"]);return Ot=function(){return e},e}var Et=o.b.div(Ot()),xt=Object(o.b)(l.u)(vt()),wt=function(e){var n=e.item,t=Object(O.tb)(),a=Object(u.d)((function(e){return e.users.users})),r=Object(we.a)(new Set(n.view_user_ids)),o=Object.values(a).filter((function(e){return r.some((function(n){return n===e.id}))})),c=Object.values(a).filter((function(e){return n.clap_user_ids.some((function(n){return n===e.id}))})),s=function(){var e={proposal_id:n.id,clap:0===n.user_clap_count?1:0};t.react(e,(function(n,a){n&&(1===e.clap?t.unlike(e):t.like(e))})),0===n.user_clap_count?t.like(e):t.unlike(e)};return i.a.createElement(Et,{className:"d-flex align-items-center"},i.a.createElement("div",{className:"clap-count-wrapper d-none d-sm-flex"},i.a.createElement(xt,{className:n.user_clap_count?"mr-2 post-reaction clap-true":"mr-2 post-reaction clap-false",icon:"thumbs-up",onClick:s}),n.clap_count,0!==c.length&&i.a.createElement("span",{className:"hover read-users-container"},c.map((function(e){return i.a.createElement("span",{key:e.id},i.a.createElement(l.a,{className:"mr-2",key:e.id,name:e.name,imageLink:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link,id:e.id})," ",i.a.createElement("span",{className:"name"},e.name))})))),i.a.createElement("div",{className:"readers-container ml-auto text-muted"},i.a.createElement("div",{className:"clap-count-wrapper d-sm-none"},i.a.createElement(xt,{className:n.user_clap_count?"mr-2 post-reaction clap-true":"mr-2 post-reaction clap-false",icon:"thumbs-up",onClick:s}),n.clap_count,0!==c.length&&i.a.createElement("span",{className:"hover read-users-container"},c.map((function(e){return i.a.createElement("span",{key:e.id},i.a.createElement(l.a,{className:"mr-2",key:e.id,name:e.name,imageLink:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link,id:e.id})," ",i.a.createElement("span",{className:"name"},e.name))})))),i.a.createElement(xt,{className:"mr-2",icon:"message-square"}),n.reply_count,i.a.createElement("div",{className:"user-reads-container"},i.a.createElement("span",{className:"no-readers"},i.a.createElement(xt,{className:"ml-2 mr-2 seen-indicator",icon:"eye"}),r.length),i.a.createElement(gt.a,{users:o}))))},_t=t(24),St=t(18),yt=t(93);function jt(){var e=Object(a.a)(["\n  position: absolute;\n  top: 105%;\n  font-size: 0.8rem;\n"]);return jt=function(){return e},e}function Tt(){var e=Object(a.a)(["\n  &.chat-input {\n    // border: 1px solid #afb8bd;\n    // border-radius: 5px;\n    max-height: 180px;\n    @media (min-width: 768px) {\n      max-height: 370px;\n    }\n    position: static;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n\n    &:focus {\n      border: none;\n    }\n  }\n  .ql-container {\n    position: static;\n  }\n  .ql-toolbar {\n    display: none;\n  }\n  .ql-editor {\n    padding: 11px 9px;\n    "," .mention {\n      color: #7a1b8b;\n    }\n    &:focus {\n      box-shadow: none;\n      border-color: rgba(122, 27, 139, 0.8);\n    }\n  }\n  .ql-container {\n    border: none;\n  }\n  .ql-mention-list-container-top,\n  .ql-mention-list-container {\n    width: 300px !important;\n    max-height: 170px;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(26, 26, 26, 0.4) 0px 2px 3px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 0px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    z-index: 2;\n\n    .dark & {\n      background: #25282c;\n      color: #c7c7c7;\n    }\n\n    .ql-mention-list {\n      padding: 0;\n\n      .ql-mention-list-item {\n        display: flex;\n        align-items: center;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n        padding-left: 1rem;\n\n        &.selected {\n          background: #7a1b8b;\n          color: #fff;\n          cursor: pointer;\n          span.all-pic > img {\n            filter: brightness(0) saturate(100%) invert(1);\n          }\n        }\n      }\n    }\n  }\n"]);return Tt=function(){return e},e}function Nt(){var e=Object(a.a)([""]);return Nt=function(){return e},e}var kt=o.b.div(Nt()),Rt=Object(o.b)(yt.a)(Tt(),(function(e){return e.editMode&&"> div {width:calc(100% - 15px);}"})),Pt=(o.b.span(jt()),Object(r.forwardRef)((function(e,n){var a=e.selectedEmoji,o=e.onClearEmoji,l=e.selectedGif,s=e.onClearGif,m=e.dropAction,d=e.sent,p=e.handleClearSent,f=e.post,b=e.parentId,h=e.userMention,g=e.handleClearUserMention,v=e.commentId,E=e.onActive,x=e.mainInput,w=e.imageLoading,_=void 0===w?null:w,S=e.setImageLoading,y=void 0===S?null:S,j=e.wip,T=Object(O.ub)(),N=Object(u.c)(),k=Object(r.useRef)(),R=Object(u.d)((function(e){return e.session.user})),P=Object(u.d)((function(e){return e.workspaces.workspaces})),C=Object(u.d)((function(e){return e.workspaces.activeTopic})),L=Object(u.d)((function(e){return e.wip.editWIPComment})),M=Object(u.d)((function(e){return e.users.users})),D=Object(r.useState)(""),q=Object(c.a)(D,2),F=q[0],U=q[1],H=Object(r.useState)(""),z=Object(c.a)(H,2),W=z[0],B=z[1],Y=Object(r.useState)([]),V=Object(c.a)(Y,2),G=V[0],Q=V[1],K=Object(r.useState)(!1),J=Object(c.a)(K,2),X=J[0],Z=J[1],$=Object(r.useState)(null),ee=Object(c.a)($,2),ne=ee[0],te=ee[1],ae=Object(r.useState)(null),re=Object(c.a)(ae,2),ie=re[0],oe=re[1],ce=Object(r.useState)([]),le=Object(c.a)(ce,2),se=le[0],me=le[1],de=Object(O.vb)(L&&f&&L.proposal_id===j.id&&L.quote?L.quote.id:v),ue=Object(c.a)(de,1)[0],pe=Object(r.useState)([]),fe=Object(c.a)(pe,2),be=(fe[0],fe[1]),he=Object(r.useState)({}),ge=Object(c.a)(he,2),ve=(ge[0],ge[1]),Oe=Object(r.useState)([]),Ee=Object(c.a)(Oe,2),xe=(Ee[0],Ee[1]),_e=Object(O.kb)()._t,Se=(_e("DRAFT.SAVING_DRAFT","Saving draft..."),_e("DRAFT.SAVED","Draft saved"),C?C.members.map((function(e){return e.member_ids?e.member_ids:e.id})).flat():[]),ye=function(){if(!_){var e=Math.floor(Date.now()/1e3),n=[],a=!1,r=t(61).generate(),i=!1;if(G.ops&&G.ops.length>0){i=G.ops.filter((function(e){return e.insert.mention})).length>0;var o=G.ops.filter((function(e){return e.insert.mention})).filter((function(e){return"internal"===e.insert.mention.type||"external"===e.insert.mention.type})).map((function(e){return Number(e.insert.mention.type_id)}));(n=Object(we.a)(new Set(o))).includes(NaN)&&(n=Se.length?Object(we.a)(new Set([].concat(Object(we.a)(n.filter((function(e){return!isNaN(e)}))),Object(we.a)(Se)))):n.filter((function(e){return!isNaN(e)}))),G.ops.forEach((function(e){e.insert.image&&(a=!0)}))}if(""!==W.trim()||0!==n.length||a||i){var c={proposal_id:j.id,body:F,mention_ids:n,attachment_ids:se.map((function(e){return e.id})),proposal_attachment_ids:[],reference_id:r,parent_id:b,code_data:{push_title:"".concat(R.name," replied in ").concat(j.title),proposal_id:j.id,proposal_title:j.title,mention_ids:n},quote:null};if(c.quote=ue?{id:ue.id,body:ue.body,user_id:ue.author?ue.author.id:ue.user_id,user:ue.author?ue.author:ue.user,files:ue.files}:null,!X){var l={author:R,body:F,clap_count:0,code:e,created_at:{timestamp:e},file_version_id:null,files:[],files_trashed:[],id:r,is_archive:!1,is_editable:!0,is_edited:0,is_favourite:!1,is_important:!1,media_id:null,original_body:F,parent_id:b,proposal_id:j.id,quote:ue,ref_quote:ue,reference_id:r,replies:{},todo_reminder:null,topic_id:C.id,total_replies:0,total_unread_replies:0,updated_at:{timestamp:e},user_clap_count:0,workspace_id:C.folder_id,clap_user_ids:[]};T.addComment(l)}X?(c=Object(A.a)(Object(A.a)({},c),{},{id:ne.id,parent_id:ne.parent_id,reference_id:null}),T.updateComment(c),Z(!1),te(null)):T.submitComment(c),ue&&T.clearQuote(v),ie&&oe(null),je()}}},je=function(){B(""),U(""),Q([]),me([]),k.current&&k.current.getEditor()&&k.current.getEditor().setContents([]),null!==L&&N(Object(I.R)(null))};Object(r.useEffect)((function(){h&&k.current.getEditor().clipboard.dangerouslyPasteHTML(0,h)}),[h]),Object(r.useEffect)((function(){k.current&&k.current.focus();var e=function(e){var n=[];if(e.clipboardData.items.length)for(var t=0;t<e.clipboardData.items.length;t++){var a=e.clipboardData.items[t];"file"===a.kind&&n.push(a.getAsFile(a.type))}n.length&&m(n)};return document.addEventListener("paste",e,!1),function(){return document.removeEventListener("paste",e,!1)}}),[]),Object(r.useEffect)((function(){var e=function(e){27===e.keyCode&&je()};return X?document.addEventListener("keydown",e):document.removeEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[X]),Object(r.useEffect)((function(){var e;L&&!X&&null===ne&&x&&L.proposal_id===j.id&&(e=L,k.current.getEditor().clipboard.dangerouslyPasteHTML(0,e.body),U(e.body),te(e),Z(!0),e.quote&&T.addQuote(e.quote)),null===L&&X&&ne&&Te()}),[L]),Object(r.useEffect)((function(){if(a){var e=k.current.getEditor();k.current.focus();var n=e.getSelection().index;e.insertText(n,a.native),e.setSelection(n+2),o()}}),[a]),Object(r.useEffect)((function(){if(l){var e=k.current.getEditor();k.current.focus();var n=e.getSelection().index;e.insertEmbed(n,"image",l.images.downsized.url),e.setSelection(n+5),s()}}),[l]),Object(r.useEffect)((function(){d&&(ye(),p())}),[d]);var Te=function(){Z(!1),te(null),je()};Object(O.U)(je,F,W,G);var Ne=Object.values(M).filter((function(e){return Se.some((function(n){return n===e.id}))})),ke=Object(we.a)(new Set(Se)).filter((function(e){return e!==R.id})),Re=Object(O.R)({mode:"post_comment",callback:ye,mentionOrientation:"top",quillRef:k,members:Ne,workspaces:P||[],disableMention:!1,setInlineImages:me,setImageLoading:y,prioMentionIds:Object.values(M).filter((function(e){return ke.some((function(n){return n===e.id}))})).map((function(e){return e.id})),post:f}).modules;return i.a.createElement(kt,{className:"chat-input-wrapper",ref:n},i.a.createElement(Rt,{className:"chat-input",modules:Re,ref:k,onChange:function(e,n,t,a){var r=a.getText(e);""===r.trim()&&h&&(g(),ve({})),""===r.trim()&&X&&(Z(!1),te(null),ve({}),null!==L&&N(Object(I.R)(null))),""===r.trim()&&ie&&oe(null),U(e),B(r),Q(a.getContents());var i=!1,o=!1;if(a.getContents().ops&&a.getContents().ops.length){if(i=a.getContents().ops.filter((function(e){return e.insert.mention})).length,o=a.getContents().ops.filter((function(e){return e.insert.image})).length,i){var c=a.getContents().ops.filter((function(e){return!(!e.insert.mention||"external"===e.insert.mention.type)})).map((function(e){return e.insert.mention}));xe(c),be(c.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})))}i||xe([])}""!==r.trim()||i||o?E(!0):E(!1)},editMode:X}))})));function At(){var e=Object(a.a)(["\n  min-width: ",";\n  display: flex;\n  .feather {\n    width: 18px;\n    height: 18px;\n  }\n  .chat-buttons {\n    display: none;\n  }\n  @media (max-width: 414px) {\n    .btn-approver {\n      padding-top: 13px;\n    }\n    min-width: ",";\n    .btn-approver,\n    .btn-image,\n    .btn-smile,\n    .btn-paperclip {\n      display: ",";\n    }\n    .chat-buttons {\n      display: block;\n    }\n  }\n"]);return At=function(){return e},e}function Ct(){var e=Object(a.a)(["\n  width: 40px;\n  height: 46px;\n  display: flex;\n  align-items: center;\n  padding: 13px 10px;\n  align-self: flex-end;\n  .feather {\n    cursor: pointer;\n  }\n  @media (max-width: 414px) {\n    width: 30px;\n    padding: 13px 2px;\n  }\n  &.btn-approver {\n    padding-top: 16px;\n  }\n"]);return Ct=function(){return e},e}var It=o.b.div(Ct()),Lt=o.b.div(At(),(function(e){return e.editMode?"160px":"120px"}),(function(e){return e.showButtons&&e.editMode?"180px":e.showButtons?"150px":e.editMode?"60px":"30px"}),(function(e){return e.showButtons?"block":"none"})),Mt=function(e){var n=e.parentId,t=e.showEmojiPicker,a=e.handleShowEmojiPicker,o=e.onShowFileDialog,s=e.handleQuillImage,m=e.mainInput,d=Object(u.c)(),p=Object(u.d)((function(e){return e.wip.editWIPComment})),f=Object(r.useState)(!1),b=Object(c.a)(f,2),h=b[0],g=b[1],v=function(){document.querySelectorAll("span.react-tooltip-lite").forEach((function(e){e.parentElement.classList.toggle("tooltip-active")}))};return i.a.createElement(Lt,{editMode:null!==p,showButtons:h},p&&m&&i.a.createElement(It,null,i.a.createElement(rt.a,{arrowSize:5,distance:10,onToggle:v,content:"Close edit"},i.a.createElement(l.u,{className:"close-button",icon:"x",onClick:function(){null!==p&&d(Object(I.R)(null))}}))),i.a.createElement(It,{className:"btn-smile"},i.a.createElement(rt.a,{arrowSize:5,distance:10,onToggle:v,content:"Emoji"},i.a.createElement(l.u,{className:"".concat(t?"active":""),onClick:a,icon:"smile"}))),i.a.createElement(It,{className:"btn-image"},i.a.createElement(rt.a,{arrowSize:5,distance:10,onToggle:v,content:"Inline image"},i.a.createElement(l.u,{icon:"image",onClick:s}))),i.a.createElement(It,{className:"btn-paperclip"},i.a.createElement(rt.a,{arrowSize:5,distance:10,onToggle:v,content:"Attach file"},i.a.createElement(l.u,{onClick:function(){return o(n)},icon:"paperclip"}))),i.a.createElement(It,{className:"chat-buttons"},i.a.createElement(l.u,{onClick:function(){g((function(e){return!e}))},icon:h?"x":"more-vertical"})))};function Dt(){var e=Object(a.a)([""]);return Dt=function(){return e},e}function qt(){var e=Object(a.a)(["\n  padding: 0 10px 10px;\n  display: block;\n  text-align: left;\n  position: relative;\n  width: 100%;\n  border-left: 2px solid ",";\n  margin-left: 30px;\n  margin-bottom: 10px;\n\n  .quote-author-name,\n  .quote-message {\n    position: relative;\n    display: inline-block;\n    width: calc(100% - 20px);\n  }\n  .quote-author-name {\n    font-weight: 600;\n    font-size: 12px;\n  }\n  .quote-message {\n    font-size: 12px;\n  }\n  .quote-clear-container {\n    position: absolute;\n    left: -35px;\n    top: calc(50% - 10px);\n    background-color: #fff;\n    cursor: pointer;\n  }\n  img,\n  video {\n    display: none;\n  }\n  .video-quote,\n  .image-quote {\n    img {\n      display: inline-block;\n    }\n  }\n"]);return qt=function(){return e},e}var Ft=o.b.div(qt(),(function(e){return e.theme.colors.primary})),Ut=Object(o.b)(l.u)(Dt()),Ht=function(e){var n=e.commentActions,t=e.commentId,a=e.editWIPComment,r=e.mainInput,o=Object(O.vb)(t),l=Object(c.a)(o,2),s=l[0],m=l[1],d=function(){n.clearQuote(t)};return s?a&&r?i.a.createElement(Ft,null,i.a.createElement("span",{className:"quote-author-name",dangerouslySetInnerHTML:{__html:s.user?s.user.name:""}}),i.a.createElement("span",{className:"quote-message",dangerouslySetInnerHTML:{__html:s.body?m.split("</p>")[0]:""}}),i.a.createElement("span",{className:"quote-clear-container",onClick:d},i.a.createElement(Ut,{icon:"x"}))):a&&!r?null:i.a.createElement(Ft,null,i.a.createElement("span",{className:"quote-author-name",dangerouslySetInnerHTML:{__html:s.user?s.user.name:""}}),i.a.createElement("span",{className:"quote-message",dangerouslySetInnerHTML:{__html:s.body?m.split("</p>")[0]:""}}),i.a.createElement("span",{className:"quote-clear-container",onClick:d},i.a.createElement(Ut,{icon:"x"}))):null};function zt(){var e=Object(a.a)(["\n  margin-right: 6px;\n  width: 20px;\n"]);return zt=function(){return e},e}function Wt(){var e=Object(a.a)(["\n  width: 100%;\n  text-align: center;\n  padding: 15px 10px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  h4 {\n    margin: 0 10px;\n  }\n"]);return Wt=function(){return e},e}function Bt(){var e=Object(a.a)(["\n  padding: 5px 45px;\n"]);return Bt=function(){return e},e}function Yt(){var e=Object(a.a)(["\n  right: 130px;\n  bottom: 120px;\n\n  @media (max-width: 414px) {\n    right: 5px;\n    bottom: 150px;\n  }\n\n  .common-picker-btn {\n    text-align: right;\n  }\n"]);return Yt=function(){return e},e}function Vt(){var e=Object(a.a)(["\n  width: 100%;\n\n  .alert {\n    width: 100%;\n    margin-bottom: 0;\n    display: flex;\n    justify-content: space-between;\n\n    span:last-child {\n      cursor: pointer;\n    }\n  }\n"]);return Vt=function(){return e},e}function Gt(){var e=Object(a.a)(["\n  width: 100%;\n  .alert {\n    width: 100%;\n    margin-bottom: 0;\n    text-align: center;\n  }\n  .request-approval {\n    color: #7a1b8b;\n  }\n"]);return Gt=function(){return e},e}function Qt(){var e=Object(a.a)(["\n  .feather-send {\n    background: "," !important;\n    fill: ",";\n    &:hover {\n      cursor: ",";\n    }\n  }\n  &.channel-viewing {\n    display: flex;\n    flex-wrap: wrap;\n    background-color: #f8f8f8;\n    text-align: center;\n    align-items: center;\n    justify-content: center;\n    padding: 20px 0;\n    > div {\n      flex: 0 1 100%;\n    }\n\n    .channel-name {\n      color: #64625c;\n      font-size: 17px;\n      font-weight: 600;\n    }\n    .channel-create {\n      letter-spacing: 0;\n      color: #b8b8b8;\n      font-weight: normal;\n      font-size: 19px;\n      text-transform: lowercase;\n      margin-bottom: 16px;\n    }\n    .channel-action {\n      button {\n        background: #7a1b8b;\n        color: #fff;\n        border: none;\n        padding: 8px 15px;\n        border-radius: 8px;\n        font-size: 16px;\n        font-weight: 600;\n      }\n    }\n  }\n  @media all and (max-width: 620px) {\n    .emojiButton {\n      display: none;\n    }\n    svg.feather-send {\n      margin-right: 0;\n    }\n  }\n"]);return Qt=function(){return e},e}function Kt(){var e=Object(a.a)([""]);return Kt=function(){return e},e}function Jt(){var e=Object(a.a)(["\n  position: relative;\n  border: 1px solid #e1e1e1;\n  box-shadow: 0 3px 10px #7a1b8b12;\n  border-radius: 8px;\n  margin-right: 8px;\n  min-height: 48px;\n  display: flex;\n  .feather-approver,\n  .feather-image,\n  .feather-paperclip,\n  .feather-smile {\n    border-radius: 4px;\n    cursor: pointer;\n    &.active {\n      color: #7a1b8b;\n    }\n    &:hover {\n      color: #7a1b8b;\n    }\n    transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;\n  }\n  .feather-smile {\n    background: transparent;\n    border-color: transparent;\n    transition: color 0.15s ease-in-out;\n    color: #cacaca;\n    &.active {\n      color: #7a1b8b;\n    }\n    &:hover {\n      color: #7a1b8b;\n    }\n  }\n"]);return Jt=function(){return e},e}function Xt(){var e=Object(a.a)(["\n  position: relative;\n  z-index: 3;\n  .feather-send {\n    border: 1px solid #e1e1e1;\n    height: 100%;\n    cursor: pointer;\n    width: 48px;\n    border-radius: 8px;\n    transition: background-color 0.15s ease-in-out;\n    padding: 12px;\n    margin-right: 1rem;\n    @media (max-width: 480px) {\n      margin-right: 0;\n    }\n  }\n  .chat-input-wrapper {\n    display: flex;\n    flex-grow: 1;\n    flex-flow: column;\n    .quill {\n      width: 100%;\n    }\n  }\n"]);return Xt=function(){return e},e}var Zt=o.b.div(Xt()),$t=o.b.div(Jt()),ea=Object(o.b)(l.u)(Kt()),na=o.b.div(Qt(),(function(e){return e.backgroundSend}),(function(e){return e.fillSend}),(function(e){return e.cursor})),ta=(o.b.div(Gt()),o.b.div(Vt()),Object(o.b)(l.f)(Yt())),aa=(o.b.div(Bt()),o.b.div(Wt())),ra=Object(o.b)(l.u)(zt()),ia=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.onShowFileDialog,o=(e.dropAction,e.post),l=(e.posts,e.filter,e.commentId),s=void 0===l?null:l,m=e.parentId,d=void 0===m?null:m,f=e.commentActions,b=e.userMention,h=void 0===b?null:b,g=e.handleClearUserMention,v=void 0===g?null:g,E=e.innerRef,x=void 0===E?null:E,w=e.workspace,_=e.isMember,S=e.disableOptions,y=e.mainInput,j=e.wip,T=(Object(p.g)(),Object(u.c)()),N={picker:Object(r.useRef)(),postInput:Object(r.useRef)(null),inputRef:Object(r.useRef)(null)},k=Object(r.useState)(!1),R=Object(c.a)(k,2),P=R[0],A=R[1],C=Object(r.useState)(null),I=Object(c.a)(C,2),L=I[0],M=I[1],D=Object(r.useState)(null),q=Object(c.a)(D,2),F=q[0],U=q[1],H=Object(r.useState)(!1),z=Object(c.a)(H,2),W=z[0],B=z[1],Y=Object(r.useState)(!1),V=Object(c.a)(Y,2),G=(V[0],V[1]),Q=Object(r.useState)("default"),K=Object(c.a)(Q,2),J=K[0],X=K[1],Z=Object(r.useState)(null),$=Object(c.a)(Z,2),ee=$[0],ne=$[1],te=Object(r.useState)("#cacaca"),ae=Object(c.a)(te,2),re=ae[0],ie=ae[1],ce=Object(r.useState)(null),le=Object(c.a)(ce,2),se=le[0],me=le[1],de=Object(u.d)((function(e){return e.session.user})),ue=Object(u.d)((function(e){return e.wip.editWIPComment})),pe=(Object(u.d)((function(e){return e.users.users})),function(){A(!P)}),fe=Object(O.fb)(),be=Object(O.kb)()._t,he={unarchiveThisWorkspace:be("WORKSPACE.WORKSPACE_UNARCHIVE","Un-archive this workspace"),unarchiveWorkspace:be("HEADER.UNARCHIVE_WORKSPACE","Un-archive workspace"),cancel:be("BUTTON.CANCEL","Cancel"),unarchiveBodyText:be("TEXT.UNARCHIVE_CONFIRMATION","Are you sure you want to un-archive this workspace?"),workspaceIsUnarchived:be("TOASTER.WORKSPACE_IS_UNARCHIVED","workpace is un-archived"),thisIsAnArchivedWorkspace:be("FOOTER.THIS_IS_AN_ARCHIVED_WORKSPACE","This is an archived workpace"),noReplyAllowed:be("FOOTER.NO_REPLY_ALLOWED","No reply allowed"),attachFiles:be("TOOLTIP.ATTACH_FILES","Attach files"),youAreViewing:be("FOOTER.YOU_ARE_VIEWING","You are viewing"),joinWorkspace:be("BUTTON.JOIN_WORKSPACE","Join workspace"),lockedLabel:be("CHAT.INFO_PRIVATE_WORKSPACE","You are in a private workspace."),requestChange:be("POST.REQUEST_CHANGE","Request for change"),accept:be("POST.ACCEPT","Accept"),requestApprovalFrom:be("POST.REQUEST_APPROVAL_FROM","Request approval from"),requestChangeTo:be("POST.REQUEST_CHANGE_TO","Request change to"),addressedTo:be("POST.ADDRESSED_TO","Addressed to"),selectApprover:be("TOOLTIP.SELECT_APPROVER","Select approver"),emoji:be("TOOLTIP.EMOJI","Emoji"),images:be("TOOLTIP.IMAGES","Images"),sharedWithAdditionalPeople:be("POST.INFO_SHARED_WITH_PEOPLE","Your comment is published in secured workspace(s) & shared with additional people"),sharedWithPublicWs:be("POST.INFO_SHARED_WITH_PUBLIC_WS","Your comment is published in secured workspace(s) & public workspace(s)"),creatorClosedPost:be("POST.CREATOR_CLOSED_POST","The creator closed this post for commenting"),reopen:be("POST.REOPEN","Reopen"),agree:be("POST.AGREE","Agree"),disagree:be("POST.DISAGREE","Disagree"),overview:be("POST.OVERVIEW","Overview"),archivePostOpenNext:be("POST.ARCHIVE_POST_OPEN_NEXT","Archive Post & open next"),userClosedPost:be("POST.USER_CLOSED_POST","::username:: has closed this message",{username:o&&"object"===typeof o.post_close&&o.post_close.initiator?o.post_close.initiator.name:""})},ge=function(){var e={id:w.channel.id,is_archived:!1,is_muted:!1,is_pinned:!1,push_unarchived:1};T(Object(St.wb)(e)),fe.success(i.a.createElement("span",null,i.a.createElement("b",null,w.name," ",he.workspaceIsUnarchived,".")))};return i.a.createElement(Zt,{className:"post-detail-footer card-body ".concat(t)},S&&i.a.createElement(aa,null,i.a.createElement(ra,{icon:"archive"}),i.a.createElement("h4",null,he.thisIsAnArchivedWorkspace),i.a.createElement("button",{className:"btn btn-primary",onClick:function(){var e={type:"confirmation",cancelText:he.cancel,headerText:he.unarchiveWorkspace,submitText:he.unarchiveWorkspace,bodyText:he.unarchiveBodyText,actions:{onSubmit:ge}};T(Object(oe.a)(e))}},he.unarchiveWorkspace)),i.a.createElement(na,{className:"d-flex pr-2 pl-2"},i.a.createElement(Ht,{commentActions:f,commentId:ue&&o&&ue.proposal_id===j.id&&ue.quote?ue.quote.id:s,editWIPComment:ue,mainInput:y})),i.a.createElement(i.a.Fragment,null,i.a.createElement(na,{className:"d-flex align-items-end",backgroundSend:ee,cursor:J,fillSend:re},i.a.createElement($t,{ref:x,className:"flex-grow-1 chat-input-footer"},i.a.createElement(Pt,{onActive:function(e){var n;G(e),ne((n=e&&!se?["#7a1b8b","pointer","#fff"]:["","default","#cacaca"])[0]),X(n[1]),ie(n[2])},wip:j,parentId:d,commentId:s,mainInput:y,selectedGif:F,onClearGif:function(){U(null)},selectedEmoji:L,onClearEmoji:function(){M(null)},handleClearSent:function(){B(!1)},sent:W,ref:N.inputRef,imageLoading:se,setImageLoading:me,userMention:h,handleClearUserMention:v}),i.a.createElement(Mt,{parentId:d,handleQuillImage:function(){if(N.inputRef){var e=N.inputRef.current.parentNode.querySelector("button.ql-image");e&&e.click()}},handleShowEmojiPicker:pe,onShowFileDialog:a,mainInput:y,imageLoading:se,setImageLoading:me})),i.a.createElement(rt.a,{arrowSize:5,distance:10,onToggle:function(){document.querySelectorAll("span.react-tooltip-lite").forEach((function(e){e.parentElement.classList.toggle("tooltip-active")}))},content:"Send"},i.a.createElement(ea,{onClick:function(){B(!0)},icon:"send"})),!0===P&&i.a.createElement(ta,{handleShowEmojiPicker:pe,onSelectEmoji:function(e){M(e)},onSelectGif:function(e){U(e),pe()},orientation:"top",ref:N.picker}))),!1===_&&null!==w&&!S&&i.a.createElement(na,{className:"channel-viewing"},i.a.createElement("div",{className:"channel-name"},he.youAreViewing," #",w.name),i.a.createElement("div",{className:"channel-action"},i.a.createElement("button",{onClick:function(){T(Object(_t.T)({channel_id:w.channel.id,recipient_ids:[de.id]},(function(e,n){})))}},he.joinWorkspace))))})),oa=t(87),ca=t(92),la=t(53);function sa(){var e=Object(a.a)(["\n  cursor: pointer;\n"]);return sa=function(){return e},e}function ma(){var e=Object(a.a)(["\n  width: 16px;\n"]);return ma=function(){return e},e}function da(){var e=Object(a.a)(["\n  .profile-slider {\n    left: 0 !important;\n    right: unset !important;\n    bottom: 30px !important;\n    top: unset !important;\n  }\n  /* slide enter */\n  .slide-enter,\n  .slide-appear {\n    opacity: 0;\n    transform: scale(0.97) translateY(50px);\n    z-index: 1;\n  }\n  .slide-enter.slide-enter-active,\n  .slide-appear.slide-appear-active {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n    transition: opacity 300ms linear 100ms, transform 300ms ease-in-out 100ms;\n  }\n\n  /* slide exit */\n  .slide-exit {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n  .slide-exit.slide-exit-active {\n    opacity: 0;\n    transform: scale(0.97) translateY(50px);\n    transition: opacity 150ms linear, transform 150ms ease-out;\n  }\n  .slide-exit-done {\n    opacity: 0;\n  }\n"]);return da=function(){return e},e}var ua=o.b.div(da()),pa=Object(o.b)(l.u)(ma()),fa=o.b.span(sa()),ba=function(e){var n=e.comment,t=e.dictionary,a=e.wip,r=e.handleShowInput,o=Object(O.ub)(),c=Object(u.d)((function(e){return e.users.users})),s=Object.values(c).filter((function(e){return n.clap_user_ids.some((function(n){return n===e.id}))})),m=function(){return a.post_reads?a.post_reads.filter((function(e){return e.last_read_timestamp>=n.updated_at.timestamp})):[]};return i.a.createElement(ua,{className:"d-flex align-items-center justify-content-start"},i.a.createElement("div",{className:"clap-count-wrapper"},i.a.createElement(pa,{className:n.user_clap_count?"mr-2 comment-reaction clap-true":"mr-2 comment-reaction clap-false",icon:"thumbs-up",onClick:function(){var e={id:n.id,reaction:"clap",counter:0===n.user_clap_count?1:0,proposal_id:n.proposal_id,parent_id:n.parent_id};o.react(e),0===n.user_clap_count?o.like(e):o.unlike(e)}}),n.clap_count,0!==s.length&&i.a.createElement("span",{className:"hover read-users-container"},s.map((function(e){return i.a.createElement("span",{key:e.id},i.a.createElement(l.a,{className:"mr-2",key:e.id,name:e.name,imageLink:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link,id:e.id})," ",i.a.createElement("span",{className:"name"},e.name))})))),i.a.createElement(fa,{className:"ml-3",onClick:r},t.comment),i.a.createElement("div",{className:"user-reads-container"},i.a.createElement("span",{className:"no-readers"},i.a.createElement(pa,{className:"ml-2 mr-2 seen-indicator",icon:"eye"}),m().length),i.a.createElement(gt.a,{users:m()})))};function ha(){var e=Object(a.a)(["\n  width: 95%;\n"]);return ha=function(){return e},e}var ga=o.b.ul(ha()),va=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.comments,r=e.wip,o=e.parentId,c=(e.user,e.onShowFileDialog),l=(e.dropAction,e.parentShowInput,e.workspace,e.isMember,e.dictionary);e.disableOptions;return Object.values(a).length>0&&i.a.createElement(ga,{className:"sub-comments ".concat(t)},Object.values(a).map((function(e){return i.a.createElement(Aa,{key:e.id,type:"sub",comment:e,wip:r,dictionary:l,parentId:o,onShowFileDialog:c})})))})),Oa=function(e){var n=e.commentActions,t=e.onMentionUser,a=e.onQuote,r=e.dictionary,o=e.scrollRef,c=e.comment,l=e.user;return i.a.createElement(_e.c,{scrollRef:o,moreButton:"more-horizontal"},l.id===c.author.id&&i.a.createElement("div",{onClick:function(){n.editComment(c)}},r.editReply),i.a.createElement("div",{onClick:a},r.quote),l.id!==c.author.id&&i.a.createElement("div",{onClick:t},r.mentionUser),l.id===c.author.id&&i.a.createElement("div",{onClick:function(){n.removeComment(c)}},r.removeReply),l.id===c.author.id&&i.a.createElement("div",{onClick:function(){n.important(c)}},c.is_important?r.unMarkImportant:r.markImportant))};function Ea(){var e=Object(a.a)(["\n  h6 {\n    margin: 0;\n  }\n  .text-muted {\n    font-size: 0.75rem;\n  }\n  .file-attachments {\n    margin-top: 1rem;\n  }\n"]);return Ea=function(){return e},e}function xa(){var e=Object(a.a)(["\n  &.ql-editor {\n    padding: 0;\n  }\n  img {\n    max-width: 50%;\n    @media (max-width: 991.99px) {\n      max-width: 100%;\n    }\n  }\n  ul {\n    li {\n      list-style: initial;\n    }\n  }\n"]);return xa=function(){return e},e}function wa(){var e=Object(a.a)(["\n  .more-options {\n    margin-left: auto;\n    width: 28px;\n    height: 28px;\n    padding: 6px 0 0 5px;\n    svg {\n      width: 1rem;\n      height: 1rem;\n    }\n  }\n"]);return wa=function(){return e},e}function _a(){var e=Object(a.a)(["\n  img {\n    border-radius: 6px;\n    max-height: 250px;\n  }\n  .comment-reaction {\n    cursor: pointer;\n  }\n  .clap-true {\n    color: #7a1b8b;\n    fill: #7a1b8b;\n  }\n"]);return _a=function(){return e},e}function Sa(){var e=Object(a.a)(["\n  overflow: initial;\n  z-index: 10;\n"]);return Sa=function(){return e},e}function ya(){var e=Object(a.a)(['\n  margin-bottom: 1rem;\n  overflow: initial;\n\n  &.important {\n    background: #6a5acd !important;\n    color: #fff;\n    .text-muted {\n      color: #fffafa !important;\n    }\n  }\n\n  .mention {\n    font-weight: bold;\n    color: #7a1b8b;\n    &[data-value="All"],\n    &[data-id="','"] {\n      font-weight: normal;\n      box-shadow: none;\n      padding: 0 4px;\n      border-radius: 8px;\n      text-decoration: underline;\n      display: inline-block;\n      width: auto;\n      height: auto;\n    }\n  }\n\n  .quote {\n    margin: 0 auto 0.5rem;\n    width: 95%;\n    position: relative;\n    padding: 0 1rem;\n    color: #868686;\n    border-left: 4px solid #972c86;\n\n    > * {\n      margin-bottom: 0;\n    }\n  }\n\n  .quote-author {\n    margin-top: 1rem;\n    margin-left: 2.5%;\n    margin-bottom: 0.5rem;\n  }\n\n  .files {\n    margin-bottom: 1rem;\n\n    li {\n      display: inline-block;\n\n      &:not(:last-child) {\n        margin-right: 1rem;\n      }\n\n      .feather-paperclip {\n        margin-right: 0.5rem;\n      }\n    }\n  }\n\n  .clap-count-wrapper {\n    position: relative;\n\n    &:hover {\n      .read-users-container {\n        opacity: 1;\n        max-height: 300px;\n      }\n    }\n\n    .read-users-container {\n      position: absolute;\n      left: 0;\n      z-index: 1;\n      bottom: 20px;\n      border-radius: 8px;\n      opacity: 0;\n      max-height: 0;\n      transition: all 0.5s ease;\n      overflow-y: auto;\n      background: #fff;\n      border: 1px solid #fff;\n      box-shadow: 0 5px 10px -1px rgba(0, 0, 0, 0.15);\n\n      &:hover {\n        max-height: 300px;\n        opacity: 1;\n      }\n\n      .dark & {\n        border: 1px solid #25282c;\n        background: #25282c;\n      }\n\n      > span {\n        padding: 0.25rem 0.5rem 0.25rem 0.25rem;\n        display: flex;\n        justify-content: flex-start;\n        align-items: start;\n\n        .avatar {\n          min-width: 1.5rem;\n          max-width: 1.5rem;\n          width: 1.5rem;\n          height: 1.5rem;\n        }\n        .name {\n          display: block;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n        }\n      }\n    }\n  }\n']);return ya=function(){return e},e}var ja=o.b.li(ya(),(function(e){return e.userId})),Ta=o.b.li(Sa()),Na=o.b.div(_a()),ka=o.b.div(wa()),Ra=o.b.div(xa()),Pa=o.b.div(Ea()),Aa=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.comment,o=e.wip,s=e.type,m=void 0===s?"main":s,d=e.parentId,f=e.onShowFileDialog,b=e.dropAction,h=e.parentShowInput,g=void 0===h?null:h,v=e.workspace,E=e.isMember,x=e.dictionary,w=e.disableOptions,_=Object(u.c)(),S=Object(p.g)(),y={input:Object(r.useRef)(null),body:Object(r.useRef)(null),main:Object(r.useRef)(null),content:Object(r.useRef)(null)},j=Object(O.ub)(),T=Object(O.u)(),N=T.fileBlobs,k=T.actions.setFileSrc,R=Object(u.d)((function(e){return e.session.user})),P=Object(r.useState)(null),A=Object(c.a)(P,2),C=A[0],I=A[1],L=Object(r.useState)(null),M=Object(c.a)(L,2),D=M[0],q=M[1],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;g?g(e):I("number"!==typeof e?a.id:e),U()},U=function(){null!==C&&null!==y.input.current&&(y.input.current.querySelector(".ql-editor").scrollIntoView({behavior:"smooth",block:"center",inline:"start"}),y.input.current.querySelector(".ql-editor").focus())},H=Object(O.eb)().fromNow,z=function(e){var n=null;e.target.dataset.id&&(n=e.target.dataset.id),n&&_(Object(tt.ec)({file_id:parseInt(n),files:a.files}))};Object(r.useEffect)((function(){y.content.current&&y.content.current.querySelectorAll("img").forEach((function(e){var n=e.getAttribute("src");if(e.classList.contains("has-listener")){var t=a.files.find((function(e){return n.includes(e.code)}));t&&N[t.id]&&(e.setAttribute("src",N[t.id]),e.setAttribute("data-id",t.id))}else{e.addEventListener("click",z,!1),e.classList.add("has-listener");var r=a.files.find((function(e){return n.includes(e.code)}));r&&N[r.id]&&(e.setAttribute("src",N[r.id]),e.setAttribute("data-id",r.id))}}));var e=a.files.filter((function(e){return e.type.toLowerCase().includes("image")}));e.length&&e.forEach((function(e){!N[e.id]&&a.body.includes(e.code)&&la.sessionService.loadSession().then((function(n){var t=n.token;fetch(e.view_link,{method:"GET",keepalive:!0,headers:{Authorization:t,"Access-Control-Allow-Origin":"*",Connection:"keep-alive",crossorigin:!0}}).then((function(e){return e.blob()})).then((function(n){var t=URL.createObjectURL(n);k({id:e.id,src:t})})).catch((function(e){console.log(e,"error fetching image")}))}))}))}),[a.body,y.content,a.files]),Object(r.useEffect)((function(){U()}),[U]),Object(r.useEffect)((function(){return function(){S.push(S.location.pathname,null)}}),[]);var W=a.files.filter((function(e){return!a.body.includes(e.code)}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ja,{ref:y.main,isImportant:a.is_important,className:"comment card border fadeBottom ".concat(t," animated ").concat(a.is_important&&"important"),userId:R.id},null!==a.todo_reminder&&i.a.createElement(l.r,{todoReminder:a.todo_reminder,type:"POST_COMMENT"}),a.quote&&i.a.createElement(ca.d,{quote:a.quote,dictionary:x}),i.a.createElement(Na,{ref:y.body,className:"card-body",type:m},i.a.createElement(ka,{className:"d-flex"},i.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},i.a.createElement(l.a,{className:"mr-2",id:a.author.id,name:a.author.name,imageLink:a.author.profile_image_thumbnail_link?a.author.profile_image_thumbnail_link:a.author.profile_image_link,showSlider:!0}),i.a.createElement("span",null,a.author.first_name),i.a.createElement("span",{className:"text-muted ml-1"},H(a.created_at.timestamp)),o.last_visited_at&&a.updated_at.timestamp>o.last_visited_at.timestamp&&R.id!==a.author.id&&i.a.createElement("div",{className:"ml-2 badge badge-secondary text-white text-9"},x.new)),!w&&i.a.createElement(Oa,{commentActions:j,onMentionUser:function(){q('<p class="mention-data"><span class="mention" data-index="0" data-denotation-char="@" data-id="'.concat(a.author.id,'" data-value="').concat(a.author.name,'">\n        <span contenteditable="false"><span class="ql-mention-denotation-char">@</span>').concat(a.author.name,"</span></span></p> ")),I(!0)},onQuote:function(){g?g(a.id):(I(a.id),U()),j.addQuote(a)},dictionary:x,scrollRef:y.body.current,comment:a,user:R})),a.files.length>0&&i.a.createElement(oa.q,{files:a.files}),i.a.createElement(Ra,{ref:y.content,className:"mt-2 mb-3 ql-editor",dangerouslySetInnerHTML:{__html:nt.a.parseEmoji(a.body)}}),W.length>=1&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement("h6",null,x.files),i.a.createElement(l.i,{attachedFiles:W,type:"comment",comment:a})),a.files_trashed&&a.files_trashed.length>=1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Pa,null,i.a.createElement("h6",{className:"font-size-11 text-uppercase"},x.files),i.a.createElement("span",{className:"text-muted"},x.filesAutomaticallyRemoved),i.a.createElement(l.i,{attachedFiles:a.files_trashed,type:"comment",comment:a}))),i.a.createElement(ba,{comment:a,dictionary:x,disableOptions:w,wip:o,handleShowInput:F}))),"main"===m&&Object.values(a.replies).length>0&&i.a.createElement(va,{parentShowInput:F,comments:a.replies,wip:o,user:R,commentActions:j,parentId:"main"===m?a.id:d,onShowFileDialog:f,dropAction:b,workspace:v,isMember:E,dictionary:x,disableOptions:w}),null!==C&&i.a.createElement(Ta,{className:"card"},i.a.createElement(ia,{wip:o,parentId:"main"===m?a.id:d,onShowFileDialog:f,commentId:C,userMention:D,handleClearUserMention:function(){q(null)}})))}));function Ca(){var e=Object(a.a)(["\n  ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    margin-left: auto;\n  }\n  > ul {\n    width: 100%;\n  }\n"]);return Ca=function(){return e},e}var Ia=o.b.div(Ca()),La=i.a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.item,r=e.comments,o=e.onShowFileDialog,c=(e.dropAction,e.isMember,e.disableOptions,Object(O.kb)()._t),l={createNewPost:c("POST.CREATE_NEW_POST","Create new post"),all:c("POST.ALL","All"),inbox:c("POST.INBOX","Inbox"),newReply:c("POST.NEW_REPLY","New reply"),myPosts:c("POST.MY_POSTS","My sent posts"),starred:c("POST.STARRED","Starred"),archived:c("POST.ARCHIVED","Archived"),draft:c("POST.DRAFT","Draft"),drafts:c("POST.DRAFTS","Drafts"),category:c("POST.CATEGORY","Category"),replyRequired:c("POST.REPLY_REQUIRED","Reply required"),mustRead:c("POST.MUST_READ","Must read"),noReplies:c("POST.NO_REPLIES","No replies"),sortBy:c("POST.SORT_BY","Sort by"),starredFavorite:c("POST.STARRED_FAVORITE","Starred / Favorite"),recent:c("POST.RECENT","Recent"),unread:c("POST.UNREAD","Unread"),searchPost:c("POST.SEARCH_POST","Search by post title, content, or comment"),markAsRead:c("POST.MARK_AS_READ","Mark as read"),markAsUnread:c("POST.MARK_AS_UNREAD","Mark as unread"),share:c("POST.SHARE","Share"),snooze:c("POST.SNOOZE","Snooze"),follow:c("POST.FOLLOW","Follow"),unFollow:c("POST.UNFOLLOW","Unfollow"),files:c("POST.FILES","Files"),comment:c("POST.COMMENT","Comment"),editPost:c("POST.EDIT_POST","Edit post"),editReply:c("POST.EDIT_REPLY","Edit reply"),removeReply:c("POST.REMOVE_REPLY","Remove reply"),quote:c("POST.QUOTE","Quote"),mentionUser:c("POST.MENTION_USER","Mention user"),remindMeAboutThis:c("TODO.REMIND_ABOUT_THIS","Remind about this"),searchResult:c("POST.SEARCH_RESULT","Search Result:"),searchResults:c("POST.SEARCH_RESULTS","Search Results:"),searchNoResult:c("POST.NO_SEARCH_RESULT","No result found:"),private:c("POST.PRIVATE","Private"),by:c("POST.BY","by"),star:c("POST.STAR","Mark with star"),unStar:c("POST.UNSTAR","Unmark star"),alreadyReadThis:c("POST.ALREADY_READ_THIS","I've read this"),me:c("POST.LOGGED_USER_RESPONSIBLE","me"),quotedCommentFrom:c("POST.QUOTED_COMMENT_FROM","Quoted comment from"),showMore:c("SHOW_MORE","Show more"),showLess:c("SHOW_LESS","Show less"),markAll:c("POST.MARK_ALL_AS_READ","Mark all as read"),archiveAll:c("POST.ARCHIVE_ALL","Archive all"),noComment:c("POST.NO_COMMENT","no comment"),oneComment:c("POST.ONE_COMMENT","1 comment"),comments:c("POST.NUMBER_COMMENTS","::comment_count:: comments"),messageInSecureWs:c("POST.MESSAGE_IN_SECURE_WORKSPACE","message in a secure workspace"),markImportant:c("CHAT.MARK_IMPORTANT","Mark as important"),unMarkImportant:c("CHAT.UNMARK_IMPORTANT","Unmark as important"),archive:c("POST.ARCHIVE","Archive"),requestChange:c("POST.REQUEST_CHANGE","Request for change"),accept:c("POST.ACCEPT","Accept"),hasAcceptedProposal:c("POST.HAS_ACCEPTED_PROPOSAL","has accepted the proposal."),hasRequestedChange:c("POST.HAS_REQUESTED_CHANGE","has requested a change."),actionNeeded:c("POST.ACTION_NEEDED","Action needed"),changeRequested:c("POST.CHANGE_REQUESTED","Change requested"),accepted:c("POST.ACCEPTED","Accepted"),requestForApproval:c("POST.REQUEST_FOR_APPROVAL","Request for approval"),closeThisPost:c("POST.CLOSE_THIS_POST","Close this post"),repliesClosed:c("POST.REPLIES_CLOSED","Replies closed"),openThisPost:c("POST.OPEN_THIS_POST","Open this post"),creatorClosedPost:c("POST.CREATOR_CLOSED_POST","The creator/internal closed this post for commenting"),reopen:c("POST.REOPEN","Reopen"),closed:c("POST.CLOSED","Closed"),createNewList:c("POST.CREATE_NEW_LIST","New List"),addToList:c("POST.ADD_TO_LIST","Add to list"),removeToList:c("POST.REMOVE_TO_LIST","Remove to list"),allOthers:c("POST.ALL_OTHERS","All others"),sharedClientBadge:c("POST.BADGE_SHARED_CLIENT","The client can see this post"),notSharedClientBadge:c("POST.BADGE_NOT_SHARED_CLIENT","This post is private to our team"),selectAll:c("BUTTON.SELECT_ALL","Select all"),remove:c("BUTTON.REMOVE","Remove"),fileAutomaticallyRemoved:c("FILE.FILE_AUTOMATICALLY_REMOVED_LABEL","File automatically removed by owner request"),filesAutomaticallyRemoved:c("FILE.FILES_AUTOMATICALLY_REMOVED_LABEL","Files automatically removed by owner request"),errorLoadingPost:c("TOASTER.ERROR_LOADING_POST","Error loading post"),teamLabel:c("TEAM","Team"),new:c("POST.NEW","New")};return i.a.createElement(Ia,{className:"post-comments card-body ".concat(t)},r&&i.a.createElement("ul",null,Object.values(r).map((function(e){return i.a.createElement(Aa,{key:e.id,comment:e,wip:a,dictionary:l,parentId:null,onShowFileDialog:o})}))))}));function Ma(){var e=Object(a.a)(["\n  display: flex;\n  flex-grow: 1;\n  width: 100%;\n  flex-flow: column;\n\n  .receiver {\n    border-radius: 6px;\n    padding: 3px 5px;\n    background-color: rgba(210, 210, 210, 0.2);\n    font-size: 11px;\n    margin-right: 3px;\n    cursor: pointer;\n  }\n\n  a {\n    color: #7a1b8b;\n    text-decoration: underline;\n\n    .dark & {\n      color: #7a1b8b !important;\n    }\n  }\n\n  .clap-count-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n\n    &:hover {\n      .not-read-users-container,\n      .read-users-container {\n        opacity: 1;\n        max-height: 300px;\n      }\n    }\n    .not-read-users-container,\n    .read-users-container {\n      position: absolute;\n      left: 22px;\n      z-index: 1;\n      bottom: 0;\n      border-radius: 8px;\n      opacity: 0;\n      max-height: 0;\n      transition: all 0.5s ease;\n      overflow-y: auto;\n      border: 1px solid #fff;\n      box-shadow: 0 5px 10px -1px rgba(0, 0, 0, 0.15);\n      background: #fff;\n\n      &:hover {\n        max-height: 300px;\n        opacity: 1;\n      }\n\n      .dark & {\n        border: 1px solid #25282c;\n        background: #25282c;\n      }\n\n      > span {\n        padding: 0.25rem 0.5rem 0.25rem 0.25rem;\n        display: flex;\n        justify-content: flex-start;\n\n        .name {\n          display: block;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n        }\n      }\n    }\n  }\n\n  .user-reads-container {\n    position: relative;\n    display: inline-flex;\n    margin-right: 0.5rem;\n\n    .not-read-users-container,\n    .read-users-container {\n      transition: all 0.5s ease;\n      position: absolute;\n      right: 0;\n      bottom: 30px;\n      border: 1px solid #dee2e6;\n      border-radius: 6px;\n      background-color: #fff;\n      overflow: auto;\n      opacity: 0;\n      max-height: 0;\n\n      &:hover {\n        opacity: 1;\n        max-height: 175px;\n      }\n\n      .dark & {\n        background-color: #25282c;\n        border: 1px solid #25282c;\n      }\n\n      > span {\n        padding: 0.5rem;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n\n        .avatar {\n          img {\n            min-width: 2.3rem;\n          }\n        }\n\n        .name {\n          width: 100%;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: block;\n        }\n      }\n    }\n  }\n\n  .user-reads-container {\n    span.not-readers:hover ~ span.not-read-users-container,\n    span.no-readers:hover ~ span.read-users-container {\n      opacity: 1;\n      max-height: 175px;\n    }\n  }\n"]);return Ma=function(){return e},e}function Da(){var e=Object(a.a)(["\n  width: 16px;\n\n  &.close {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n  }\n"]);return Da=function(){return e},e}function qa(){var e=Object(a.a)(["\n  .feather-eye-off {\n    position: relative;\n    top: -1px;\n    margin-right: 0.25rem;\n    width: 12px;\n  }\n  min-height: 70px;\n  > div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  ul {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: 0;\n    padding: 0;\n    li {\n      list-style: none;\n      .post-title {\n        width: 100%;\n      }\n    }\n  }\n\n  .company-post-detail-header {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n  }\n  .close {\n    .dark & {\n      color: #fff;\n    }\n  }\n\n  .author-name {\n    color: #a7abc3;\n    font-size: 14px;\n  }\n  .deadline-label {\n    border-radius: 6px;\n    padding: 3px 5px;\n    background-color: hsla(0, 0%, 82.4%, 0.2);\n    font-size: 12px;\n    margin-right: 3px;\n    display: flex;\n    align-items: center;\n    font-weight: normal;\n    svg {\n      width: 12px;\n      height: 12px;\n    }\n  }\n"]);return qa=function(){return e},e}function Fa(){var e=Object(a.a)(["\n  min-height: 240px;\n  .card-body {\n    padding: 1rem 1.5rem;\n  }\n"]);return Fa=function(){return e},e}function Ua(){var e=Object(a.a)(["\n  min-height: auto;\n  overflow: visible !important;\n  height: auto !important;\n  .more-options {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 8px;\n    height: 36px;\n    width: 40px;\n    align-items: center;\n    justify-content: center;\n    .feather-more-horizontal {\n      width: 25px;\n      height: 24px;\n    }\n    .more-options-tooltip {\n      left: auto;\n      right: 0;\n      top: 40px;\n      width: 250px;\n\n      svg {\n        width: 14px;\n      }\n    }\n  }\n"]);return Ua=function(){return e},e}var Ha=o.b.div(Ua()),za=o.b.div(Fa()),Wa=o.b.div(qa()),Ba=Object(o.b)(l.u)(Da()),Ya=o.b.div(Ma()),Va=function(e){var n=e.item,a={dropZoneRef:Object(r.useRef)(null)},o=Object(u.c)(),l=Object(O.tb)(),s=Object(O.wb)().comments,m=Object(u.d)((function(e){return e.session.user})),d=Object(u.d)((function(e){return e.workspaces.activeTopic})),p=Object(r.useState)(!1),f=Object(c.a)(p,2),b=f[0],h=f[1],g=function(e){o(Object(I.T)(e)),a.dropZoneRef.current&&a.dropZoneRef.current.open()},v=function(){h(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ha,{className:"card card-body app-content-body mb-4"},i.a.createElement(za,{className:"fadeBottom"},i.a.createElement(Wa,{className:"card-header d-flex justify-content-between"},i.a.createElement("div",{className:"d-flex flex-column align-items-start"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",null,i.a.createElement(Ba,{className:"close mr-2",icon:"arrow-left",width:"24",height:"24",onClick:function(){l.goBack()}})),i.a.createElement("div",null,i.a.createElement("h5",{className:"post-title mb-0"},i.a.createElement("span",null,n.title)),i.a.createElement("span",{className:"d-flex"},i.a.createElement("span",{className:"badge ".concat("medium"===n.priority?"badge-warning":"high"===n.priority?"badge-danger":"badge-twitter")},n.priority),i.a.createElement("span",{className:"deadline-label ml-2"},i.a.createElement(Ba,{className:"mr-2",icon:"calendar"}),Re()(n.deadline.timestamp,"X").format("DD-MM-YYYY")))))),i.a.createElement("div",null,n.author.id===m.id&&i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",{"data-toggle":"modal",onClick:function(){l.showModal("edit",n)}},i.a.createElement("a",{className:"btn btn-outline-light ml-2",title:"","data-toggle":"tooltip","data-original-title":"Edit WIP"},i.a.createElement(Ba,{icon:"edit-3"})))),i.a.createElement("li",null,i.a.createElement("span",{"data-toggle":"modal",onClick:function(){l.trashWIP(n)}},i.a.createElement("a",{className:"btn btn-outline-light ml-2","data-toggle":"tooltip",title:"","data-original-title":"Delete WIP"},i.a.createElement(Ba,{icon:"trash"})))),i.a.createElement("li",null,i.a.createElement(_n,{wip:n}))))),i.a.createElement(Ya,null,i.a.createElement(ht,{item:n}),i.a.createElement("hr",{className:"m-0"}),i.a.createElement(wt,{item:n}),i.a.createElement(La,{item:n,comments:s,onShowFileDialog:g}),i.a.createElement(ia,{wip:n,mainInput:!0,onShowFileDialog:g}),i.a.createElement(Le.a,{hide:!b,ref:a.dropZoneRef,onDragLeave:v,onDrop:function(e){!function(e){var a=[];e.forEach((function(e){var n=new FormData;n.append("file",e);var r=t(61).generate();"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/webp"===e.type?a.push(Object(A.a)(Object(A.a)({},e),{},{type:"IMAGE",id:r,status:!1,src:URL.createObjectURL(e),bodyFormData:n,name:e.name?e.name:e.path})):"video/mp4"===e.type?a.push(Object(A.a)(Object(A.a)({},e),{},{type:"VIDEO",id:r,status:!1,src:URL.createObjectURL(e),bodyFormData:n,name:e.name?e.name:e.path})):a.push(Object(A.a)(Object(A.a)({},e),{},{type:"DOC",id:r,status:!1,src:"#",bodyFormData:n,name:e.name?e.name:e.path}))})),v();var r={type:"file_upload",droppedFiles:a,mode:"wip",wip:n,members:d?d.members:[]};o(Object(oe.a)(r))}(e.acceptedFiles)},onCancel:v})))),i.a.createElement("div",{className:"mt-3 post-btm"},"\xa0"))};function Ga(){var e=Object(a.a)(["\n  height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n  text-align: left;\n\n  .app-lists {\n    overflow: visible !important;\n  }\n\n  .app-block {\n    overflow: ",";\n  }\n\n  .search-title {\n    margin: 1.5rem 1.5rem 0;\n  }\n\n  .app-content-body {\n    position: relative;\n    overflow: visible !important;\n    height: auto !important;\n    min-height: auto;\n\n    .app-lists {\n      overflow: auto;\n      &::-webkit-scrollbar {\n        display: none;\n      }\n      -ms-overflow-style: none;\n      scrollbar-width: none;\n    }\n  }\n  .app-content-body.gallery-page {\n    overflow: hidden !important;\n  }\n\n  .all-action-button {\n    background: none;\n    color: #828282;\n    padding: 10px 5px 5px 5px;\n    font-weight: 500;\n    .dark & {\n      color: rgba(255, 255, 255, 0.5);\n    }\n  }\n  .unset-flex {\n    flex: unset !important;\n  }\n  .other-posts-header {\n    background-color: #fafafa !important;\n    .dark & {\n      background-color: hsla(0, 0%, 100%, 0.0784313725490196) !important;\n    }\n  }\n"]);return Ga=function(){return e},e}var Qa=o.b.div(Ga(),(function(e){return e.showGallery?"calc(100vh - 90px)":"100%"}),(function(e){return e.showGallery?"hidden":"inherit"}));n.default=function(){var e=Object(O.sb)(),n=e.wip,t=e.wips,a=e.showGallery;return i.a.createElement(Qa,{className:"container-fluid fadeIn",showGallery:a},i.a.createElement("div",{className:"row app-block"},a&&n&&i.a.createElement(xe,{item:n}),a&&!n&&i.a.createElement(wn,null),!a&&i.a.createElement(S,null),i.a.createElement("div",{className:"col-md-9 app-content"},i.a.createElement("div",{className:"app-content-overlay"}),a&&n&&i.a.createElement(ln,{item:n}),a&&!n&&i.a.createElement(gn,null),!n&&!a&&i.a.createElement(P,null),!n&&!a&&i.a.createElement(et,{wips:t}),n&&!a&&i.a.createElement(Va,{item:n}))))}}}]);