(this["webpackJsonpzoom-testing-react"]=this["webpackJsonpzoom-testing-react"]||[]).push([[0],{21:function(e,t,o){e.exports=o(47)},26:function(e,t,o){},45:function(e,t,o){},47:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),r=o(9),i=o.n(r),s=(o(26),o(1)),c=o(13),m=o(5),l=function(){return{createMessage:function(e,t){var o=localStorage.getItem("userAuthToken"),n=JSON.parse(o),a="ZOOM_MESSAGE::".concat(JSON.stringify({message:'<div>I started a ZOOM meeting: <a class="zoom-link" href="https://demo24.drevv.com/zoom/meeting/'.concat(e,"/").concat(t.meetingNumber,'" rel="noopener noreferrer" target="_blank"><strong>Click here to join</strong></a></div>'),data:{passWord:t.passWord,meetingNumber:t.meetingNumber,role:0,host:!1}})),r={channel_id:parseInt(e),body:a,mention_ids:[],file_ids:[],reference_id:parseInt(e),reference_title:"".concat(n.user_auth.name," started a ZOOM meeting"),quote:null};fetch("https://demo24.driff.network/api/v2/post-channel-messages",{method:"POST",keepalive:!0,headers:{Authorization:"Bearer ".concat(n.access_token),"Access-Control-Allow-Origin":"*",Connection:"keep-alive",crossorigin:!0,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})}}};m.ZoomMtg.setZoomJSLib("https://source.zoom.us/1.9.8/lib","/av"),m.ZoomMtg.preLoadWasm(),m.ZoomMtg.prepareWebSDK();var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!1===t.encode?Object.entries(e).map((function(e){var t=Object(c.a)(e,2),o=t[0],n=t[1];return"".concat(o,"=").concat(n)})).join("&"):Object.entries(e).map((function(e){var t=Object(c.a)(e,2),o=t[0],n=t[1];return"".concat(o,"=").concat(encodeURIComponent(n))})).join("&")},d=l(),g=function(){var e=Object(s.g)(),t="YUeAn0WiQcadAL9hcWzA2g";function o(e,t){m.ZoomMtg.init({leaveUrl:"https://demo24.drevv.com/chat",isSupportAV:!0,isSupportChat:!1,success:function(o){m.ZoomMtg.join({meetingNumber:t.meetingNumber,userName:t.userName,signature:e,apiKey:t.apiKey,passWord:t.passWord,success:function(e){console.log(e),localStorage.setItem("zoomConfig",JSON.stringify({password:t.passWord,meetingNumber:t.meetingNumber,role:t.role,hasJoin:!0,host:t.host}))},error:function(e){console.log(e)}})}})}return Object(n.useEffect)((function(){var n=localStorage.getItem("userAuthToken"),a=localStorage.getItem("zoomConfig");if(n&&a&&e.channelId){var r=JSON.parse(a),i=JSON.parse(n);if(r.host&&!r.hasJoin&&void 0===e.meetingId){console.log("create");var s={channel_id:e.channelId};fetch("https://demo24.driff.network/api/zoom/meeting?".concat(u(s)),{method:"GET",keepalive:!0,headers:{Authorization:"Bearer ".concat(i.access_token),"Access-Control-Allow-Origin":"*",Connection:"keep-alive",crossorigin:!0}}).then((function(e){return e.json()})).then((function(n){var a={meetingNumber:n.zoom_data.data.id,role:r.role},s={password:n.zoom_data.data.password,meetingNumber:n.zoom_data.data.id,role:r.role};fetch("https://demo24.driff.network/api/zoom/signature?".concat(u(a)),{method:"GET",keepalive:!0,headers:{Authorization:"Bearer ".concat(i.access_token),"Access-Control-Allow-Origin":"*",Connection:"keep-alive",crossorigin:!0}}).then((function(e){return e.json()})).then((function(n){var a={apiKey:t,userName:i.user_auth.name,userEmail:i.user_auth.email,passWord:s.password,meetingNumber:s.meetingNumber,role:"1",host:!0};d.createMessage(e.channelId,a),o(n.signature,a)}))}))}else if(r&&r.password&&e.meetingId){console.log("join");var c={meetingNumber:r.meetingNumber,role:r.role};fetch("https://demo24.driff.network/api/zoom/signature?".concat(u(c)),{method:"GET",keepalive:!0,headers:{Authorization:"Bearer ".concat(i.access_token),"Access-Control-Allow-Origin":"*",Connection:"keep-alive",crossorigin:!0}}).then((function(e){return e.json()})).then((function(e){var n={apiKey:t,userName:i.user_auth.name,userEmail:i.user_auth.email,passWord:r.password,meetingNumber:r.meetingNumber,role:r.role,host:r.host};o(e.signature,n)}))}}}),[]),a.a.createElement("div",null,"Zoom")},h=function(){var e=l(),t=Object(s.g)();return Object(n.useEffect)((function(){e.createMessage(t.channelId)}),[]),a.a.createElement("div",null,"Test")};o(45);var p=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(s.d,null,a.a.createElement(s.b,{component:g,path:["/zoom/meeting/:channelId/:meetingId","/zoom/meeting/:channelId"]}),a.a.createElement(s.b,{component:h,path:"/zoom/test/:channelId"}),a.a.createElement(s.a,{from:"*",to:{pathname:"/zoom"}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=o(6);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f.a,null,a.a.createElement(p,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.d5d713d0.chunk.js.map