(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[19],{715:function(e,t,n){"use strict";n.r(t);var a,c,l,i,r,o,s,m,u,d,b,p,E,f,g,h,O,v,j,_,N,k,L=n(9),y=n(0),D=n.n(y),A=n(10),C=n(5),I=n(41),T=n(11),w=A.a.ul(a||(a=Object(L.a)(["\n  .list-group-item:last-child {\n    border-bottom-width: thin !important;\n  }\n  li {\n    cursor: pointer;\n  }\n  &.list-group .list-group-item.active {\n    border-color: #eeebee;\n    background-color: #fafafa !important;\n    .dark & {\n      background-color: #111417 !important;\n    }\n  }\n"]))),S=function(e){var t=Object(T.cb)()._t,n={automation:t("ADMIN.FILTER_AUTOMATION","Automation"),quickLinks:t("ADMIN.FILTER_QUICKLINKS","Quick links"),settings:t("ADMIN.FILTER_SETTINGS","Settings"),huddleBots:t("ADMIN.FILTER_HUDDLE","Huddle bots"),subscription:t("ADMIN.FILTER_SUBSCRIPTION","Subscription"),contact:t("ADMIN.FILTER_CONTACT","Contact"),support:t("ADMIN.FILTER_SUPPORT","Support desk")},a=Object(T.a)().setAdminFilter,c=Object(I.g)(),l=Object(C.d)((function(e){return e.admin.filters})),i=function(e){e.persist(),a({filter:"quick-links"===e.target.dataset.value?"quick_links":e.target.dataset.value}),c.push("/admin-settings/".concat(e.target.dataset.value)),document.body.classList.remove("mobile-modal-open")};return D.a.createElement(w,{className:"list-group list-group-flush"},D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.automation?"active":""),"data-value":"automation",onClick:i},n.automation),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.quick_links?"active":""),"data-value":"quick-links",onClick:i},n.quickLinks),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.settings?"active":""),"data-value":"settings",onClick:i},n.settings),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.bots?"active":""),"data-value":"bots",onClick:i},n.huddleBots),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.subscription?"active":""),"data-value":"subscription",onClick:i},n.subscription),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.contact?"active":""),"data-value":"contact",onClick:i},n.contact),D.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(l.support?"active":""),"data-value":"support",onClick:i},n.support))},x=A.a.div(c||(c=Object(L.a)(["\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n"]))),U=function(e){return D.a.createElement(x,{className:"col-md-3 app-sidebar bottom-modal-mobile"},D.a.createElement("div",{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),D.a.createElement("div",{className:"bottom-modal-mobile_inner"},D.a.createElement("div",{className:"app-sidebar-menu",tabIndex:"2"},D.a.createElement("div",{className:"post-filter-item list-group list-group-flush"},D.a.createElement("span",{className:"list-group-item d-flex align-items-center pr-3","data-value":"inbox"},D.a.createElement("h4",null,"Admin menu"))),D.a.createElement(S,null))))},B=n(8),M=n(1),q=n(6),F=n(75),R=n(54),H=A.a.div(l||(l=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n"]))),G=function(){var e=Object(T.cb)()._t,t=Object(T.X)(),n={loginSettings:e("ADMIN.LOGIN_SETTINGS","Login settings"),googleLogin:e("ADMIN.GOOGLE_LOGIN","Google login"),magicLink:e("ADMIN.MAGIC_LINK","Magic link"),signUp:e("ADMIN.SIGN_UP","Sign up"),passwordLogin:e("ADMIN.PASSWORD_LOGIN","Password login"),saveLogin:e("ADMIN.SAVE_LOGIN","Save login"),enable:e("LABEL.ENABLE","Enable"),disable:e("LABEL.DISABLE","Disable"),loginSettingsUpdated:e("TOAST.LOGIN_SETTINGS_SUCCESS","Login settings updated")},a=Object(y.useRef)(!0),c=Object(C.d)((function(e){return e.settings.user.GENERAL_SETTINGS})).dark_mode,l=Object(C.d)((function(e){return e.admin.login})),i=Object(C.d)((function(e){return e.admin.loginFetched})),r=Object(C.d)((function(e){return e.admin.filters})),o=Object(T.a)(),s=o.fetchLoginSettings,m=o.updateLoginSettings,u=o.setAdminFilter,d=Object(y.useState)(Object(M.a)({},l)),b=Object(q.a)(d,2),p=b[0],E=b[1],f=Object(y.useState)(!1),g=Object(q.a)(f,2),h=g[0],O=g[1];Object(y.useEffect)((function(){return u({filters:Object(M.a)(Object(M.a)({},r),{},{settings:!0})}),i||s({}),function(){a.current=!1}}),[]),Object(y.useEffect)((function(){E(l)}),[l]);var v=[{value:!1,label:n.disable},{value:!0,label:n.enable}],j=v.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{name:"google_login"})})),_=v.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{name:"magic_link"})})),N=v.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{name:"sign_up"})})),k=v.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{name:"password_login"})})),L=function(e){E(Object(M.a)(Object(M.a)({},p),{},Object(B.a)({},e.name,e.value)))};return D.a.createElement(H,null,D.a.createElement("h4",{className:"mb-3"},n.loginSettings),D.a.createElement("div",null,D.a.createElement("label",null,n.googleLogin),D.a.createElement(F.a,{styles:"0"===c?R.b:R.a,value:j.find((function(e){return e.value===p.google_login})),onChange:L,options:j})),D.a.createElement("div",null,D.a.createElement("label",null,n.magicLink),D.a.createElement(F.a,{styles:"0"===c?R.b:R.a,value:_.find((function(e){return e.value===p.magic_link})),onChange:L,options:_})),D.a.createElement("div",null,D.a.createElement("label",null,n.signUp),D.a.createElement(F.a,{styles:"0"===c?R.b:R.a,value:N.find((function(e){return e.value===p.sign_up})),onChange:L,options:N})),D.a.createElement("div",null,D.a.createElement("label",null,n.passwordLogin),D.a.createElement(F.a,{styles:"0"===c?R.b:R.a,value:k.find((function(e){return e.value===p.password_login})),onChange:L,options:k})),D.a.createElement("div",{className:"mt-2"},D.a.createElement("button",{className:"btn btn-primary",onClick:function(){O(!0),m(p,(function(e,c){a.current&&O(!1),e||t.success(n.loginSettingsUpdated)}))},disabled:h||!i},n.saveLogin)))},P=n(7),Q=n(627),K=function(e){return/(?:(?:ht|f)tp(?:s?):\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |/.,*:;=]|%[a-f\d]{2})*)?/gi.test(e)},z=A.a.div(i||(i=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n  table {\n    width: 100%;\n    border-spacing: 1rem;\n    th,\n    td {\n      padding: 5px 15px;\n    }\n  }\n  col.col1 {\n    width: 20%;\n  }\n  col.col2 {\n    width: 50%;\n  }\n"]))),X=function(){var e=Object(T.cb)()._t,t=Object(T.X)(),n={quickLinks:e("ADMIN.QUICK_LINKS_SETTINGS","Quick links settings"),saveQuickLinks:e("ADMIN.SAVE_QUICK_LINKS","Save quick links"),quickLinksUpdated:e("ADMIN.QUICK_LINKS_UPDATED","Quick links updated"),menuName:e("ADMIN.MENU_NAME","Menu name"),link:e("ADMIN.LINK","Link")},a=Object(y.useRef)(!0),c=Object(C.d)((function(e){return e.global.links})),l=Object(C.d)((function(e){return e.global.linksFetched})),i=Object(C.d)((function(e){return e.admin.filters})),r=Object(T.a)(),o=r.setAdminFilter,s=r.updateQuickLinks,m=r.createQuickLinks,u=Object(y.useState)(l&&c.length?Array.from(c):Array.from(Array(10),(function(){return{id:null,menu_name:"",link:""}}))),d=Object(q.a)(u,2),b=d[0],p=d[1],E=Object(y.useState)(!1),f=Object(q.a)(E,2),g=f[0],h=f[1];Object(y.useEffect)((function(){return o({filters:Object(M.a)(Object(M.a)({},i),{},{quick_links:!0})}),function(){a.current=!1}}),[]),Object(y.useEffect)((function(){p([].concat(Object(P.a)(c),Object(P.a)(b)).slice(0,10))}),[c]);return D.a.createElement(z,null,D.a.createElement("h4",{className:"mb-3"},n.quickLinks),D.a.createElement("div",null,D.a.createElement("table",null,D.a.createElement("colgroup",null,D.a.createElement("col",{className:"col1"}),D.a.createElement("col",{className:"col2"})),D.a.createElement("thead",null,D.a.createElement("tr",null,D.a.createElement("th",null,n.menuName),D.a.createElement("th",null,n.link))),D.a.createElement("tbody",null,b.map((function(e,t){return D.a.createElement("tr",{key:t},D.a.createElement("td",null,D.a.createElement(Q.a,{className:"w-100",value:e.menu_name,onChange:function(e){return function(e,t){var n=Object(P.a)(b);n[t].menu_name=e.target.value,p(n)}(e,t)},disabled:g||!l,type:"url"})),D.a.createElement("td",null,D.a.createElement(Q.a,{className:"w-100",value:e.link,onChange:function(e){return function(e,t){var n=Object(P.a)(b);n[t].link=e.target.value,p(n)}(e,t)},disabled:g||!l,type:"url"})))}))))),D.a.createElement("div",{className:"mt-2"},D.a.createElement("button",{className:"btn btn-primary",onClick:function(){h(!0);var e={quick_links:b.filter((function(e){return null!==e.id})).map((function(e){return""!==e.menu_name.trim()&&""!==e.link.trim()?e:Object(M.a)(Object(M.a)({},e),{},{menu_name:"",link:""})}))};if(s(e,(function(e,c){a.current&&h(!1),e||t.success(n.quickLinksUpdated)})),b.filter((function(e){return null===e.id})).length){var c={quick_links:b.filter((function(e){return null===e.id})).map((function(e){return{menu_name:e.menu_name,link:e.link}}))};m(c)}},disabled:!!g||!l||!!b.filter((function(e){return""!==e.link.trim()})).some((function(e){return!1===K(e.link)}))||!!b.some((function(e){return""===e.menu_name.trim()&&""!==e.link.trim()}))||!!b.some((function(e){return""!==e.menu_name.trim()&&""===e.link.trim()}))},n.saveQuickLinks)))},$=n(264),V=n.n($),W=n(20),J=n(13),Z=n(84),Y=A.a.div(r||(r=Object(L.a)(["\n  overflow: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  .card {\n    height: 95%;\n  }\n"]))),ee=Object(A.a)(V.a)(o||(o=Object(L.a)(["\n  .dark & {\n    input,\n    select {\n      color: #fff;\n    }\n    option {\n      color: #000;\n    }\n  }\n  .react-time-picker__inputGroup__minute {\n    width: 18px !important;\n  }\n"]))),te=function(e){return(e<10?"0":"")+e},ne=function(e){var t=Object(T.cb)()._t,n={huddleBot:t("HUDDLE.Question","Question"),huddleBotCreated:t("HUDDLE.HUDDLE_CREATED","Huddle bot created."),huddleBotUpdated:t("HUDDLE.HUDDLE_UPDATED","Huddle bot updated."),huddleBotFailed:t("HUDDLE.HUDDLE_FAILED","Huddle bot failed."),channels:t("HUDDLE.CHANNELS","Channels"),questions:t("HUDDLE.QUESTIONS","Questions"),startAt:t("HUDDLE.START_AT","Start at"),publishAt:t("HUDDLE.PUBLISH_AT","Publish at"),delete:t("HUDDLE.DELETE","Delete"),update:t("HUDDLE.UPDATE","Update"),create:t("HUDDLE.CREATE","Create"),cancel:t("HUDDLE.CANCEL","Cancel"),confirmationText:t("HUDDLE.DELETE_CONFIRMATION_TEXT","Are you sure you want to delete this huddle bot?"),deleteHuddle:t("HUDDLE.DELETE_HUDDLE","Delete huddle"),huddleLabel:t("ADMIN.HUDDLE_LABEL","Huddle bot")},a=Object(T.y)(),c=Object(T.X)(),l=Object(C.c)(),i=Object(C.d)((function(e){return e.chat.bots})),r=Object(C.d)((function(e){return e.chat.huddleBot})),o=i.channels,s=i.loaded,m=Object(C.d)((function(e){return e.admin.filters})),u=[{question:""},{question:""},{question:""},{question:""},{question:""}],d=new Date,b=te(d.getHours())+":"+te(d.getMinutes()),p=d.getTimezoneOffset()/60,E=Object(y.useState)([]),f=Object(q.a)(E,2),g=f[0],h=f[1],O=Object(y.useState)({set_start_at:b,set_publish_at:b,channel_id:null,user_bot_id:r?r.id:null,questions:u,introduction_message:"",closing_message:""}),v=Object(q.a)(O,2),j=v[0],_=v[1],N=o.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{value:e.id,label:e.name,icon:"compass"})}));Object(y.useEffect)((function(){if(l(Object(Z.l)({filters:Object(M.a)(Object(M.a)({},m),{},{bots:!0})})),!s){a.fetchUserBots({},(function(e,t){e||t.data.user_bots&&0===t.data.user_bots.length&&a.createUserBot({bot_name:"Huddle"})}))}}),[]);var k=function(e){_(Object(M.a)(Object(M.a)({},j),{},{questions:j.questions.map((function(t,n){return n===parseInt(e.target.dataset.name)?Object(M.a)(Object(M.a)({},t),{},{question:e.target.value}):t}))}))},L=function(e){_(Object(M.a)(Object(M.a)({},j),{},Object(B.a)({},e.target.dataset.name,e.target.value)))},A=function(){_({set_start_at:b,set_publish_at:b,channel_id:null,user_bot_id:r.id,questions:u})},I=j.questions.filter((function(e){return""===e.question.trim()})).length===j.questions.length||null===j.channel_id;return D.a.createElement(Y,null,r&&D.a.createElement("div",{className:"card-body"},D.a.createElement("h4",{className:"mb-3"},n.huddleLabel),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,n.channels),D.a.createElement(W.d,{options:N,value:g,onChange:function(e){if(null===e)h([]),_(Object(M.a)(Object(M.a)({},j),{},{set_start_at:b,set_publish_at:b,channel_id:null,user_bot_id:r.id,questions:u}));else if(h(e),e.huddle){var t=parseInt(e.huddle.publish_at.time.substr(0,2))-p,n=parseInt(e.huddle.start_at.time.substr(0,2))-p;_(Object(M.a)(Object(M.a)({},j),{},{introduction_message:e.huddle.introduction_message,closing_message:e.huddle.closing_message,channel_id:e.value,questions:e.huddle.questions,user_bot_id:r.id,set_publish_at:te(t>23?24-t:t)+":"+e.huddle.publish_at.time.substr(3,2),set_start_at:te(n>23?24-n:n)+":"+e.huddle.start_at.time.substr(3,2)}))}else _(Object(M.a)(Object(M.a)({},j),{},{channel_id:e.value,questions:u}))},isMulti:!1,isClearable:!0})),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,n.startAt),D.a.createElement("br",null),D.a.createElement(ee,{className:"react-datetime-picker start_at",onChange:function(e){_(Object(M.a)(Object(M.a)({},j),{},{set_start_at:e}))},value:j.set_start_at,disableClock:!0})),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,n.publishAt),D.a.createElement("br",null),D.a.createElement(ee,{className:"react-datetime-picker publish_at",onChange:function(e){_(Object(M.a)(Object(M.a)({},j),{},{set_publish_at:e}))},value:j.set_publish_at,disableClock:!0})),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,"Welcome message"),D.a.createElement("div",{className:"mb-2"},D.a.createElement("div",{className:"input-group"},D.a.createElement("input",{onChange:L,"data-name":"introduction_message",type:"text",className:"form-control",placeholder:"Welcome message","aria-describedby":"button-addon1",autoFocus:!0,value:j.introduction_message})))),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,"Thank you message"),D.a.createElement("div",{className:"mb-2"},D.a.createElement("div",{className:"input-group"},D.a.createElement("input",{onChange:L,"data-name":"closing_message",type:"text",className:"form-control",placeholder:"Thank you message","aria-describedby":"button-addon1",autoFocus:!0,value:j.closing_message})))),D.a.createElement("div",{className:"mb-2"},D.a.createElement("label",null,n.questions),j.questions.map((function(e,t){return D.a.createElement("div",{className:"mb-2",key:t},D.a.createElement("div",{className:"input-group"},D.a.createElement("input",{onChange:k,"data-name":t,type:"text",className:"form-control",placeholder:"Question","aria-describedby":"button-addon1",autoFocus:!0,value:e.question})))})),D.a.createElement("button",{className:"btn btn-primary",onClick:function(){var e=parseInt(j.set_publish_at.substr(0,2))+p,t=parseInt(j.set_start_at.substr(0,2))+p,l=j.set_publish_at.substr(3,2),i=j.set_start_at.substr(3,2),o=Object(M.a)(Object(M.a)({},j),{},{questions:j.questions.filter((function(e){return""!==e.question.trim()})),user_bot_id:r.id,set_publish_at:te(e>=0?e:24+e)+":"+l,set_start_at:te(t>=0?t:24+t)+":"+i}),s=function(e,t){e?c.error(n.huddleBotFailed):(g.huddle?c.success(n.huddleBotUpdated):c.success(n.huddleBotCreated),A(),h([]))};g.huddle?(o=Object(M.a)(Object(M.a)({},o),{},{huddle_id:g.huddle.id,update_questions:o.questions,new_questions:[],remove_question_ids:[]}),a.update(o,s)):a.create(o,s)},disabled:I},g.huddle?n.update:n.create),g.huddle&&D.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){var e=function(e,t){e||(A(),h([]))},t={type:"confirmation",headerText:n.deleteHuddle,submitText:n.delete,cancelText:n.cancel,bodyText:n.confirmationText,actions:{onSubmit:function(){return a.remove({huddle_id:g.huddle.id},e)}}};l(Object(J.a)(t))},disabled:I},n.delete))))},ae=n(15),ce=n(18),le=n(95),ie=A.a.div(s||(s=Object(L.a)(["\n  display: flex;\n  align-items: center;\n"]))),re=A.a.div(m||(m=Object(L.a)(["\n  display: flex;\n  flex-flow: column;\n  h5 {\n    margin: 0;\n  }\n"]))),oe=function(e){var t=e.bot,n=e.dictionary,a=Object(y.useRef)(null),c=Object(C.c)(),l=Object(T.X)(),i=Object(T.cb)()._t,r=Object(y.useState)(!1),o=Object(q.a)(r,2),s=o[0],m=o[1],u=Object(T.a)(),d=u.removeUserBot,b=u.uploadUserBotIcon,p=function(e,n){b({id:t.id,imageFile:e},(function(e,t){e||l.success("Uploaded icon success!")}))},E=function(){m(!1)};return D.a.createElement("div",{className:"col-12 col-md-6",key:t.id},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"card-body admin-bot-card"},D.a.createElement(le.a,{acceptType:"imageOnly",hide:!s,ref:a,onDragLeave:E,onDrop:function(e){!function(e){0===e.length?l.error("File type not allowed. Please use an image file."):e.length>1&&l.warning("Multiple files detected. First selected image will be used.");var t={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:p};c(Object(J.a)(t,(function(){E()})))}(e.acceptedFiles)},onCancel:E}),D.a.createElement(ie,{className:"mb-2"},D.a.createElement("div",{className:"mr-1"},D.a.createElement(ae.a,{isBot:!0,imageLink:t.image_path,name:t.name,noDefaultClick:!0,showSlider:!1,forceThumbnail:!1})),D.a.createElement(re,null,D.a.createElement("h5",null,t.name),D.a.createElement("span",null,t.channel_connected.length," Channels connected"))),D.a.createElement("div",null,D.a.createElement("button",{className:"btn btn-danger mr-2",onClick:function(){var e={type:"confirmation",headerText:i("MODAL.DELETE_BOT_HEADER","Delete ::name::",{name:t.name}),submitText:n.buttonRemove,cancelText:n.buttonCancel,bodyText:n.deleteBotBody,actions:{onSubmit:function(){d({id:t.id})}}};c(Object(J.a)(e))}},D.a.createElement(ae.s,{icon:"x"})),D.a.createElement("button",{className:"btn btn-primary mr-2",onClick:function(){var e={type:"update_bot",item:t,mode:"admin"};c(Object(J.a)(e))}},D.a.createElement(ae.s,{icon:"edit"})),D.a.createElement("button",{className:"btn btn-info mr-2",onClick:function(){a.current&&a.current.open()}},D.a.createElement(ae.s,{icon:"upload"})),D.a.createElement("button",{className:"btn btn-light mr-2",onClick:function(){Object(ce.b)(l,t.url_webhook)}},D.a.createElement(ae.s,{icon:"link"}))))))},se=A.a.div(u||(u=Object(L.a)(["\n  .admin-bot-card {\n    padding: 1rem;\n  }\n  button {\n    padding: 8px;\n  }\n  .create-btn {\n    padding: 15px;\n  }\n"]))),me=function(){var e=Object(T.cb)()._t,t=Object(C.c)(),n=Object(T.a)(),a=n.setAdminFilter,c=n.fetchUserBot,l=Object(y.useRef)(!0),i={adminBotLabel:e("ADMIN.AUTOMATION_LABEL_ADMIN_BOT","Admin bot"),deleteBotBody:e("MODAL.DELETE_BOT_CONFIRMATION","Are you sure you want to delete this bot?"),buttonCancel:e("BUTTON.CANCEL","Cancel"),buttonRemove:e("BUTTON.REMOVE","Remove")},r=Object(C.d)((function(e){return e.admin.filters})),o=Object(C.d)((function(e){return e.admin.automation})).bots;Object(y.useEffect)((function(){return c(),a({filters:Object(M.a)(Object(M.a)({},r),{},{automation:!0})}),function(){l.current=!1}}),[]);return D.a.createElement(se,null,D.a.createElement("h5",{className:"mb-3"},i.adminBotLabel),D.a.createElement("div",{className:"mb-3"},D.a.createElement("button",{className:"btn btn-primary create-btn",onClick:function(){t(Object(J.a)({type:"create_bot"}))}},"Create new bot")),D.a.createElement("div",{className:"row"},o.length>0&&o.map((function(e){return D.a.createElement(oe,{key:e.id,bot:e,dictionary:i})}))))},ue=A.a.div(d||(d=Object(L.a)([""]))),de=function(e){var t=Object(y.useState)(""),n=Object(q.a)(t,2),a=n[0],c=n[1],l=Object(y.useState)(!1),i=Object(q.a)(l,2),r=i[0],o=i[1],s=Object(y.useState)({designation:!1,contact:!1,address:!1,house_number:!1,zip_code:!1,city:!1,country:!1,birth_date:!1,profile_image:!1}),m=Object(q.a)(s,2),u=m[0],d=m[1],b=function(e){var t=e.target.dataset.name;d((function(e){return Object(M.a)(Object(M.a)({},e),{},Object(B.a)({},t,!e[t]))}))};return D.a.createElement(ue,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("label",null,"Gripp token"),D.a.createElement(Q.a,{value:a,onChange:function(e){c(e.target.value)}})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("label",null,"The default attribute to import ",D.a.createElement("strong",null,"EMAIL"),", ",D.a.createElement("strong",null,"FIRST NAME"),", ",D.a.createElement("strong",null,"LAST NAME"))),D.a.createElement("div",{className:"mb-3"},D.a.createElement("h3",null,"Additional attributes")),D.a.createElement("div",{className:"mb-3"},D.a.createElement(W.a,{name:"check_all",checked:r,onClick:function(){r||d(Object.keys(u).reduce((function(e,t){return e[t]=!0,e}),{})),o((function(e){return!e}))}},"Check all")),D.a.createElement("div",{className:"row mb-3"},D.a.createElement("div",{className:"col-12 col-md-6"},D.a.createElement(W.a,{name:"designation",checked:u.designation,onClick:b},"Function (Designation)"),D.a.createElement(W.a,{name:"contact",checked:u.contact,onClick:b},"Phone / Mobile number (Contact)"),D.a.createElement(W.a,{name:"address",checked:u.address,onClick:b},"Street (Address)"),D.a.createElement(W.a,{name:"house_number",checked:u.house_number,onClick:b},"Street Number (House number)"),D.a.createElement(W.a,{name:"zip_code",checked:u.zip_code,onClick:b},"Zip code (Zip code)")),D.a.createElement("div",{className:"col-12 col-md-6"},D.a.createElement(W.a,{name:"city",checked:u.city,onClick:b},"Place (City)"),D.a.createElement(W.a,{name:"country",checked:u.country,onClick:b},"Country (Country)"),D.a.createElement(W.a,{name:"birth_date",checked:u.birth_date,onClick:b},"Date of birth (Birth date)"),D.a.createElement(W.a,{name:"profile_image",checked:u.profile_image,onClick:b},"User Photo (Profile image)"))),D.a.createElement("div",null,D.a.createElement("button",{className:"btn btn-primary"},"Start sync user")))},be=A.a.div(b||(b=Object(L.a)(["\n  display: flex;\n  align-items: center;\n"]))),pe=A.a.div(p||(p=Object(L.a)(["\n  display: flex;\n  flex-flow: column;\n  h5 {\n    margin: 0;\n  }\n"]))),Ee=function(e){var t=e.bot,n=(e.dictionary,Object(y.useRef)(null)),a=Object(C.c)(),c=Object(T.X)(),l=Object(y.useState)(!1),i=Object(q.a)(l,2),r=i[0],o=i[1],s=(Object(T.a)().uploadUserBotIcon,function(e,t){}),m=function(){o(!1)};return D.a.createElement("div",{className:"col-12 col-md-6",key:t.id},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"card-body admin-bot-card"},D.a.createElement(le.a,{acceptType:"imageOnly",hide:!r,ref:n,onDragLeave:m,onDrop:function(e){!function(e){0===e.length?c.error("File type not allowed. Please use an image file."):e.length>1&&c.warning("Multiple files detected. First selected image will be used.");var t={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:s};a(Object(J.a)(t,(function(){m()})))}(e.acceptedFiles)},onCancel:m}),D.a.createElement(be,{className:"mb-2"},D.a.createElement("div",{className:"mr-1"},D.a.createElement(ae.a,{isBot:!0,imageLink:t.image_path,name:t.name,noDefaultClick:!0,showSlider:!1,forceThumbnail:!1})),D.a.createElement(pe,null,D.a.createElement("h5",null,t.name),D.a.createElement("span",null,t.channel_connected.length," Channels connected"))),D.a.createElement("div",null,D.a.createElement("button",{className:"btn btn-primary mr-2",onClick:function(){var e={type:"update_bot",item:t,mode:"gripp"};a(Object(J.a)(e))}},D.a.createElement(ae.s,{icon:"edit"})),D.a.createElement("button",{className:"btn btn-info mr-2",onClick:function(){n.current&&n.current.open()}},D.a.createElement(ae.s,{icon:"upload"}))))))},fe=function(e){var t=e.bots;return D.a.createElement("div",{className:"row"},t.length>0&&t.map((function(e){return D.a.createElement(Ee,{key:e.id,bot:e})})))},ge=A.a.div(E||(E=Object(L.a)(["\n  .gripp-card-body {\n    padding: 0.8rem;\n    height: 120px;\n    display: flex;\n    flex-flow: column;\n    justify-content: space-between;\n    cursor: pointer;\n    background-color: #fafafa;\n  }\n"]))),he=A.a.div(f||(f=Object(L.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  h3,\n  h5 {\n    margin: 0;\n  }\n"]))),Oe=A.a.div(g||(g=Object(L.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  justify-content: space-between;\n  h3,\n  h5 {\n    margin: 0;\n  }\n  .feather {\n    width: 2rem;\n    height: 2rem;\n    stroke-width: 3;\n  }\n  > div {\n    display: flex;\n    flex-flow: column;\n    align-items: flex-end;\n    text-align: right;\n    height: 100%;\n    justify-content: flex-end;\n  }\n"]))),ve=A.a.div(h||(h=Object(L.a)(["\n  display: flex;\n  align-items: center;\n  h5 {\n    margin: 0;\n  }\n  .back-button {\n    cursor: pointer;\n  }\n"]))),je=function(){var e=Object(T.cb)()._t,t=Object(T.a)(),n=t.setAdminFilter,a=t.fetchGrippBot,c=Object(y.useRef)(!0),l={grippLabel:e("ADMIN.GRIPP_LABEL","Gripp")},i=Object(y.useState)("main"),r=Object(q.a)(i,2),o=r[0],s=r[1],m=Object(C.d)((function(e){return e.admin.filters})),u=Object(C.d)((function(e){return e.admin.automation})),d=u.hasGrippLinked,b=u.grippBots;return Object(y.useEffect)((function(){return n({filters:Object(M.a)(Object(M.a)({},m),{},{automation:!0})}),null===d&&a({}),function(){c.current=!1}}),[]),D.a.createElement(ge,null,D.a.createElement(ve,{className:"mb-3"},D.a.createElement("h5",{className:"mr-3"},l.grippLabel),"main"!==o&&D.a.createElement("span",{className:"back-button",onClick:function(){return s("main")}},D.a.createElement(ae.s,{icon:"arrow-left"})," Back")),!0===d&&"main"===o&&D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"col-12 col-md-3"},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"gripp-card-body"},D.a.createElement(Oe,null,D.a.createElement(ae.s,{icon:"refresh-ccw"}),D.a.createElement("div",null,D.a.createElement("h3",null,"0"),D.a.createElement("h5",null,"Sync gripp user"))),D.a.createElement(he,null,D.a.createElement("h5",null,"Detail"),D.a.createElement(ae.s,{icon:"arrow-right-circle"}))))),D.a.createElement("div",{className:"col-12 col-md-3"},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"gripp-card-body"},D.a.createElement(Oe,null,D.a.createElement(ae.s,{icon:"download"}),D.a.createElement("div",null,D.a.createElement("h5",null,"Import gripp user"))),D.a.createElement(he,null,D.a.createElement("h5",null,"Detail"),D.a.createElement(ae.s,{icon:"arrow-right-circle"}))))),D.a.createElement("div",{className:"col-12 col-md-3"},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"gripp-card-body",onClick:function(){return s("gripp-bots")}},D.a.createElement(Oe,null,D.a.createElement(ae.s,{icon:"admin-bot",viewBox:"0 0 54 54"}),D.a.createElement("div",null,D.a.createElement("h3",null,b.length),D.a.createElement("h5",null,"Gripp bots"))),D.a.createElement(he,null,D.a.createElement("h5",null,"Detail"),D.a.createElement(ae.s,{icon:"arrow-right-circle"}))))),D.a.createElement("div",{className:"col-12 col-md-3"},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"gripp-card-body"},D.a.createElement(Oe,null,D.a.createElement("h5",null,"Reset profile image")),D.a.createElement(he,null,D.a.createElement("button",{className:"btn btn-primary"},"Reset")))))),!1===d&&"main"===o&&D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"col-12 col-md-4"},D.a.createElement("div",{className:"card border"},D.a.createElement("div",{className:"gripp-card-body",onClick:function(){return s("sync-form")}},D.a.createElement(Oe,null,D.a.createElement(ae.s,{icon:"refresh-ccw"}),D.a.createElement("div",null,D.a.createElement("h3",null,"0"),D.a.createElement("h5",null,"Sync gripp user"))),D.a.createElement(he,null,D.a.createElement("h5",null,"Detail"),D.a.createElement(ae.s,{icon:"arrow-right-circle"})))))),!1===d&&"sync-form"===o&&D.a.createElement(de,null),!0===d&&"gripp-bots"===o&&D.a.createElement(fe,{bots:b}))},_e=A.a.div(O||(O=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n  .card-body {\n    height: 125px;\n    cursor: pointer;\n    .icon-gripp-logo,\n    .bitrix-icon {\n      width: 100%;\n      height: 100%;\n    }\n    .feather-admin-bot {\n      width: 48px;\n      height: 48px;\n      margin-right: 5px;\n    }\n  }\n  .card-body.admin-bot {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    h4 {\n      margin: 0;\n    }\n  }\n"]))),Ne=function(){var e=Object(T.cb)()._t,t=Object(I.g)(),n=Object(T.a)().setAdminFilter,a=Object(y.useRef)(!0),c={automationLabel:e("ADMIN.AUTOMATION_LABEL","Automation")},l=Object(C.d)((function(e){return e.admin.filters}));Object(y.useEffect)((function(){return n({filters:Object(M.a)(Object(M.a)({},l),{},{automation:!0})}),function(){a.current=!1}}),[]);var i=function(e){t.push("/admin-settings/automation/".concat(e))};return D.a.createElement(_e,null,D.a.createElement("h4",{className:"mb-3"},c.automationLabel),D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"col-12 col-md-4"},D.a.createElement("div",{className:"card border",onClick:function(){return i("gripp")}},D.a.createElement("div",{className:"card-body"},D.a.createElement(ae.r,{icon:"gripp-logo"})))),D.a.createElement("div",{className:"col-12 col-md-4"},D.a.createElement("div",{className:"card border",onClick:function(){return i("admin-bot")}},D.a.createElement("div",{className:"card-body admin-bot"},D.a.createElement(ae.s,{icon:"admin-bot",viewBox:"0 0 54 54"}),D.a.createElement("h4",null,"Admin bot"))))),D.a.createElement(I.d,null,D.a.createElement(I.b,{component:me,path:["/admin-settings/automation/admin-bot"]}),D.a.createElement(I.b,{component:je,path:["/admin-settings/automation/gripp"]})))},ke=A.a.div(v||(v=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n"]))),Le=function(){var e=Object(T.cb)()._t,t=Object(T.a)().setAdminFilter,n=Object(y.useRef)(!0),a={contactLabel:e("ADMIN.CONTACT_LABEL","Contact")},c=Object(C.d)((function(e){return e.admin.filters}));return Object(y.useEffect)((function(){return t({filters:Object(M.a)(Object(M.a)({},c),{},{contact:!0})}),function(){n.current=!1}}),[]),D.a.createElement(ke,null,D.a.createElement("h4",{className:"mb-3"},a.contactLabel))},ye=A.a.div(j||(j=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n"]))),De=function(){var e=Object(T.cb)()._t,t=Object(T.a)().setAdminFilter,n=Object(y.useRef)(!0),a={supportLabel:e("ADMIN.SUPPORT_LABEL","Support desk")},c=Object(C.d)((function(e){return e.admin.filters}));return Object(y.useEffect)((function(){return t({filters:Object(M.a)(Object(M.a)({},c),{},{support:!0})}),function(){n.current=!1}}),[]),D.a.createElement(ye,null,D.a.createElement("h4",{className:"mb-3"},a.supportLabel))},Ae=A.a.div(_||(_=Object(L.a)(["\n  padding: 1rem;\n  > div {\n    margin-bottom: 1rem;\n  }\n"]))),Ce=function(){var e=Object(T.cb)()._t,t=Object(T.a)().setAdminFilter,n=Object(y.useRef)(!0),a={subscriptionLabel:e("ADMIN.SUBSCRIPTION_LABEL","Subscription")},c=Object(C.d)((function(e){return e.admin.filters}));return Object(y.useEffect)((function(){return t({filters:Object(M.a)(Object(M.a)({},c),{},{subscription:!0})}),function(){n.current=!1}}),[]),D.a.createElement(Ae,null,D.a.createElement("h4",{className:"mb-3"},a.subscriptionLabel))},Ie=A.a.div(N||(N=Object(L.a)(["\n  overflow: visible !important;\n  height: 100%;\n"]))),Te=function(e){return D.a.createElement(Ie,{className:"card"},D.a.createElement(I.d,null,D.a.createElement(I.b,Object.assign({},e,{component:Ne,path:["/admin-settings/automation","/admin-settings/automation/:subpage"]})),D.a.createElement(I.b,Object.assign({},e,{component:G,path:["/admin-settings/settings"]})),D.a.createElement(I.b,Object.assign({},e,{component:X,path:["/admin-settings/quick-links"]})),D.a.createElement(I.b,Object.assign({},e,{component:ne,path:["/admin-settings/bots"]})),D.a.createElement(I.b,Object.assign({},e,{component:Ce,path:["/admin-settings/subscription"]})),D.a.createElement(I.b,Object.assign({},e,{component:Le,path:["/admin-settings/contact"]})),D.a.createElement(I.b,Object.assign({},e,{component:De,path:["/admin-settings/support"]})),D.a.createElement(I.a,{from:"*",to:{pathname:"/admin-settings/settings"}})))},we=A.a.div(k||(k=Object(L.a)(["\n  overflow: hidden auto;\n  .app-block {\n    overflow: inherit;\n    .app-content {\n      height: auto;\n    }\n  }\n"])));t.default=function(e){return D.a.createElement(we,{className:"container-fluid h-100 fadeIn"},D.a.createElement("div",{className:"row app-block"},D.a.createElement(U,null),D.a.createElement("div",{className:"col-lg-9 app-content mb-4"},D.a.createElement("div",{className:"app-content-overlay"}),D.a.createElement(Te,null))))}}}]);