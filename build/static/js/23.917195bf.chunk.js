(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[23],{796:function(e,a,t){"use strict";t.r(a);var n=t(10),l=t(1),c=t(7),m=t(5),r=t(0),i=t.n(r),o=t(6),d=t(43),s=t(779),b=t(767),f=t(769),u=t(766),p=t(768),E=t(243),O=t(4),v=t(15),j=t(13),N=t(12),g=t(75),x=t(251),h=t(11),k=t(19);function _(){var e=Object(m.a)(["\n  overflow: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  .row-user-profile-panel {\n    justify-content: center;\n\n    .avatar {\n      width: 68px;\n      height: 68px;\n    }\n\n    input.designation {\n      &::-webkit-input-placeholder {\n        font-size: 12px;\n      }\n      &:-ms-input-placeholder {\n        font-size: 12px;\n      }\n      &::placeholder {\n        font-size: 12px;\n      }\n    }\n\n    .col-label {\n      max-width: 130px;\n\n      @media only screen and (min-width: 1200px) {\n        max-width: 180px;\n      }\n    }\n  }\n\n  .close {\n    border-radius: 100%;\n    padding: 2px;\n  }\n\n  label {\n    padding: 5px 10px;\n    border-radius: 6px;\n    width: 100%;\n  }\n\n  .btn-toggle {\n    &:hover {\n      .input-group-text {\n        border: 1px solid #e1e1e1;\n        background: #fff;\n        color: ",";\n      }\n    }\n    .input-group-text {\n      border: 1px solid #",";\n      background: ",";\n      color: #fff;\n    }\n    svg {\n      cursor: pointer;\n    }\n  }\n\n  .avatar-container {\n    cursor: pointer;\n    position: relative;\n    width: 68px;\n    height: 68px;\n    margin: 0 auto;\n\n    .edit-avatar {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      background-color: #fff;\n      border-radius: 50px 50px 50px 50px;\n      height: 25px;\n      width: 25px;\n      padding: 5px;\n      border-color: rgba(0, 0, 0, 0.2);\n      color: #a5aeb3;\n      border-width: 1px;\n      color: #212529;\n      svg {\n        width: 1rem;\n        height: 1rem;\n      }\n    }\n    :hover {\n      svg {\n        color: ",";\n      }\n    }\n    .dark & {\n      svg {\n        color: #fff;\n      }\n    }\n  }\n\n  .form-group {\n    &.designation {\n      margin: 0 auto;\n      width: 66.66%;\n    }\n  }\n"]);return _=function(){return e},e}var w=O.b.div(_(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}));a.default=i.a.memo((function(e){var a=e.className,t=void 0===a?"":a,m=Object(d.g)(),O=Object(o.c)(),_=Object(h.bb)(),y=Object(h.kb)(),T=y.users,S=y.loggedUser,C=Object(h.ib)(),F=C.checkEmail,P=C.fetchById,I=C.getReadOnlyFields,R=C.getRequiredFields,L=C.update,A=C.updateProfileImage,B=Object(h.jb)().selectUserChannel,D=T[e.match.params.id],V=D&&S.id===D.id,M=I(D?D.import_from:""),q=R(D?D.import_from:""),U=Object(r.useState)(!1),Z=Object(c.a)(U,2),z=Z[0],H=Z[1],J=Object(r.useState)(!1),G=Object(c.a)(J,2),W=G[0],Y=G[1],K=Object(r.useState)(!1),X=Object(c.a)(K,2),Q=X[0],$=X[1],ee=Object(r.useState)(!1),ae=Object(c.a)(ee,2),te=ae[0],ne=ae[1],le=Object(r.useState)(D&&D.loaded?D:{}),ce=Object(c.a)(le,2),me=ce[0],re=ce[1],ie=Object(r.useState)({valid:{},feedbackState:{},feedbackText:{}}),oe=Object(c.a)(ie,2),de=oe[0],se=oe[1],be={dropZoneRef:Object(r.useRef)(null),first_name:Object(r.useRef)(null),password:Object(r.useRef)(null)},fe=Object(h.gb)()._t,ue={companyName:fe("PROFILE.COMPANY_NAME","Company name"),information:fe("PROFILE.INFORMATION","Information"),firstName:fe("PROFILE.FIRST_NAME","First name:"),middleName:fe("PROFILE.MIDDLE_NAME","Middle name:"),lastName:fe("PROFILE.LAST_NAME","Last name:"),password:fe("PROFILE.PASSWORD","Password:"),position:fe("PROFILE.POSITION","Position:"),city:fe("PROFILE.CITY","City:"),address:fe("PROFILE.ADDRESS","Address:"),zip_code:fe("PROFILE.ZIP_POST_CODE","ZIP/POST code:"),phone:fe("PROFILE.PHONE","Phone:"),email:fe("PROFILE.EMAIL","Email:"),edit:fe("BUTTON.EDIT","Edit"),saveChanges:fe("BUTTON.SAVE_CHANGES","Save changes"),cancel:fe("BUTTON.CANCEL","Cancel"),clickToChangePassword:fe("PROFILE.CLICK_TO_CHANGE_PASSWORD","Click to change your password"),external:fe("PROFILE.EXTERNAL","External")},pe=S&&"internal"===S.type&&D&&"external"===D.type&&1===D.active||S&&S.role&&("admin"===S.role.name||"owner"===S.role.name),Ee=function(e){if("boolean"===typeof e)return e?"is-valid":"is-invalid"},Oe=function(){H((function(e){return!e})),re(Object(l.a)({},D)),se({valid:{},feedbackState:{},feedbackText:{}}),$(!1)},ve=function(e){if(null!==e.target){var a=e.target,t=a.name,c=a.value;re((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(n.a)({},t,c.trim()))}))}},je=function(e){if(null!==e.target){var a=e.target,t=a.name,c=a.value;if(D[t]===me[t])return void se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,void 0)),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},Object(n.a)({},t,void 0)),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},Object(n.a)({},t,void 0))}}));"email"===t?q.includes(t)&&""===c.trim()?se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,!1)),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},Object(n.a)({},t,!1)),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},Object(n.a)({},t,"Email is required"))}})):""===c.trim()||v.a.test(c.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,!1)),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},Object(n.a)({},t,!1)),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},Object(n.a)({},t,"Email is already taken"))}})):se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,!0)),feedbackState:Object(l.a)({},e.feedbackState),feedbackText:Object(l.a)({},e.feedbackText)}})))})):se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,!1)),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},Object(n.a)({},t,!1)),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},Object(n.a)({},t,"Invalid email format"))}})):q.includes(t)?se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,""!==c.trim())),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},Object(n.a)({},t,""!==c.trim())),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},Object(n.a)({},t,""===c.trim()?"Field is required.":""))}})):se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},Object(n.a)({},t,!0)),feedbackState:e.feedbackState,feedbackText:e.feedbackText}}))}},Ne=function(){ne(!1)},ge=function(e,a){re((function(e){return Object(l.a)(Object(l.a)({},e),{},{profile_image_link:a})})),se((function(a){return{valid:Object(l.a)(Object(l.a)({},a.valid),{},{profile_image_link:!0}),feedbackState:Object(l.a)({},a.feedbackState),feedbackText:Object(l.a)(Object(l.a)({},a.feedbackText),{},{profile_image_link:e})}})),H(!0),_.info(i.a.createElement(i.a.Fragment,null,"Click the ",i.a.createElement("b",null,"Save Changes")," button to update your profile image."))};return Object(r.useEffect)((function(){(!e.match.params.hasOwnProperty("id")||e.match.params.hasOwnProperty("id")&&!e.match.params.hasOwnProperty("name")&&parseInt(e.match.params.id)===S.id)&&m.push("/profile/".concat(S.id,"/").concat(Object(v.h)(S.name)))}),[]),Object(r.useEffect)((function(){var a=T[e.match.params.id]?T[e.match.params.id]:{};a.hasOwnProperty("loaded")?me.id!==a.id&&re(a):P(e.match.params.id)}),[e.match.params.id,T,re]),Object(r.useEffect)((function(){"edit"===e.match.params.mode&&me.id&&S.id===me.id&&(m.push("/profile/".concat(me.id,"/").concat(Object(v.h)(me.name))),H(!0)),"view"===e.match.params.mode&&me.id&&S.id===me.id&&(m.push("/profile/".concat(me.id,"/").concat(Object(v.h)(me.name))),H(!1))}),[me,e.match.params.mode]),Object(r.useEffect)((function(){Q&&be.password.current&&be.password.current.focus()}),[Q,be.password]),Object(r.useEffect)((function(){z&&be.first_name.current&&be.first_name.current.focus()}),[z,be.first_name]),T[e.match.params.id]?i.a.createElement(w,{className:"user-profile-panel container-fluid h-100 ".concat(t)},i.a.createElement("div",{className:"row row-user-profile-panel"},i.a.createElement("div",{className:"col-12 col-lg-5 col-xl-6"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body text-center",onDragOver:function(){te||ne(!0)}},(V||pe)&&i.a.createElement(g.a,{acceptType:"imageOnly",hide:!te,ref:be.dropZoneRef,onDragLeave:Ne,onDrop:function(e){!function(e){0===e.length?_.error("File type not allowed. Please use an image file."):e.length>1&&_.warning("Multiple files detected. First selected image will be used.");var a={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:ge};O(Object(j.a)(a,(function(){Ne()})))}(e.acceptedFiles)},onCancel:Ne}),i.a.createElement("div",{className:"avatar-container"},i.a.createElement(N.a,{imageLink:me.profile_image_link,name:me.name?me.name:me.email,noDefaultClick:!0,forceThumbnail:!1}),(V||pe)&&i.a.createElement("span",{className:"btn edit-avatar",onClick:function(){z||H(!0),be.dropZoneRef.current.open()}},i.a.createElement(N.s,{icon:"pencil"}))),z?i.a.createElement("h5",{className:"mb-1 mt-2"},me.first_name," ",me.middle_name," ",me.last_name):i.a.createElement("h5",{className:"mb-1 mt-2"},D.first_name," ",D.middle_name," ",D.last_name),z&&!M.includes("designation")?i.a.createElement("div",{className:"text-muted small d-flex align-items-center mt-2"},i.a.createElement(k.f,{placeholder:"Job Title eg. Manager, Team Leader, Designer",className:"designation",name:"designation",onChange:ve,onBlur:je,defaultValue:D.designation,isValid:de.feedbackState.designation,valid:de.feedbackText.designation})):i.a.createElement("p",{className:"text-muted small"},D.designation),S.id!==D.id&&i.a.createElement("div",{className:"d-flex justify-content-center"},""!==D.contact&&"internal"===S.type&&i.a.createElement("button",{className:"btn btn-outline-light mr-1"},i.a.createElement("a",{href:"tel:".concat(D.contact.replace(/ /g,"").replace(/-/g,""))},i.a.createElement(N.s,{className:"",icon:"phone"}))),"external"!==D.type&&"internal"===S.type&&i.a.createElement("button",{className:"ml-1 btn btn-outline-light"},i.a.createElement(N.s,{onClick:function(){!function(e){B(e)}(D)},icon:"message-circle"}))))),i.a.createElement("div",{className:"card"},z?i.a.createElement("div",{className:"card-body"},i.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),i.a.createElement("div",{className:"col col-form"},M.includes("first_name")?i.a.createElement(s.a,null,D.first_name):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(de.valid.first_name),innerRef:be.first_name,name:"first_name",onChange:ve,onBlur:je,defaultValue:D.first_name}),i.a.createElement(x.a,{valid:de.feedbackState.first_name},de.feedbackText.first_name)))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),i.a.createElement("div",{className:"col col-form"},M.includes("middle_name")?i.a.createElement(s.a,null,D.middle_name):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(de.valid.middle_name),name:"middle_name",onChange:ve,onBlur:je,defaultValue:D.middle_name}),i.a.createElement(x.a,{valid:de.feedbackState.middle_name},de.feedbackText.middle_name)))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),i.a.createElement("div",{className:"col col-form"},M.includes("last_name")?i.a.createElement(s.a,null,D.last_name):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(de.valid.last_name),name:"last_name",onChange:ve,onBlur:je,defaultValue:D.last_name}),i.a.createElement(x.a,{valid:de.feedbackState.last_name},de.feedbackText.last_name)))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.password),i.a.createElement("div",{className:"col col-form"},M.includes("password")||pe?i.a.createElement(s.a,null,"*****"):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{onClick:function(){$((function(e){return!e}))},className:"cursor-pointer mb-0 ".concat(Q?"d-none":"")},ue.clickToChangePassword),i.a.createElement(f.a,{className:"form-group-password mb-0 ".concat(Q?"":"d-none")},i.a.createElement(u.a,null,i.a.createElement(b.a,{className:Ee(de.valid.password),innerRef:be.password,name:"password",onChange:ve,onBlur:je,defaultValue:"",type:W?"text":"password"}),i.a.createElement(p.a,{className:"btn-toggle",addonType:"append"},i.a.createElement(E.a,{className:"btn",onClick:function(){Y((function(e){return!e}))}},i.a.createElement(N.s,{icon:W?"eye-off":"eye"})))),i.a.createElement(x.a,{valid:de.feedbackState.password},de.feedbackText.password))))),"external"===D.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),i.a.createElement("div",{className:"col col-form"},M.includes("company_name")?i.a.createElement(s.a,null,D.external_company_name&&D.external_company_name):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(!0),name:"company_name",disabled:pe||!V,onChange:ve,onBlur:je,defaultValue:D.external_company_name?D.external_company_name:""})))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.city),i.a.createElement("div",{className:"col col-form"},M.includes("place")?i.a.createElement(s.a,null,D.place):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(de.valid.place),name:"place",onChange:ve,onBlur:je,defaultValue:D.place}),i.a.createElement(x.a,{valid:de.feedbackState.place},de.feedbackText.place)))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.address),i.a.createElement("div",{className:"col col-form"},M.includes("address")?i.a.createElement(s.a,null,D.address):i.a.createElement(i.a.Fragment,null,i.a.createElement(k.f,{name:"address",onChange:ve,onBlur:je,defaultValue:D.address,isValid:de.feedbackState.address,feedback:de.feedbackText.address})))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.phone),i.a.createElement("div",{className:"col col-form"},M.includes("contact")?i.a.createElement(s.a,null,D.contact):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:Ee(de.valid.contact),name:"contact",onChange:ve,onBlur:je,defaultValue:D.contact}),i.a.createElement(x.a,{valid:de.feedbackState.contact},de.feedbackText.contact)))),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.email),i.a.createElement("div",{className:"col col-form"},M.includes("email")?i.a.createElement(s.a,null,D.email):i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{type:"email",className:Ee(de.valid.email),name:"email",onChange:ve,onBlur:je,defaultValue:D.email}),i.a.createElement(x.a,{valid:de.feedbackState.email},de.feedbackText.email)))),i.a.createElement("hr",null),i.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-0"},i.a.createElement("div",null,"\xa0"),i.a.createElement("div",null,i.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light mr-2"},ue.cancel),i.a.createElement("span",{onClick:function(){!1===Object.values(de.valid).find((function(e){return!1===e}))?_.error("Some fields require your attention."):!0===Object.values(de.valid).find((function(e){return!0===e}))?me.profile_image_link!==D.profile_image_link?A(me,de.feedbackText.profile_image_link,(function(e,a){a&&H(!1)})):pe?D.email!==me.email?L(Object(l.a)(Object(l.a)({},me),{},{change_email:1}),(function(e,a){a&&H(!1)})):L(Object(l.a)({},me),(function(e,a){a&&H(!1)})):L(me,(function(e,a){a&&H(!1)})):(D&&me.email&&D.email!==me.email?q.includes("email")&&""===me.email.trim()?se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},{email:!1}),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},{email:"Email is required"})}})):""===me.email.trim()||v.a.test(me.email.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},{email:!1}),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},{email:"Email is already taken"})}})):pe?D.email!==me.email?L(Object(l.a)(Object(l.a)({},me),{},{change_email:1}),(function(e,a){a&&H(!1)})):L(Object(l.a)({},me),(function(e,a){a&&H(!1)})):L(me,(function(e,a){a&&H(!1)})))})):se((function(e){return{valid:Object(l.a)(Object(l.a)({},e.valid),{},{email:!1}),feedbackState:Object(l.a)(Object(l.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(l.a)(Object(l.a)({},e.feedbackText),{},{email:"Invalid email format"})}})):_.info("Nothing was updated."),H(!1))},className:"btn btn-primary"},ue.saveChanges)))):i.a.createElement("div",{className:"card-body"},i.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information,V||pe?i.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light btn-sm"},i.a.createElement(N.s,{className:"mr-2",icon:"edit-2"})," ",ue.edit):null),D.first_name&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),i.a.createElement("div",{className:"col col-form"},D.first_name)),D.middle_name&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),i.a.createElement("div",{className:"col col-form"},D.middle_name)),D.last_name&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),i.a.createElement("div",{className:"col col-form"},D.last_name)),D.id===S.id&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.password),i.a.createElement("div",{className:"col col-form"},"*****")),"external"===D.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),i.a.createElement("div",{className:"col col-form"},D.external_company_name&&D.external_company_name)),D.role&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.position),i.a.createElement("div",{className:"col col-form"},"external"===D.type?ue.external:D.role.name)),D.place&&"internal"===S.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.city),i.a.createElement("div",{className:"col col-form"},D.place)),D.address&&"internal"===S.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.address),i.a.createElement("div",{className:"col col-form"},D.address)),D.contact&&"internal"===S.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.phone),i.a.createElement("div",{className:"col col-form"},D.contact)),D.email&&"internal"===S.type&&i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col col-label text-muted"},ue.email),i.a.createElement("div",{className:"col col-form cursor-pointer",onClick:function(){window.location.href="mailto:".concat(D.email)}},D.email))))))):i.a.createElement(i.a.Fragment,null)}))}}]);