(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[9],{720:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(5),c=a(2),i=a(0),o=a.n(i),l=a(3),s=a(6);function m(){var e=Object(c.a)(["\n  .list-group-item:last-child {\n    border-bottom-width: thin !important;\n  }\n  li {\n    cursor: pointer;\n  }\n  &.list-group .list-group-item.active {\n    border-color: #eeebee;\n    background-color: #fafafa !important;\n    .dark & {\n      background-color: #111417 !important;\n    }\n  }\n"]);return m=function(){return e},e}var u=l.a.ul(m()),d=function(e){var t=e.actions,a=e.counters,n=e.dictionary,r=e.filterBy,c="external"===Object(s.useSelector)((function(e){return e.session.user})).type,i=function(e){e.persist(),r!==e.target.dataset.value&&(t.updateSearch({filterBy:e.target.dataset.value}),document.body.classList.remove("mobile-modal-open"))};return o.a.createElement(u,{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"all"===r?"active":""),"data-value":"all",onClick:i},o.a.createElement("span",{className:"text-primary fa fa-circle mr-2"}),n.all,o.a.createElement("span",{className:"small ml-auto"},a.nonMember+a.member>0&&a.nonMember+a.member)),o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"member"===r?"active":""),"data-value":"member",onClick:i},o.a.createElement("span",{className:"text-success fa fa-circle mr-2"}),n.labelJoined,o.a.createElement("span",{className:"small ml-auto"},a.member>0&&a.member)),o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"favourites"===r?"active":""),"data-value":"favourites",onClick:i},o.a.createElement("span",{className:"text-warning fa fa-circle mr-2"}),n.favourites,o.a.createElement("span",{className:"small ml-auto"},a.favourites>0&&a.favourites)),o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"new"===r?"active":""),"data-value":"new",onClick:i},o.a.createElement("span",{className:"text-info fa fa-circle mr-2"}),n.new,o.a.createElement("span",{className:"small ml-auto"},a.new>0&&a.new)),!c&&o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"nonMember"===r?"active":""),"data-value":"nonMember",onClick:i},o.a.createElement("span",{className:"text-secondary fa fa-circle mr-2"}),n.notJoined,o.a.createElement("span",{className:"small ml-auto"},a.nonMember>0&&a.nonMember)),!c&&o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"external"===r?"active":""),"data-value":"external",onClick:i},o.a.createElement("span",{className:"text-external fa fa-circle mr-2"}),n.withClient,o.a.createElement("span",{className:"small ml-auto"},a.external>0&&a.external)),o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"private"===r?"active":""),"data-value":"private",onClick:i},o.a.createElement("span",{className:"text-danger fa fa-circle mr-2"}),n.private,o.a.createElement("span",{className:"small ml-auto"},a.private>0&&a.private)),o.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"archived"===r?"active":""),"data-value":"archived",onClick:i},o.a.createElement("span",{className:"text-light fa fa-circle mr-2"}),n.archived,o.a.createElement("span",{className:"small ml-auto"},a.archived>0&&a.archived)))},p=a(7);function b(){var e=Object(c.a)([""]);return b=function(){return e},e}function f(){var e=Object(c.a)(["\n  margin-right: 4px;\n"]);return f=function(){return e},e}function h(){var e=Object(c.a)(["\n  display: inline-flex;\n  align-items: center;\n"]);return h=function(){return e},e}function v(){var e=Object(c.a)(["\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n"]);return v=function(){return e},e}var E=l.a.div(v()),g=l.a.button(h()),w=Object(l.a)(p.t)(f()),O=l.a.div(b()),k=function(e){var t=e.actions,a=e.counters,n=e.dictionary,r=e.filterBy,c=Object(s.useSelector)((function(e){return e.session.user}));return o.a.createElement(E,{className:"col-md-3 app-sidebar bottom-modal-mobile"},o.a.createElement(O,{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),o.a.createElement("div",{className:"bottom-modal-mobile_inner"},o.a.createElement("div",{className:"app-sidebar-menu",tabIndex:"2"},"internal"===c.type&&o.a.createElement("div",{className:"card-body create-new-post-wrapper"},o.a.createElement(g,{className:"btn btn-primary btn-block",onClick:t.showWorkspaceModal},o.a.createElement(w,{icon:"circle-plus"}),n.addNewWorkspace)),o.a.createElement("div",{className:"post-filter-item list-group list-group-flush"},o.a.createElement("span",{className:"list-group-item d-flex align-items-center pr-3","data-value":"inbox"},n.filters)),o.a.createElement(d,{actions:t,counters:a,dictionary:n,filterBy:r}))))},N=a(1);function y(){var e=Object(c.a)(["\n  overflow: inherit !important;\n  .action-right {\n    margin: 0 !important;\n  }\n  .action-left {\n    ul {\n      margin-bottom: 0;\n      display: inherit;\n\n      li {\n        position: relative;\n\n        .button-dropdown {\n        }\n      }\n    }\n    .app-sidebar-menu-button {\n      margin-left: 8px;\n    }\n  }\n  .btn-cross {\n    position: absolute;\n    top: 0;\n    right: 45px;\n    border: 0;\n    background: transparent;\n    padding: 0;\n    height: 100%;\n    width: 36px;\n    border-radius: 4px;\n    z-index: 9;\n    svg {\n      width: 16px;\n      color: #495057;\n    }\n  }\n"]);return y=function(){return e},e}var x=l.a.div(y()),j=o.a.memo((function(e){var t=e.actions,a=e.dictionary,n=e.search,c=n.value,l=n.searching,s=n.filterBy,m=Object(i.useState)(""),u=Object(r.a)(m,2),d=u[0],b=u[1],f=function(){t.updateSearch(Object(N.a)(Object(N.a)({},n),{},{results:[],value:d,filterBy:s,searching:!0})),t.search({search:d,skip:0,limit:25,filter_by:s},(function(e,a){e?t.updateSearch(Object(N.a)(Object(N.a)({},n),{},{searching:!1})):t.updateSearch(Object(N.a)(Object(N.a)({},n),{},{value:d,filterBy:s,searching:!1,count:a.data.total_count,results:a.data.workspaces,maxPage:Math.ceil(a.data.total_count/25),page:1}))}))},h=function(){t.updateSearch({results:[],searching:!0,value:"",filterBy:"all",page:1,maxPage:1,count:0}),t.search({search:"",skip:0,limit:25,filter_by:"all"},(function(e,a){e?t.updateSearch({searching:!1,value:"",filterBy:"all"}):t.updateSearch({value:"",filterBy:"all",searching:!1,count:a.data.total_count,results:a.data.workspaces,maxPage:Math.ceil(a.data.total_count/25)})})),b("")};Object(i.useEffect)((function(){var e=setTimeout((function(){t.updateSearch({value:d,hasMore:!0})}),500);return function(){return clearTimeout(e)}}),[d]);return o.a.createElement(x,{className:"files-header app-action"},o.a.createElement("div",{className:"action-left mt-2"},o.a.createElement("span",{className:"app-sidebar-menu-button btn btn-outline-light",onClick:function(){document.body.classList.toggle("mobile-modal-open")}},o.a.createElement(p.t,{icon:"menu"}))),o.a.createElement("div",{className:"action-right"},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",onChange:function(e){""===e.target.value.trim()&&""!==c?h():b(e.target.value)},value:d,onKeyDown:function(e){"Enter"!==e.key||l||f()},className:"form-control",placeholder:a.searchWorkspacePlaceholder,"aria-describedby":"button-addon1"}),""!==d.trim()&&o.a.createElement("button",{onClick:h,className:"btn-cross",type:"button"},o.a.createElement(p.t,{icon:"x"})),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-outline-light",type:"button",id:"button-addon1",onClick:f},o.a.createElement(p.t,{icon:"search"}))))))})),C=a(12),S=a(9);function A(){var e=Object(c.a)(["\n  background: #00c851;\n  border-radius: 50%;\n  margin-right: 3px;\n"]);return A=function(){return e},e}function _(){var e=Object(c.a)(["\n  width: 0.8rem;\n  height: 0.8rem;\n  color: #fff;\n  stroke-width: 3;\n  padding: 2px;\n"]);return _=function(){return e},e}function L(){var e=Object(c.a)(["\n  span.text-success {\n    margin-right: 0;\n  }\n"]);return L=function(){return e},e}function P(){var e=Object(c.a)(["\n  width: 1rem;\n  height: 1rem;\n  margin-right: 3px;\n"]);return P=function(){return e},e}function R(){var e=Object(c.a)(["\n  .workspace-title {\n    cursor: pointer;\n  }\n  .labels span {\n    display: flex;\n    align-items: center;\n  }\n  .mobile-icon {\n    display: none;\n  }\n  @media (max-width: 414px) {\n    .badge {\n      display: none;\n    }\n    .mobile-icon {\n      display: block;\n    }\n  }\n"]);return R=function(){return e},e}var D=l.a.div(R()),T=Object(l.a)(p.t)(P()),W=l.a.span(L()),B=Object(l.a)(p.t)(_()),M=l.a.span(A()),I=function(e){var t=e.dictionary,a=e.isExternal,n=e.isMember,r=e.item,c=e.onRedirect;return o.a.createElement(D,{className:"workspace-details"},o.a.createElement("div",{className:"title-labels"},o.a.createElement("span",{className:"workspace-title",onClick:function(e){return c(e,r)}},r.topic.name),r.topic.is_locked&&o.a.createElement(T,{icon:"lock"}),r.topic.is_shared&&!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"badge badge-external ml-1 align-items-center"},o.a.createElement(T,{icon:"eye"})," ",t.withClient),o.a.createElement(T,{icon:"eye",className:"mobile-icon"}))),o.a.createElement("div",{className:"labels"},n&&o.a.createElement(W,{className:"mr-2"},o.a.createElement(M,null,o.a.createElement(B,{icon:"check"})),o.a.createElement("span",{className:"text-success"},t.labelJoined)),o.a.createElement("span",{className:"mr-2"},o.a.createElement(T,{icon:"user"}),r.members.length),r.workspace&&o.a.createElement("span",{className:"mr-2"},o.a.createElement(T,{icon:"folder"}),r.workspace.name)))};function K(){var e=Object(c.a)(["\n  padding: 5px 10px;\n  font-size: 12px;\n  font-weight: 500;\n"]);return K=function(){return e},e}function J(){var e=Object(c.a)(["\n  width: 1rem;\n  height: 1rem;\n  margin-right: 10px;\n  &.favorite {\n    color: rgb(255, 193, 7);\n    fill: rgb(255, 193, 7);\n  }\n  :hover {\n    color: #7a1b8b;\n    cursor: pointer;\n    &.favorite {\n      color: rgb(255, 193, 7);\n      fill: rgb(255, 193, 7);\n    }\n  }\n"]);return J=function(){return e},e}function H(){var e=Object(c.a)(["\n  margin-left: 10px;\n"]);return H=function(){return e},e}var F=l.a.div(H()),V=Object(l.a)(p.t)(J()),z=l.a.button(K()),U=function(e){var t=e.actions,a=e.dictionary,n=e.isExternal,r=e.isMember,c=e.item;return o.a.createElement(F,{className:"workspace-list-buttons"},r&&!n&&o.a.createElement(V,{icon:"pencil",onClick:function(){return t.edit(c)}}),r&&o.a.createElement(V,{icon:"star",className:"".concat(c.topic.is_favourite&&"favorite"),onClick:function(){return t.favourite(c)}}),r&&!n&&o.a.createElement(V,{icon:"trash",onClick:function(){return t.showArchiveConfirmation(c)}}),o.a.createElement(z,{className:"btn ".concat(r?"btn-danger":"btn-primary"),onClick:function(){r?t.leave(c):t.join(c)}},r?a.buttonLeave:a.buttonJoin))};function X(){var e=Object(c.a)(["\n  position: absolute;\n  z-index: 2;\n  width: 1rem;\n  height: 1rem;\n  top: 0;\n  right: 0;\n  color: rgb(255, 193, 7);\n  fill: rgb(255, 193, 7);\n"]);return X=function(){return e},e}function Z(){var e=Object(c.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  list-style: none;\n  border-right: none;\n  border-left: none;\n\n  .workspace-icon {\n    position: relative;\n  }\n  .workspace-list-buttons {\n    display: none;\n  }\n  .workspace-title {\n    font-size: 1rem;\n  }\n  .title-labels,\n  .labels {\n    display: flex;\n  }\n  .title-labels {\n    align-items: center;\n    .feather-lock {\n      margin: 0 5px;\n    }\n    .feather-eye {\n      width: 0.8rem;\n      height: 0.8rem;\n    }\n  }\n  :hover {\n    button {\n      display: inline-flex;\n    }\n    .workspace-list-buttons {\n      display: block;\n    }\n  }\n"]);return Z=function(){return e},e}var q,G,Q,Y,$=l.a.li(Z()),ee=Object(l.a)(p.t)(X()),te=function(e){var t=e.actions,a=e.dictionary,n=e.item,r=Object(S.A)(n.members.map((function(e){return e.id}))),c="external"===Object(s.useSelector)((function(e){return e.session.user})).type,i=function(e,a){var n={id:a.topic.id,name:a.topic.name,folder_id:a.workspace?a.workspace.id:null,folder_name:a.workspace?a.workspace.name:null};t.toWorkspace(n)};return o.a.createElement($,{className:"list-group-item"},o.a.createElement("div",{className:"workspace-icon mr-3"},n.topic.is_favourite&&o.a.createElement(ee,{icon:"star"}),o.a.createElement(p.a,{forceThumbnail:!1,type:"TOPIC",imageLink:n.topic.icon_link,id:n.topic.id,name:n.topic.name,onClick:function(e){return i(0,n)},showSlider:!1})),o.a.createElement(I,{dictionary:a,isExternal:c,isMember:r,item:n,onRedirect:i}),o.a.createElement(U,{actions:t,dictionary:a,isExternal:c,isMember:r,item:n}))},ae=l.a.div(q||(q=Object(c.a)(["\n  overflow: visible !important;\n"]))),ne=l.a.li(G||(G=Object(c.a)(["\n  border: none;\n  cursor: pointer;\n  .badge.badge-light {\n    background: #f1f2f7;\n  }\n"]))),re=l.a.ul(Q||(Q=Object(c.a)(["\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  li {\n    padding: 15px;\n  }\n  li:nth-child(2) {\n    border-top: none;\n  }\n  &.active-workspaces {\n    border-radius 6px 6px 0 0;\n  }\n  &.archived-workspaces {\n    .dark & {\n      border: 1px solid;\n      border-top: 0;\n      border-color: hsla(0,0%,60.8%,.1);\n      border-radius: 0 0 6px 6px;\n      background: #252a2d;\n    }\n  }\n  &.archived-workspaces li {\n    background-color: #fafafa;\n    opacity: .7;\n    .dark & {\n      background-color: #252a2d;\n    }\n  }\n  &.archived-workspaces li:last-child {\n    border-radius 0 0 6px 6px;\n    border-bottom: none;\n  }\n"]))),ce=function(e){var t=e.actions,a=e.dictionary,n=e.filterBy,c=e.results,l=Object(i.useState)({showActive:!0,showArchived:!0}),s=Object(r.a)(l,2),m=s[0],u=s[1],d=Object(i.useState)({activeDate:!0,archivedDate:!0}),b=Object(r.a)(d,2),f=b[0],h=b[1],v=function(e){u(Object(N.a)(Object(N.a)({},m),{},Object(C.a)({},e,!m[e])))},E=function(e){h(Object(N.a)(Object(N.a)({},f),{},Object(C.a)({},e,!f[e])))};return o.a.createElement(ae,{className:"card"},o.a.createElement(re,{className:"active-workspaces"},o.a.createElement(ne,{className:"list-group-item"},o.a.createElement("span",{className:"badge badge-light",onClick:function(){return v("showActive")}},o.a.createElement(p.t,{icon:m.showActive?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),a.active),o.a.createElement("div",{style:{float:"right"}},o.a.createElement(p.u,{content:f.activeDate?a.workspaceSortOptionsDate:a.workspaceSortOptionsAlpha},o.a.createElement("span",{className:"badge badge-light",onClick:function(){return E("activeDate")}},o.a.createElement(p.t,{icon:f.activeDate?"arrow-down":"arrow-up",width:16,height:16,className:"mr-1"}))))),m.showActive&&c.filter((function(e){return"favourites"===n?!e.topic.is_archive&&e.topic.is_favourite:!e.topic.is_archive})).sort((function(e,t){return f.activeDate?new Date(t.topic.created_at)-new Date(e.topic.created_at):e.topic.name.toLowerCase()<t.topic.name.toLowerCase()?-1:e.topic.name.toLowerCase()>t.topic.name.toLowerCase()?1:0})).map((function(e){return o.a.createElement(te,{actions:t,key:e.topic.id,dictionary:a,item:e})}))),o.a.createElement(re,{className:"archived-workspaces"},o.a.createElement(ne,{className:"list-group-item"},o.a.createElement("span",{className:"badge badge-light",onClick:function(){return v("showArchived")}},o.a.createElement(p.t,{icon:m.showArchived?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),a.archived),o.a.createElement("div",{style:{float:"right"}},o.a.createElement(p.u,{content:f.archivedDate?a.workspaceSortOptionsDate:a.workspaceSortOptionsAlpha},o.a.createElement("span",{className:"badge badge-light",onClick:function(){return E("archivedDate")}},o.a.createElement(p.t,{icon:f.archivedDate?"arrow-down":"arrow-up",width:16,height:16,className:"mr-1"}))))),m.showArchived&&c.filter((function(e){return"favourites"===n?e.topic.is_archive&&e.topic.is_favourite:e.topic.is_archive})).sort((function(e,t){return f.archivedDate?new Date(t.topic.created_at)-new Date(e.topic.created_at):e.topic.name.toLowerCase()<t.topic.name.toLowerCase()?-1:e.topic.name.toLowerCase()>t.topic.name.toLowerCase()?1:0})).map((function(e){return o.a.createElement(te,{actions:t,key:e.topic.id,dictionary:a,item:e})}))))},ie=a(52),oe=l.a.div(Y||(Y=Object(c.a)(["\n  overflow: hidden auto;\n  .app-block {\n    overflow: inherit;\n    .app-content {\n      height: auto;\n    }\n  }\n"])));t.default=function(e){var t=Object(s.useSelector)((function(e){return e.workspaces.search})),a=t.hasMore,c=t.results,l=t.filterBy,m=t.value,u=Object(S.cb)()._t,d=Object(S.mb)(),p=Object(i.useState)(!1),b=Object(r.a)(p,2),f=b[0],h=b[1],v=Object(i.useState)(!1),E=Object(r.a)(v,2),g=E[0],w=E[1];Object(i.useEffect)((function(){document.body.classList.add("stretch-layout"),d.getFilterCount()}),[]),Object(i.useEffect)((function(){d.updateSearch({searching:!0,results:[]}),w(!0),d.search({search:m,skip:0,limit:25,filter_by:l},(function(e,t){w(!1),e?d.updateSearch({searching:!1}):d.updateSearch({filterBy:l,searching:!1,count:t.data.total_count,hasMore:t.data.has_more,results:t.data.workspaces,maxPage:Math.ceil(t.data.total_count/25)})}))}),[l,m]);var O={notJoined:u("ALL_WORKSPACE.NOT_JOINED","Not joined"),withClient:u("ALL_WORKSPACE.WITH_CLIENT","With client"),searchWorkspacePlaceholder:u("PLACEHOLDER.SEARCH_WORKSPACE_TITLE","Search workspace"),filters:u("PLACEHOLDER.SEARCH_WORKSPACE_FILTER","Filters","Filters"),private:u("WORKSPACE.PRIVATE","Private"),archived:u("WORKSPACE.ARCHIVED","Archived"),new:u("WORKSPACE.NEW","New"),active:u("ALL_WORKSPACE.ACTIVE","Active"),labelOpen:u("LABEL.OPEN","Open"),labelJoined:u("LABEL.JOINED","Joined"),buttonJoin:u("BUTTON.JOIN","Join"),buttonLeave:u("BUTTON.LEAVE","Leave"),externalAccess:u("WORKSPACE_SEARCH.EXTERNAL_ACCESS","External access"),addNewWorkspace:u("SIDEBAR.ADD_NEW_WORKSPACES","Add new workspace"),favourites:u("WORKSPACE.FAVOURITES","Favourites"),all:u("ALL_WORKSPACE.ALL","All"),workspaceSortOptionsAlpha:u("WORKSPACE_SORT_OPTIONS.ALPHA","Sort by Alphabetical Order (A-Z)"),workspaceSortOptionsDate:u("WORKSPACE_SORT_OPTIONS.DATE","Sort by Date (New to Old)")},N=Object(i.useMemo)((function(){var e=Object(ie.throttle)((function(e){e.target.scrollHeight-e.target.scrollTop<1500&&h(!0)}),300);return function(t){return t.persist(),e(t)}}),[]);return Object(i.useEffect)((function(){f&&!g&&a&&d.search({search:m,skip:c.length,limit:25,filter_by:l},(function(e,t){w(!1),h(!1),e?d.updateSearch({searching:!1}):d.updateSearch({filterBy:l,searching:!1,hasMore:t.data.has_more,count:t.data.total_count,results:[].concat(Object(n.a)(c),Object(n.a)(t.data.workspaces)),maxPage:Math.ceil(t.data.total_count/25)})}))}),[f]),o.a.createElement(oe,{className:"container-fluid h-100 fadeIn",onScroll:N},o.a.createElement("div",{className:"row app-block"},o.a.createElement(k,{actions:d,dictionary:O,filterBy:l,counters:t.counters}),o.a.createElement("div",{className:"col-lg-9 app-content mb-4"},o.a.createElement("div",{className:"app-content-overlay"}),o.a.createElement(j,{actions:d,dictionary:O,search:t}),o.a.createElement(ce,{actions:d,dictionary:O,filterBy:l,results:c}))))}}}]);