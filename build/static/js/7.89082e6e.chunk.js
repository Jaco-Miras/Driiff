(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[7],{716:function(e,a,t){"use strict";t.r(a);var n,l=t(12),c=t(1),m=t(6),i=t(2),r=t(0),d=t.n(r),o=t(5),s=t(39),b=t(706),f=t(700),u=t(702),p=t(699),E=t(701),O=t(238),v=t(3),j=t(14),N=t(13),g=t(7),x=t(74),k=t(242),h=t(9),_=t(23),w=v.a.div(n||(n=Object(i.a)(["\n  overflow: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  .row-user-profile-panel {\n    justify-content: center;\n\n    .avatar {\n      width: 68px;\n      height: 68px;\n    }\n\n    input.designation {\n      &::-webkit-input-placeholder {\n        font-size: 12px;\n      }\n      &:-ms-input-placeholder {\n        font-size: 12px;\n      }\n      &::placeholder {\n        font-size: 12px;\n      }\n    }\n\n    .col-label {\n      max-width: 130px;\n\n      @media only screen and (min-width: 1200px) {\n        max-width: 180px;\n      }\n    }\n  }\n\n  .close {\n    border-radius: 100%;\n    padding: 2px;\n  }\n\n  label {\n    padding: 5px 10px;\n    border-radius: 6px;\n    width: 100%;\n  }\n\n  .btn-toggle {\n    &:hover {\n      .input-group-text {\n        border: 1px solid #e1e1e1;\n        background: #fff;\n        color: #7a1b8b;\n      }\n    }\n    .input-group-text {\n      border: 1px solid #7a1b8b;\n      background: #7a1b8b;\n      color: #fff;\n    }\n    svg {\n      cursor: pointer;\n    }\n  }\n\n  .avatar-container {\n    cursor: pointer;\n    position: relative;\n    width: 68px;\n    height: 68px;\n    margin: 0 auto;\n\n    .btn {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      background-color: #fff;\n      border-radius: 50px 50px 50px 50px;\n      height: 25px;\n      width: 25px;\n      padding: 5px;\n    }\n  }\n\n  .form-group {\n    &.designation {\n      margin: 0 auto;\n      width: 66.66%;\n    }\n  }\n"])));a.default=d.a.memo((function(e){var a=e.className,t=void 0===a?"":a,n=Object(s.g)(),i=Object(o.useDispatch)(),v=Object(h.X)(),y=Object(h.gb)(),T=y.users,S=y.loggedUser,C=Object(h.eb)(),F=C.checkEmail,P=C.fetchById,I=C.getReadOnlyFields,R=C.getRequiredFields,L=C.update,A=C.updateProfileImage,B=Object(h.fb)().selectUserChannel,D=T[e.match.params.id],V=D&&S.id===D.id,M=I(D?D.import_from:""),q=R(D?D.import_from:""),U=Object(r.useState)(!1),Z=Object(m.a)(U,2),z=Z[0],J=Z[1],G=Object(r.useState)(!1),H=Object(m.a)(G,2),W=H[0],X=H[1],Y=Object(r.useState)(!1),K=Object(m.a)(Y,2),Q=K[0],$=K[1],ee=Object(r.useState)(!1),ae=Object(m.a)(ee,2),te=ae[0],ne=ae[1],le=Object(r.useState)(D&&D.loaded?D:{}),ce=Object(m.a)(le,2),me=ce[0],ie=ce[1],re=Object(r.useState)({valid:{},feedbackState:{},feedbackText:{}}),de=Object(m.a)(re,2),oe=de[0],se=de[1],be={dropZoneRef:Object(r.useRef)(null),first_name:Object(r.useRef)(null),password:Object(r.useRef)(null)},fe=Object(h.cb)()._t,ue={companyName:fe("PROFILE.COMPANY_NAME","Company name"),information:fe("PROFILE.INFORMATION","Information"),firstName:fe("PROFILE.FIRST_NAME","First name:"),middleName:fe("PROFILE.MIDDLE_NAME","Middle name:"),lastName:fe("PROFILE.LAST_NAME","Last name:"),password:fe("PROFILE.PASSWORD","Password:"),position:fe("PROFILE.POSITION","Position:"),city:fe("PROFILE.CITY","City:"),address:fe("PROFILE.ADDRESS","Address:"),zip_code:fe("PROFILE.ZIP_POST_CODE","ZIP/POST code:"),phone:fe("PROFILE.Phone","Phone:"),email:fe("PROFILE.EMAIL","Email:"),edit:fe("BUTTON.EDIT","Edit"),saveChanges:fe("BUTTON.SAVE_CHANGES","Save changes"),cancel:fe("BUTTON.Cancel","Cancel"),clickToChangePassword:fe("PROFILE.CLICK_TO_CHANGE_PASSWORD","Click to change your password"),external:fe("PROFILE.EXTERNAL","External")},pe=S&&"internal"===S.type&&D&&"external"===D.type&&1===D.active||S&&S.role&&("admin"===S.role.name||"owner"===S.role.name),Ee=function(e){if("boolean"===typeof e)return e?"is-valid":"is-invalid"},Oe=function(){J((function(e){return!e})),ie(Object(c.a)({},D)),se({valid:{},feedbackState:{},feedbackText:{}}),$(!1)},ve=function(e){if(null!==e.target){var a=e.target,t=a.name,n=a.value;ie((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(l.a)({},t,n.trim()))}))}},je=function(e){if(null!==e.target){var a=e.target,t=a.name,n=a.value;if(D[t]===me[t])return void se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,void 0)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,void 0)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,void 0))}}));"email"===t?q.includes(t)&&""===n.trim()?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Email is required"))}})):""===n.trim()||j.a.test(n.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Email is already taken"))}})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!0)),feedbackState:Object(c.a)({},e.feedbackState),feedbackText:Object(c.a)({},e.feedbackText)}})))})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Invalid email format"))}})):q.includes(t)?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,""!==n.trim())),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,""!==n.trim())),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,""===n.trim()?"Field is required.":""))}})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!0)),feedbackState:e.feedbackState,feedbackText:e.feedbackText}}))}},Ne=function(){ne(!1)},ge=function(e,a){ie((function(e){return Object(c.a)(Object(c.a)({},e),{},{profile_image_link:a})})),se((function(a){return{valid:Object(c.a)(Object(c.a)({},a.valid),{},{profile_image_link:!0}),feedbackState:Object(c.a)({},a.feedbackState),feedbackText:Object(c.a)(Object(c.a)({},a.feedbackText),{},{profile_image_link:e})}})),J(!0),v.info(d.a.createElement(d.a.Fragment,null,"Click the ",d.a.createElement("b",null,"Save Changes")," button to update your profile image."))};return Object(r.useEffect)((function(){(!e.match.params.hasOwnProperty("id")||e.match.params.hasOwnProperty("id")&&!e.match.params.hasOwnProperty("name")&&parseInt(e.match.params.id)===S.id)&&n.push("/profile/".concat(S.id,"/").concat(Object(j.h)(S.name)))}),[]),Object(r.useEffect)((function(){var a=T[e.match.params.id]?T[e.match.params.id]:{};a.hasOwnProperty("loaded")?me.id!==a.id&&ie(a):P(e.match.params.id)}),[e.match.params.id,T,ie]),Object(r.useEffect)((function(){"edit"===e.match.params.mode&&me.id&&S.id===me.id&&(n.push("/profile/".concat(me.id,"/").concat(Object(j.h)(me.name))),J(!0)),"view"===e.match.params.mode&&me.id&&S.id===me.id&&(n.push("/profile/".concat(me.id,"/").concat(Object(j.h)(me.name))),J(!1))}),[me,e.match.params.mode]),Object(r.useEffect)((function(){Q&&be.password.current&&be.password.current.focus()}),[Q,be.password]),Object(r.useEffect)((function(){z&&be.first_name.current&&be.first_name.current.focus()}),[z,be.first_name]),T[e.match.params.id]?d.a.createElement(w,{className:"user-profile-panel container-fluid h-100 ".concat(t)},d.a.createElement("div",{className:"row row-user-profile-panel"},d.a.createElement("div",{className:"col-12 col-lg-5 col-xl-6"},d.a.createElement("div",{className:"card"},d.a.createElement("div",{className:"card-body text-center",onDragOver:function(){te||ne(!0)}},(V||pe)&&d.a.createElement(x.a,{acceptType:"imageOnly",hide:!te,ref:be.dropZoneRef,onDragLeave:Ne,onDrop:function(e){!function(e){0===e.length?v.error("File type not allowed. Please use an image file."):e.length>1&&v.warning("Multiple files detected. First selected image will be used.");var a={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:ge};i(Object(N.a)(a,(function(){Ne()})))}(e.acceptedFiles)},onCancel:Ne}),d.a.createElement("div",{className:"avatar-container"},d.a.createElement(g.a,{imageLink:me.profile_image_link,name:me.name?me.name:me.email,noDefaultClick:!0,forceThumbnail:!1}),(V||pe)&&d.a.createElement("span",{className:"btn btn-outline-light btn-sm"},d.a.createElement(g.s,{icon:"pencil",onClick:function(){z||J(!0),be.dropZoneRef.current.open()}}))),z?d.a.createElement("h5",{className:"mb-1 mt-2"},me.first_name," ",me.middle_name," ",me.last_name):d.a.createElement("h5",{className:"mb-1 mt-2"},D.first_name," ",D.middle_name," ",D.last_name),z&&!M.includes("designation")?d.a.createElement("div",{className:"text-muted small d-flex align-items-center mt-2"},d.a.createElement(_.e,{placeholder:"Job Title eg. Manager, Team Leader, Designer",className:"designation",name:"designation",onChange:ve,onBlur:je,defaultValue:D.designation,isValid:oe.feedbackState.designation,valid:oe.feedbackText.designation})):d.a.createElement("p",{className:"text-muted small"},D.designation),S.id!==D.id&&d.a.createElement("div",{className:"d-flex justify-content-center"},""!==D.contact&&"internal"===S.type&&d.a.createElement("button",{className:"btn btn-outline-light mr-1"},d.a.createElement("a",{href:"tel:".concat(D.contact.replace(/ /g,"").replace(/-/g,""))},d.a.createElement(g.s,{className:"",icon:"phone"}))),"external"!==D.type&&"internal"===S.type&&d.a.createElement("button",{className:"ml-1 btn btn-outline-light"},d.a.createElement(g.s,{onClick:function(){!function(e){B(e)}(D)},icon:"message-circle"}))))),d.a.createElement("div",{className:"card"},z?d.a.createElement("div",{className:"card-body"},d.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),d.a.createElement("div",{className:"col col-form"},M.includes("first_name")?d.a.createElement(b.a,null,D.first_name):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(oe.valid.first_name),innerRef:be.first_name,name:"first_name",onChange:ve,onBlur:je,defaultValue:D.first_name}),d.a.createElement(k.a,{valid:oe.feedbackState.first_name},oe.feedbackText.first_name)))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),d.a.createElement("div",{className:"col col-form"},M.includes("middle_name")?d.a.createElement(b.a,null,D.middle_name):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(oe.valid.middle_name),name:"middle_name",onChange:ve,onBlur:je,defaultValue:D.middle_name}),d.a.createElement(k.a,{valid:oe.feedbackState.middle_name},oe.feedbackText.middle_name)))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),d.a.createElement("div",{className:"col col-form"},M.includes("last_name")?d.a.createElement(b.a,null,D.last_name):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(oe.valid.last_name),name:"last_name",onChange:ve,onBlur:je,defaultValue:D.last_name}),d.a.createElement(k.a,{valid:oe.feedbackState.last_name},oe.feedbackText.last_name)))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.password),d.a.createElement("div",{className:"col col-form"},M.includes("password")||pe?d.a.createElement(b.a,null,"*****"):d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,{onClick:function(){$((function(e){return!e}))},className:"cursor-pointer mb-0 ".concat(Q?"d-none":"")},ue.clickToChangePassword),d.a.createElement(u.a,{className:"form-group-password mb-0 ".concat(Q?"":"d-none")},d.a.createElement(p.a,null,d.a.createElement(f.a,{className:Ee(oe.valid.password),innerRef:be.password,name:"password",onChange:ve,onBlur:je,defaultValue:"",type:W?"text":"password"}),d.a.createElement(E.a,{className:"btn-toggle",addonType:"append"},d.a.createElement(O.a,{className:"btn",onClick:function(){X((function(e){return!e}))}},d.a.createElement(g.s,{icon:W?"eye-off":"eye"})))),d.a.createElement(k.a,{valid:oe.feedbackState.password},oe.feedbackText.password))))),"external"===D.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),d.a.createElement("div",{className:"col col-form"},M.includes("company_name")?d.a.createElement(b.a,null,D.external_company_name&&D.external_company_name):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(!0),name:"company_name",disabled:pe||!V,onChange:ve,onBlur:je,defaultValue:D.external_company_name?D.external_company_name:""})))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.city),d.a.createElement("div",{className:"col col-form"},M.includes("place")?d.a.createElement(b.a,null,D.place):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(oe.valid.place),name:"place",disabled:pe||!V,onChange:ve,onBlur:je,defaultValue:D.place}),d.a.createElement(k.a,{valid:oe.feedbackState.place},oe.feedbackText.place)))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.address),d.a.createElement("div",{className:"col col-form"},M.includes("address")?d.a.createElement(b.a,null,D.address):d.a.createElement(d.a.Fragment,null,d.a.createElement(_.e,{name:"address",disabled:pe||!V,onChange:ve,onBlur:je,defaultValue:D.address,isValid:oe.feedbackState.address,feedback:oe.feedbackText.address})))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.phone),d.a.createElement("div",{className:"col col-form"},M.includes("contact")?d.a.createElement(b.a,null,D.contact):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{className:Ee(oe.valid.contact),name:"contact",disabled:pe||!V,onChange:ve,onBlur:je,defaultValue:D.contact}),d.a.createElement(k.a,{valid:oe.feedbackState.contact},oe.feedbackText.contact)))),d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.email),d.a.createElement("div",{className:"col col-form"},M.includes("email")?d.a.createElement(b.a,null,D.email):d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{type:"email",className:Ee(oe.valid.email),name:"email",onChange:ve,onBlur:je,defaultValue:D.email}),d.a.createElement(k.a,{valid:oe.feedbackState.email},oe.feedbackText.email)))),d.a.createElement("hr",null),d.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-0"},d.a.createElement("div",null,"\xa0"),d.a.createElement("div",null,d.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light mr-2"},ue.cancel),d.a.createElement("span",{onClick:function(){!1===Object.values(oe.valid).find((function(e){return!1===e}))?v.error("Some fields require your attention."):!0===Object.values(oe.valid).find((function(e){return!0===e}))?me.profile_image_link!==D.profile_image_link?A(me,oe.feedbackText.profile_image_link,(function(e,a){a&&J(!1)})):pe?D.email!==me.email?L(Object(c.a)(Object(c.a)({},me),{},{change_email:1}),(function(e,a){a&&J(!1)})):L(Object(c.a)({},me),(function(e,a){a&&J(!1)})):L(me,(function(e,a){a&&J(!1)})):(D&&me.email&&D.email!==me.email?q.includes("email")&&""===me.email.trim()?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Email is required"})}})):""===me.email.trim()||j.a.test(me.email.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Email is already taken"})}})):pe?D.email!==me.email?L(Object(c.a)(Object(c.a)({},me),{},{change_email:1}),(function(e,a){a&&J(!1)})):L(Object(c.a)({},me),(function(e,a){a&&J(!1)})):L(me,(function(e,a){a&&J(!1)})))})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Invalid email format"})}})):v.info("Nothing was updated."),J(!1))},className:"btn btn-primary"},ue.saveChanges)))):d.a.createElement("div",{className:"card-body"},d.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information,V||pe?d.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light btn-sm"},d.a.createElement(g.s,{className:"mr-2",icon:"edit-2"})," ",ue.edit):null),D.first_name&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),d.a.createElement("div",{className:"col col-form"},D.first_name)),D.middle_name&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),d.a.createElement("div",{className:"col col-form"},D.middle_name)),D.last_name&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),d.a.createElement("div",{className:"col col-form"},D.last_name)),D.id===S.id&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.password),d.a.createElement("div",{className:"col col-form"},"*****")),"external"===D.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),d.a.createElement("div",{className:"col col-form"},D.external_company_name&&D.external_company_name)),D.role&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.position),d.a.createElement("div",{className:"col col-form"},"external"===D.type?ue.external:D.role.name)),D.place&&"internal"===S.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.city),d.a.createElement("div",{className:"col col-form"},D.place)),D.address&&"internal"===S.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.address),d.a.createElement("div",{className:"col col-form"},D.address)),D.contact&&"internal"===S.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.phone),d.a.createElement("div",{className:"col col-form"},D.contact)),D.email&&"internal"===S.type&&d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col col-label text-muted"},ue.email),d.a.createElement("div",{className:"col col-form cursor-pointer",onClick:function(){window.location.href="mailto:".concat(D.email)}},D.email))))))):d.a.createElement(d.a.Fragment,null)}))}}]);