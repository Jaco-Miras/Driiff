(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[17],{638:function(e,n,t){!function(e,n){"use strict";var t=function(){function e(e,n,t){this.r=0,this.g=0,this.b=0,this.set(e,n,t)}return e.prototype.isLight=function(){return(299*this.r+587*this.g+114*this.b)/1e3>128},e.prototype.set=function(e,n,t){this.r=this.clamp(e),this.g=this.clamp(n),this.b=this.clamp(t)},e.prototype.hueRotate=function(e){void 0===e&&(e=0),e=e/180*Math.PI;var n=Math.sin(e),t=Math.cos(e);this.multiply([.213+.787*t-.213*n,.715-.715*t-.715*n,.072-.072*t+.928*n,.213-.213*t+.143*n,.715+.285*t+.14*n,.072-.072*t-.283*n,.213-.213*t-.787*n,.715-.715*t+.715*n,.072+.928*t+.072*n])},e.prototype.grayscale=function(e){void 0===e&&(e=1),this.multiply([.2126+.7874*(1-e),.7152-.7152*(1-e),.0722-.0722*(1-e),.2126-.2126*(1-e),.7152+.2848*(1-e),.0722-.0722*(1-e),.2126-.2126*(1-e),.7152-.7152*(1-e),.0722+.9278*(1-e)])},e.prototype.sepia=function(e){void 0===e&&(e=1),this.multiply([.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e)])},e.prototype.saturate=function(e){void 0===e&&(e=1),this.multiply([.213+.787*e,.715-.715*e,.072-.072*e,.213-.213*e,.715+.285*e,.072-.072*e,.213-.213*e,.715-.715*e,.072+.928*e])},e.prototype.multiply=function(e){var n=this.clamp(this.r*e[0]+this.g*e[1]+this.b*e[2]),t=this.clamp(this.r*e[3]+this.g*e[4]+this.b*e[5]),i=this.clamp(this.r*e[6]+this.g*e[7]+this.b*e[8]);this.r=n,this.g=t,this.b=i},e.prototype.brightness=function(e){void 0===e&&(e=1),this.linear(e)},e.prototype.contrast=function(e){void 0===e&&(e=1),this.linear(e,-.5*e+.5)},e.prototype.linear=function(e,n){void 0===e&&(e=1),void 0===n&&(n=0),this.r=this.clamp(this.r*e+255*n),this.g=this.clamp(this.g*e+255*n),this.b=this.clamp(this.b*e+255*n)},e.prototype.invert=function(e){void 0===e&&(e=1),this.r=this.clamp(255*(e+this.r/255*(1-2*e))),this.g=this.clamp(255*(e+this.g/255*(1-2*e))),this.b=this.clamp(255*(e+this.b/255*(1-2*e)))},e.prototype.hsl=function(){var e,n,t=this.r/255,i=this.g/255,a=this.b/255,r=Math.max(t,i,a),s=Math.min(t,i,a),o=(r+s)/2;if(r===s)e=n=0;else{var l=r-s;switch(n=o>.5?l/(2-r-s):l/(r+s),r){case t:e=(i-a)/l+(i<a?6:0);break;case i:e=(a-t)/l+2;break;case a:e=(t-i)/l+4;break;default:e=0}e/=6}return{h:100*e,s:100*n,l:100*o}},e.prototype.clamp=function(e){return e>255?e=255:e<0&&(e=0),e},e}(),i=function(){function e(e,n){this.options={acceptanceLossPercentage:5,maxChecks:15},this.target=e,this.targetHSL=e.hsl(),this.isTargetColorLight=e.isLight(),this.reusedColor=new t(0,0,0),n&&(this.options=Object.assign({},this.options,n))}return e.prototype.solve=function(){var e=this.solveNarrow(this.solveWide());return{values:e.values,called:e.called,loss:e.loss,filter:this.css(e.values)}},e.prototype.solveWide=function(){for(var e=[60,180,18e3,600,1.2,1.2],n={loss:1/0},t=0;n.loss>this.options.acceptanceLossPercentage;){var i=this.spsa(5,e,15,[50,20,3750,50,100,100],1e3);if(i.loss<n.loss&&(n=i),(t+=1)>=this.options.maxChecks)break}return Object.assign({},n,{called:t})},e.prototype.solveNarrow=function(e){var n=e.loss,t=n+1,i=[.25*t,.25*t,t,.25*t,.2*t,.2*t];return this.spsa(n,i,2,e.values,500,e.called)},e.prototype.spsa=function(e,n,t,i,a,r){void 0===r&&(r=0);var s=null,o=1/0,l=new Array(6),c=new Array(6),p=new Array(6);function h(e,n){var t=100;return 2===n?t=7500:4!==n&&5!==n||(t=200),3===n?e>t?e%=t:e<0&&(e=t+e%t):e<0?e=0:e>t&&(e=t),e}for(var d=0;d<a;d++){for(var u=t/Math.pow(d+1,.16666666666666666),f=0;f<6;f++)l[f]=Math.random()>.5?1:-1,c[f]=i[f]+u*l[f],p[f]=i[f]-u*l[f];var m=this.loss(c)-this.loss(p);for(f=0;f<6;f++){var g=m/(2*u)*l[f],b=n[f]/Math.pow(e+d+1,1);i[f]=h(i[f]-b*g,f)}var x=this.loss(i);x<o&&(s=i.slice(0),o=x)}return{values:s,loss:o,called:r}},e.prototype.loss=function(e){var n=this.reusedColor;this.isTargetColorLight?n.set(255,255,255):n.set(0,0,0),n.invert(e[0]/100),n.sepia(e[1]/100),n.saturate(e[2]/100),n.hueRotate(3.6*e[3]),n.brightness(e[4]/100),n.contrast(e[5]/100);var t=n.hsl();return Math.abs(n.r-this.target.r)+Math.abs(n.g-this.target.g)+Math.abs(n.b-this.target.b)+Math.abs(t.h-this.targetHSL.h)+Math.abs(t.s-this.targetHSL.s)+Math.abs(t.l-this.targetHSL.l)},e.prototype.css=function(e){var n=function(n,t){return void 0===t&&(t=1),Math.round(e[n]*t)};return["brightness(0)","invert("+n(0)+"%)","sepia("+n(1)+"%)","saturate("+n(2)+"%)","hue-rotate("+n(3,3.6)+"deg)","brightness("+n(4)+"%)","contrast("+n(5)+"%);"].join(" ")},e}(),a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r={};e.hexToCSSFilter=function(e,s){var o,l,c,p,h;if(void 0===s&&(s={}),r[e])return r[e];try{if(l=(o=n.__read(function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,n,t,i){return n+n+t+t+i+i}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}(e),3))[0],c=o[1],p=o[2],!a(l)||!a(c)||!a(p))throw new Error("hextToRgb returned an invalid value for '"+e+"'");h=new t(Number(l),Number(c),Number(p))}catch(f){throw new Error("Color value should be in HEX format. "+f)}var d=Object.assign({},{acceptanceLossPercentage:5,maxChecks:15},s),u=new i(h,d);return r[e]=Object.assign({},u.solve(),{hex:e,rgb:[l,c,p]}),r[e]},Object.defineProperty(e,"__esModule",{value:!0})}(n,t(8))},738:function(e,n,t){"use strict";t.r(n);var i,a,r,s,o,l,c,p,h,d,u,f,m,g,b,x,w,y,v,A,C,_,E,O,k,j,M,F,R=t(0),L=t(117),N=t(118),S=t(206),B=t(203),T=t(9),I=t(1),P=t.n(I),z=t(627),H=t(5),D=t(36),V=t(10),q=t(19),U=t(11),Y=t(638),G=(t(291),t(12)),W=t(665),J=t(666),K=t(667),Q=V.a.div(i||(i=Object(T.a)(["\n  position: relative;\n  display: inline-flex;\n  flex-flow: column;\n  padding: ",";\n  border-radius: 6px;\n  background: ",";\n  text-align: left;\n  width: 100%;\n  color: ",";\n  font-size: 0.835rem;\n  overflow: visible;\n  min-height: ",";\n\n  &:after {\n    border: 10px solid #0000;\n    position: absolute;\n    top: 6px;\n    z-index: 1;\n    ",";\n    border-left-color: ",";\n    border-right-color: ",";\n    height: 5px;\n  }\n\n  a:not([href]):not([tabindex]) {\n    color: ",";\n\n    &:hover {\n      color: ",";\n    }\n  }\n\n  video {\n    width: 100%;\n  }\n  p.reply-author {\n    color: ",";\n    font-weight: 400;\n    font-size: 12px;\n    font-style: italic;\n    margin: 0;\n    display: block;\n    position: absolute;\n    top: -24px;\n    left: 0;\n    white-space: nowrap;\n    ","\n  }\n  span.emoticon-body {\n    font-size: 2.5rem;\n    padding: 20px 10px;\n    text-align: ",";\n  }\n  .reply-content img {\n    max-width: 100%;\n    max-height: 300px;\n  }\n  span.reply-date {\n    color: ",";\n    font-style: italic;\n    font-size: 11px;\n    position: absolute;\n    top: 0;\n    ",";\n    display: flex;\n    height: 100%;\n    text-align: ",";\n    white-space: nowrap;\n  }\n  ol {\n    text-align: left;\n    position: relative;\n    padding-inline-start: 0;\n    li {\n      margin-left: 0;\n    }\n  }\n  ul {\n    li {\n      text-align: left;\n      position: relative;\n      margin-left: 0;\n    }\n  }\n  span.is-deleted {\n    font-style: italic;\n    color: ",";\n  }\n  span.image-uploading {\n    display: none;\n  }\n  .chat-file-notification {\n    b:hover {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  }\n  a.a_fancy { \n    border-radius: 5px !important;\n    background-color: #FFF !important;\n    box-shadow: 0 1px 1px 0 rgba(0,0,0,0.11) !important; \n    text-decoration: none !important;\n    display: inline-block;\n    height: auto !important;\n    padding:5px 10px;\n    margin-bottom: 5px;\n    color: #000 !important;\n    font-family: Inter !important;\n    font-size: 13px !important;\n    letter-spacing: 0 !important;\n    line-height: 21px !important;\n    margin-right: 1pt;\n    margin-left: 1pt;\n  }\n"])),(function(e){return e.hasFiles?"3px":"6px 9px 8px 9px"}),(function(e){return e.isAuthor?"#7A1B8B":"#F0F0F0"}),(function(e){return e.isAuthor?"#ffffff":"#000000"}),(function(e){return e.hasGif?"150px":"33px"}),(function(e){return e.isAuthor?"right: -16px":"left: -15px"}),(function(e){return e.isAuthor?"#7A1B8B":"#0000"}),(function(e){return e.isAuthor?"#0000":"#F0F0F0"}),(function(e){return e.isAuthor?"#ffffff":"#8C3B9B"}),(function(e){return e.isAuthor?"#fff":"#0056b3"}),(function(e){return e.isAuthor?"#ffffff":"#AAB0C8"}),(function(e){return!0===e.isForwardedMessage&&"top: -40px;"}),(function(e){return e.isAuthor?"right":"left"}),(function(e){return e.showAvatar&&!1===e.hideBg||e.hasRemoveOnDlFiles?"#a7abc3":"#0000"}),(function(e){return e.isAuthor?"right: 100%":"left: 100%"}),(function(e){return e.isAuthor?"right":"left"}),(function(e){return e.isAuthor?"#ffffffe6":"#AAB0C8"})),X=V.a.div(a||(a=Object(T.a)(["\n  background: ",";\n  border-radius: 6px;\n  margin: 4px -4px 4px -4px;\n  text-align: left;\n  padding: 10px 10px 10px 20px;\n  position: relative;\n  cursor: pointer;\n  max-width: ",";\n  &:before {\n    height: 70%;\n    width: 5px;\n    background: ",";\n    background: #ffffffe6;\n    position: absolute;\n    ",";\n    display: inline-block;\n    float: left;\n    left: 5px;\n    opacity: 0.8;\n    @media all and (max-width: 620px) {\n      display: none;\n    }\n  }\n  @media all and (max-width: 620px) {\n    margin: 7px -7px 10px -7px;\n    padding: 7px;\n  }\n"])),(function(e){return e.isAuthor?"#8C3B9B":"#E4E4E4"}),(function(e){return e.hasFiles?"210px":"auto"}),(function(e){return e.isAuthor?"#8C3B9B":"#E4E4E4"}),(function(e){return!e.isEmoticonOnly&&"content: ''"})),$=V.a.div(r||(r=Object(T.a)(["\n  font-weight: 600;\n  @media all and (max-width: 620px) {\n    font-size: 11px;\n    line-height: 1.2;\n    font-weight: normal;\n  }\n"]))),Z=V.a.div(s||(s=Object(T.a)(["\n  color: ",";\n  max-width: 100%;\n  img,\n  video {\n    display: none;\n  }\n  .video-quote,\n  .image-quote {\n    img {\n      width: auto;\n      display: inline-block;\n    }\n  }\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre-wrap;\n  a {\n    color: ",";\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n\n    @media only screen and (max-width: 1024px) {\n      white-space: normal;\n      word-break: break-word;\n\n      &:hover {\n        word-break: unset;\n      }\n    }\n\n    &:hover {\n      overflow: unset;\n      white-space: unset;\n      text-overflow: unset;\n      word-break: break-word;\n    }\n  }\n"])),(function(e){return e.isAuthor?"#ffffffe6":"#000000"}),(function(e){return e.isAuthor?"#ffffffe6":"#8C3B9B"})),ee=Object(V.a)(W.a)(o||(o=Object(T.a)(["\n  img {\n    cursor: pointer;\n  }\n  a {\n    font-weight: bold;\n    cursor: pointer;\n  }\n  .reply-file-item {\n    display: block;\n    font-weight: bold;\n\n    &.component-image-text-link {\n      img.component-svg-image {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        filter: brightness(0) saturate(100%) ",";\n      }\n\n      &:hover {\n        color: #972c86;\n\n        img.component-svg-image {\n          filter: brightness(0) saturate(100%) ",";\n        }\n      }\n    }\n\n    &.file-only {\n      img {\n        width: 52.5px;\n        height: 52.5px;\n      }\n    }\n  }\n\n  ","\n"])),(function(e){return e.isAuthor?Object(Y.hexToCSSFilter)("#ffffff").filter:Object(Y.hexToCSSFilter)("#8C3B9B").filter}),(function(e){return e.isAuthor?Object(Y.hexToCSSFilter)("#fff").filter:Object(Y.hexToCSSFilter)("#0056b3").filter}),(function(e){return e.hasMessage&&""})),ne=V.a.span(l||(l=Object(T.a)(["\n  max-width: ",";\n  padding: ",";\n  ul {\n    list-style-type: none;\n  }\n\n  a,\n  a:not([href]):not([tabindex]) {\n    cursor: pointer;\n    color: ",";\n    color: ",";\n    text-decoration: underline;\n\n    &.gdrive-link {\n      text-decoration: none;\n\n      .link {\n        @media (max-width: 1580px) {\n          max-width: 20vw;\n        }\n        @media (max-width: 1480px) {\n          max-width: 14vw;\n        }\n        @media (max-width: 1380px) {\n          max-width: 5vw;\n        }\n        @media (max-width: 991.99px) {\n          max-width: 350px;\n        }\n        @media (max-width: 822px) {\n          max-width: 20vw;\n        }\n      }\n      .preview-text {\n        font-weight: bold;\n        color: ",";\n      }\n    }\n\n    &:focus,\n    &:hover {\n      color: ",";\n    }\n    &.btn {\n      border: 1px solid ",";\n\n      &:focus,\n      &:hover {\n        border: 1px solid ",";\n      }\n\n      &.btn-action {\n        margin-top: 0.5rem;\n        border-radius: 8px;\n      }\n\n      &.btn-complete {\n        color: ",";\n        border: 1px solid ",";\n      }\n    }\n  }\n\n  span.completed {\n    text-decoration: line-through;\n  }\n"])),(function(e){return e.hasFiles?"200px":"auto"}),(function(e){return e.hasFiles?"7px 4px 5px 6px":""}),(function(e){return e.isAuthor?"#ffffff":"#8C3B9B"}),(function(e){return e.isAuthor?"#ffffff99":"#7a1b8b"}),(function(e){return e.isAuthor?"#FFF":"#828282"}),(function(e){return e.isAuthor?"#ffffff":"#7a1b8b"}),(function(e){return e.isAuthor?"#ffffff":"#8C3B9B"}),(function(e){return e.isAuthor?"#fff":"#0056b3"}),(function(e){return e.isAuthor?"#fff":"#0056b3"}),(function(e){return e.isAuthor?"#fff":"#0056b3"})),te=V.a.div(c||(c=Object(T.a)(["\n  display: flex;\n  flex-flow: ",";\n\n  .chat-content {\n    width: 100%;\n    padding-left: 0;\n  }\n\n  .chat-clap {\n    float: ",";\n  }\n"])),(function(e){return e.isAuthor?"row":"row-reverse"}),(function(e){return e.isAuthor?"left":"right"})),ie=V.a.div(p||(p=Object(T.a)(["\n  ","\n\n  .reply-author {\n    ",";\n  }\n  .reply-content {\n    clear: both;\n    width: 100%;\n    display: block;\n    z-index: 1;\n\n    p {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n\n      a {\n        color: ",";\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n\n        @media only screen and (max-width: 1024px) {\n          white-space: normal;\n          word-break: break-word;\n\n          &:hover {\n            word-break: unset;\n          }\n        }\n\n        &:hover {\n          overflow: unset;\n          white-space: unset;\n          text-overflow: unset;\n          word-break: break-word;\n        }\n      }\n    }\n  }\n  .gif_player {\n    clear: both;\n    position: relative;\n    left: 0;\n    overflow: hidden;\n    //height: 250px;\n    min-height: 150px;\n    cursor: pointer;\n    .gifPlayer {\n      border-radius: 8px;\n      max-height: 250px;\n    }\n    .play_button {\n      height: 60px;\n      width: 60px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n"])),(function(e){return!e.isEmoticonOnly&&"\n    &:before {\n        ".concat((function(e){return e.showAvatar&&"content: ''"}),";\n        border: 10px solid transparent;\n        border-left-color: #f0f0f0;\n        position: absolute;\n        top: 6px;\n        left: -15px;\n        z-index: 1;\n        ").concat((function(e){return!0===e.isAuthor&&"\n            left: auto;\n            right: -15px;\n            border-left-color: red;\n            border-left-color: #7A1B8B;\n            border-right-color: transparent;\n        "}),";\n        width: 20px;\n        height: 20px;\n    }\n    ")}),(function(e){return e.isAuthor?"margin-left: 30px":"margin-right: 30px"}),(function(e){return e.isAuthor,"#ff4444"})),ae=V.a.div(h||(h=Object(T.a)(["\n  color: #676767;\n  display: flex;\n  flex-flow: ",";\n  .reply-date {\n    margin: ",";\n    flex-flow: column;\n    justify-content: center;\n  }\n  .reply-date.updated {\n    > span:last-child {\n      display: none;\n    }\n  }\n  .reply-date.updated:hover {\n    > span:first-child {\n      display: none;\n    }\n    > span:last-child {\n      display: block;\n    }\n  }\n"])),(function(e){return e.isAuthor?"row":"row-reverse"}),(function(e){return e.isAuthor?"0 10px 0 0":"0 0 0 10px"})),re=V.a.span(d||(d=Object(T.a)(["\n  color: #aab0c8;\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  position: absolute;\n  top: calc(50% - 25px);\n  margin: 0 10px;\n  ",";\n  height: 25px;\n  white-space: nowrap;\n\n  svg {\n    width: 15px;\n    height: 15px;\n    position: relative;\n    top: 2px;\n    margin-right: 5px;\n  }\n"])),(function(e){return e.isAuthor?"right: 100%;":"left: 100%;"})),se=V.a.span(u||(u=Object(T.a)(["\n  padding: ",";\n  font-weight: 500;\n  color: #929496;\n  &.important {\n    font-weight: 600;\n    color: #191c20;\n  }\n  @media (max-width: 620px) {\n    display: block;\n    font-size: 11px;\n    line-height: 1.2;\n  }\n"])),(function(e){return e.isEmoticonOnly||e.isGifOnly||!0===e.hasFiles?"3px 9px 3px 9px":"0"})),oe=[.1,.2,.3,.4,.5,.6,.7,.8,.9],le=function(e){var n=e.reply,t=e.showAvatar,i=e.selectedChannel,a=e.showGifPlayer,r=e.isAuthor,s=e.addMessageRef,o=e.user,l=e.isLastChat,c=e.chatMessageActions,p=e.timeFormat,h=e.chatSettings,d=e.isLastChatVisible,u=e.dictionary,f=e.users,m=e.translated_channels,g=e.chat_language,b=e.translate,x=e.language,w=e.loadReplies,y=Object(D.g)();Object(K.a)({message:n,actions:c}),Object(J.a)({message:n,isAuthor:r,translate:i.is_translate,chat_language:g,actions:c});var v=Object(G.d)({reply:n,dictionary:u,isAuthor:r,user:o,selectedChannel:i,users:f,translate:b,language:x,translated_channels:m,chat_language:g}),A=v.quoteAuthor,C=v.quoteBody,_=v.replyBody,E=v.hasMessage,O=v.isGifOnly,k=v.isEmoticonOnly,j=n.files.length>0,M=n.files.some((function(e){return e.remove_on_download})),F={container:Object(I.useRef)(null)},R=Object(I.useRef)(null),L=Object(z.b)({threshold:1}),N=Object(U.a)(L,2),S=N[0],B=N[1],T=Object(z.b)({threshold:oe,skip:!l}),H=Object(U.a)(T,3),V=H[0],Y=H[1],W=H[2],le=function(e){return e.preventDefault(),y.push(e.currentTarget.dataset.href),!1};Object(I.useEffect)((function(){var e=F.container.current.querySelector("a.push");return e&&e.addEventListener("click",le,!0),function(){e&&e.removeEventListener("click",le,!0)}}),[]),Object(I.useEffect)((function(){"object"===typeof y.location.state&&y.location.state&&y.location.state.focusOn===n.code&&F.container.current&&R.current&&(F.container.current.scrollIntoView({block:"center"}),R.current&&R.current.classList.add("pulse"),y.push(y.location.pathname,null))}),[y.location.state,F.container.current,R.current]),Object(I.useEffect)((function(){s&&B&&w&&w()}),[s,B,w]),Object(I.useEffect)((function(){l&&W&&(W.boundingClientRect.height-W.intersectionRect.height>=16?d&&c.setLastMessageVisiblility({status:!1}):d||c.setLastMessageVisiblility({status:!0}))}),[l,W,d,Y]);var ce=n.user&&f[n.user.id]&&"external"===f[n.user.id].type&&!r;return P.a.createElement(Q,{ref:F.container,tabIndex:n.id,hasFiles:j,className:"chat-bubble ql-editor ".concat(n.is_important&&"important"," ").concat(ce&&"external-chat"),showAvatar:t,isAuthor:r,hideBg:k||O||j&&!E,theme:h.chat_message_theme,hasGif:a,hasRemoveOnDlFiles:M},P.a.createElement(P.a.Fragment,null,n.is_transferred&&P.a.createElement(re,{className:"small",isAuthor:r},P.a.createElement(q.s,{icon:"corner-up-right"}),u.forwardedMessage),P.a.createElement(te,{ref:s?S:null,className:"chat-content-clap",isAuthor:r},P.a.createElement(ie,{showAvatar:t,isAuthor:r,isEmoticonOnly:k,className:"chat-content animated slower",ref:R},!r&&t&&P.a.createElement(P.a.Fragment,null,P.a.createElement(se,{isEmoticonOnly:k,hasFiles:j,isGifOnly:O,className:"chat-name-not-author-mobile ".concat(n.is_important&&"important")},"BOT"===n.user.type&&n.user.code&&n.user.code.includes("huddle")?n.user.name.substr(0,n.user.name.length/2):n.user.name)),n.quote&&n.quote.body&&!n.is_deleted&&(void 0!==n.quote.user_id||void 0!==n.quote.user)&&P.a.createElement(X,{className:"quote-container",showAvatar:t,isEmoticonOnly:k,hasFiles:j,theme:h.chat_message_theme,onClick:function(e){if(n.quote){var t=document.querySelector(".chat-list-item-".concat(n.quote.id));t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},isAuthor:r},n.quote.user_id===o.id?P.a.createElement($,{theme:h.chat_message_theme,isAuthor:!0},"You"):P.a.createElement($,{theme:h.chat_message_theme,isAuthor:n.quote.user_id===o.id},A),P.a.createElement(Z,{className:"quote-content",theme:h.chat_message_theme,isAuthor:r,dangerouslySetInnerHTML:{__html:C}})),n.files.length>0&&!n.is_deleted&&P.a.createElement(ee,{dictionary:u,hasMessage:E,isAuthor:r,theme:h.chat_message_theme,files:n.files,reply:n,type:"chat",topic_id:"TOPIC"===i.type?i.entity_id:null}),E&&P.a.createElement("span",{ref:l?V:null},P.a.createElement(ne,{hasFiles:j,theme:h.chat_message_theme,isAuthor:r,className:"reply-content ".concat(k?"emoticon-body":""," ").concat(n.is_deleted?"is-deleted":""),dangerouslySetInnerHTML:{__html:_}})),a&&P.a.createElement(q.c,{body:n.body,autoplay:!0}))),P.a.createElement(ae,{className:"chat-timestamp",isAuthor:r},P.a.createElement("span",{className:"reply-date created"},P.a.createElement("span",null,p.todayOrYesterdayDate(n.created_at.timestamp)),M&&P.a.createElement("span",null,u.removeOnDownload)))),e.children)},ce=t(668),pe=t(669),he=t(670),de=t(680),ue=t(671),fe=t(17),me=V.a.span(f||(f=Object(T.a)(['\n  display: block;\n  width: 100%;\n\n  .chat-file-notification {\n    b:hover {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  }\n\n  .push-link {\n    display: inline-block;\n    position: relative;\n    padding-bottom: 25px;\n    margin-bottom: -25px;\n    width: 100%;\n\n    &:before {\n      position: absolute;\n      left: -14px;\n      top: -7px;\n      bottom: 0;\n      width: 6px;\n      height: calc(100% - 12px);\n      background: linear-gradient(180deg, rgba(106, 36, 126, 1) 0%, rgba(216, 64, 113, 1) 100%);\n      content: "";\n      border-radius: 6px 0 0 6px;\n    }\n\n    .card-body {\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      padding: 1rem;\n      max-width: 95%;\n      display: block;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      font-size: 12px;\n    }\n\n    .open-post {\n      display: flex;\n      position: absolute;\n      right: -20px;\n      bottom: -10px;\n      justify-content: center;\n      align-items: center;\n      font-size: 12px;\n\n      svg {\n        margin-left: 0;\n        height: 12px;\n      }\n    }\n  }\n']))),ge=V.a.span(m||(m=Object(T.a)(["\n  display: block;\n  width: 100%;\n  cursor: ",";\n"])),(function(e){return e.isPostNotification?"pointer":"auto"})),be=V.a.div(g||(g=Object(T.a)(["\n  color: #a7abc3;\n  font-style: italic;\n  font-size: 11px;\n  position: absolute;\n  top: 0;\n  left: calc(100% + 10px);\n  display: flex;\n  height: 100%;\n  align-items: center;\n  white-space: nowrap;\n"]))),xe=[.1,.2,.3,.4,.5,.6,.7,.8,.9],we=Object(I.forwardRef)((function(e,n){var t=e.reply,i=e.selectedChannel,a=e.isLastChat,r=e.chatMessageActions,s=e.user,o=e.timeFormat,l=e.isLastChatVisible,c=e.dictionary,p=e.users,h=Object(D.g)(),d=Object(D.i)(),u=Object(G.U)({dictionary:c,reply:t,selectedChannel:i,user:s,users:p}).parseBody,f=Object(z.b)({threshold:xe,skip:!a}),m=Object(U.a)(f,3),g=m[0],b=m[1],x=m[2];Object(I.useEffect)((function(){a&&x&&(x.boundingClientRect.height-x.intersectionRect.height>=16?l&&r.setLastMessageVisiblility({status:!1}):l||r.setLastMessageVisiblility({status:!0}))}),[a,x,l,b]);return P.a.createElement(me,{ref:a?g:null},P.a.createElement(ge,{ref:n,id:"bot-".concat(t.id),onClick:function(){if(t.body.startsWith("UPLOAD_BULK::")){var e=JSON.parse(t.body.replace("UPLOAD_BULK::",""));e.files&&r.viewFiles(e.files)}else if(t.body.startsWith("POST_CREATE::")){if(""!==t.body.replace("POST_CREATE::","").trim()){var n=JSON.parse(t.body.replace("POST_CREATE::",""));d&&d.workspaceId?d.folderId?h.push("/workspace/posts/".concat(d.folderId,"/").concat(d.folderName,"/").concat(d.workspaceId,"/").concat(Object(fe.h)(d.workspaceName),"/post/").concat(n.post.id,"/").concat(Object(fe.h)(n.post.title))):h.push("/workspace/posts/".concat(d.workspaceId,"/").concat(d.workspaceName,"/post/").concat(n.post.id,"/").concat(Object(fe.h)(n.post.title))):h.push("/posts/".concat(n.post.id,"/").concat(Object(fe.h)(n.post.title)))}}},dangerouslySetInnerHTML:{__html:u},isPostNotification:t.body.includes("POST_CREATE::")}),P.a.createElement(be,{className:"chat-timestamp",isAuthor:!1},P.a.createElement("span",{className:"reply-date created"},o.localizeTime(t.created_at.timestamp))))})),ye=t(123),ve=V.a.div(b||(b=Object(T.a)(["\n  background: transparent;\n  background-repeat: repeat;\n  height: calc(100% - 125px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  //z-index: 1;\n  scrollbar-width: none;\n  > ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  .chat-message-options svg {\n    fill: currentColor;\n  }\n  &.is-processed {\n    opacity: 0;\n  }\n"]))),Ae=V.a.li(x||(x=Object(T.a)(["\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  margin-bottom: ",";\n  text-align: center;\n  .chat-actions-container {\n    opacity: 0;\n  }\n\n  &:hover {\n    .chat-actions-container {\n      opacity: 1;\n    }\n  }\n  &.pulsating div.chat-bubble {\n    animation: blinker 2s linear forwards;\n    @keyframes blinker {\n      50% {\n        opacity: 0.5;\n      }\n    }\n  }\n"])),(function(e){return e.isLastChat?"20px":"5px"})),Ce=V.a.div(w||(w=Object(T.a)(["\n  z-index: 2;\n  color: #a7abc3;\n  display: inline-block;\n  left: 50%;\n  position: sticky;\n  top: 10px;\n  transform: translateX(-50%);\n  span {\n    padding: 4px 8px;\n    display: inline-block;\n    font-size: 11px;\n    border-radius: 6px;\n    margin: 0 4px;\n    background: #f0f0f0;\n  }\n  &[stuck] {\n    &:before,\n    &:after {\n      display: none;\n    }\n  }\n"]))),_e=V.a.div(y||(y=Object(T.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: flex-end;\n  flex-flow: column;\n  flex-flow: ",";\n  margin-left: ",";\n  ",";\n  margin-top: ",";\n  margin-top: ",";\n  @media (max-width: 620px) {\n    margin-top: ",";\n    margin-top: ",";\n    ",";\n    ",";\n    ",";\n  }\n  &:before {\n    ",";\n    border: 10px solid transparent;\n    border-right-color: ",";\n    position: absolute;\n    top: ",";\n    left: 30px;\n    z-index: 1;\n    @media all and (max-width: 620px) {\n      display: none;\n    }\n    ",";\n  }\n  .dark & {\n    &:before {\n      ",";\n      border: 10px solid transparent;\n      position: absolute;\n      top: ",";\n      left: 30px;\n      z-index: 1;\n      @media all and (max-width: 620px) {\n        display: none;\n      }\n      ",";\n    }\n  }\n"])),(function(e){return e.isAuthor?"row":"row-reverse"}),(function(e){return e.isAuthor||e.showAvatar?"0":"22px"}),(function(e){return!0===e.isAuthor&&"position: relative; right: 15px;"}),(function(e){return e.showAvatar&&"36px"}),(function(e){return e.showAvatar&&e.isAuthor&&"20px"}),(function(e){return e.showAvatar&&"12px"}),(function(e){return e.showAvatar&&e.isAuthor&&"8px"}),(function(e){return!e.showAvatar&&!e.isAuthor&&!e.isBot&&"margin-left: 0"}),(function(e){return!0===e.isAuthor&&!e.showAvatar&&"position: relative; right: 0px;"}),(function(e){return!0===e.isAuthor&&"position: relative; right: 0px;"}),(function(e){return e.showAvatar&&"content: '';"}),(function(e){return e.isImportant?"#7B68EE":e.isExternalChat?"#FFDB92":"#f0f0f0"}),(function(e){return e.showAvatar&&!e.isAuthor?"42px":"6px"}),(function(e){return!0===e.isAuthor&&"\n            left: auto;\n            right: -16px;\n            border-left-color:  ".concat((function(e){return e.isImportant?"#7B68EE":"#7A1B8B"}),";\n            border-right-color: transparent;\n            @media all and (max-width: 620px) {\n              display: none;\n            }\n        ")}),(function(e){return e.showAvatar&&"content: '';"}),(function(e){return e.showAvatar&&!e.isAuthor?"42px":"6px"}),(function(e){return!0===e.isAuthor&&"\n            left: auto;\n            right: -16px;            \n            border-right-color: transparent;\n            @media all and (max-width: 620px) {\n              display: none;\n            }\n        "})),Ee=V.a.div(v||(v=Object(T.a)(["\n  flex-flow: ",";\n  flex-wrap: wrap;\n  ",";\n  min-width: 150px;\n  color: #a7abc3;\n  background: #ffffff;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: 0;\n  ",";\n  height: calc(100% + 4px);\n  margin-top: -2px;\n  transition: opacity 0.3s ease;\n"])),(function(e){return e.isAuthor?"row-reverse":"row"}),(function(e){return e.isAuthor?"margin-right: 10px":"margin-left: 10px"}),(function(e){return e.isAuthor?"right: 100%":"left: 100%"})),Oe=V.a.div(A||(A=Object(T.a)(["\n  flex-flow: ",";\n  flex-wrap: wrap;\n  ",";\n  min-width: 150px;\n  color: #a7abc3;\n  background: #ffffff;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: 0;\n  ",";\n  height: calc(100% + 4px);\n  margin-top: -2px;\n  transition: opacity 0.3s ease;\n  button {\n    margin: 5px;\n  }\n"])),(function(e){return e.isAuthor?"row-reverse":"row"}),(function(e){return e.isAuthor?"margin-right: 10px":"margin-left: 10px"}),(function(e){return e.isAuthor?"right: 100%":"left: 100%"})),ke=Object(V.a)(ce.a)(C||(C=Object(T.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n  margin: 5px;\n  max-width: 25px;\n\n  @media (max-width: 620px) {\n    margin-right: 0;\n  }\n\n  .more-options-tooltip {\n    &.orientation-bottom {\n      top: calc(100% - 35px);\n      @media (max-width: 620px) {\n        top: 100%;\n      }\n    }\n\n    &.orientation-top {\n      @media (max-width: 620px) {\n        bottom: 30px;\n      }\n    }\n\n    &.orientation-right {\n      left: calc(100% + 10px);\n      @media (max-width: 620px) {\n        left: 0;\n      }\n    }\n    &.orientation-left {\n      @media (max-width: 620px) {\n        left: auto;\n        right: 0;\n      }\n    }\n  }\n"]))),je=V.a.div(_||(_=Object(T.a)(["\n  //width: 100%;\n  //overflow: hidden;\n  max-width: 75%;\n  position: relative;\n  flex-flow: column;\n  display: inherit;\n  margin-left: ",";\n  > img {\n    max-height: 300px;\n    max-width: 100%;\n    width: auto;\n    object-fit: cover;\n  }\n  .edited-message {\n    color: #aab0c8;\n    font-style: italic;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    position: absolute;\n    top: 50%;\n    margin: 0 10px;\n    height: 25px;\n    white-space: nowrap;\n    ",";\n  }\n  .chat-options {\n    visibility: hidden;\n  }\n  .chat-options.active {\n    visibility: visible;\n  }\n  :hover {\n    .chat-options {\n      visibility: visible;\n    }\n  }\n  @media (max-width: 991.99px) {\n    max-width: calc(100% - 110px);\n  }\n\n  @media (max-width: 620px) {\n    ",";\n    ",";\n  }\n"])),(function(e){return e.showAvatar&&!e.isAuthor?"1rem":"1.6rem"}),(function(e){return e.isAuthor?"right: 100%;":"left: 100%"}),(function(e){return!e.showAvatar&&!e.isAuthor&&"margin-left: 0"}),(function(e){return!0===!e.isAuthor&&"margin-left: 0"})),Me=V.a.div(E||(E=Object(T.a)(["\n  position: relative;\n  display: inline-flex;\n  border-radius: 8px;\n  background: #f4f4f4f4;\n  text-align: left;\n  min-width: 100px;\n  max-width: 100%;\n  padding: 7px 15px;\n  line-height: 1.5rem;\n  float: left;\n  align-items: center;\n  justify-content: flex-end;\n  flex-flow: ",";\n  .chat-options {\n    visibility: hidden;\n  }\n  :hover {\n    .chat-options {\n      visibility: visible;\n    }\n  }\n  @media (max-width: 620px) {\n    padding: 7px;\n  }\n"])),(function(e){return e.isAuthor?"row":"row-reverse"})),Fe=V.a.span(O||(O=Object(T.a)(["\n  color: red;\n  margin: 0 10px;\n"]))),Re=V.a.div(k||(k=Object(T.a)(["\n  display: flex;\n  justify-content: center;\n  &.initial-load {\n    position: absolute;\n    top: 45%;\n    left: 45%;\n    transform: translate(-45%, -45%);\n  }\n"]))),Le=V.a.div(j||(j=Object(T.a)(["\n  width: 100%;\n  ul {\n    margin: 0;\n  }\n"]))),Ne=Object(V.a)(q.a)(M||(M=Object(T.a)(["\n  align-self: flex-start;\n  width: 2rem !important;\n  height: 2rem !important;\n  margin-top: ",";\n\n  img {\n    width: 2rem !important;\n    height: 2rem !important;\n  }\n  @media (max-width: 620px) {\n    display: none;\n  }\n  .pixel-avatar {\n    padding-top: 2px !important;\n  }\n"])),(function(e){return!0===e.isForwardedMessage?"25px":"0"})),Se=V.a.div(F||(F=Object(T.a)(["\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  svg {\n    max-width: 100%;\n    width: 100%;\n    max-height: 40%;\n    margin: auto;\n  }\n"]))),Be=function(e){Object(S.a)(t,e);var n=Object(B.a)(t);function t(e){var i;return Object(L.a)(this,t),(i=n.call(this,e)).loadReplies=function(){var e=i.props,n=e.selectedChannel,t=e.chatMessageActions,a=i.props.scrollComponent.current;if(!n.isFetching&&n.hasMore){t.channelActions.fetchingMessages(n,!0);var r={skip:0,limit:20};"undefined"!==typeof n.replies&&(r={skip:0===n.skip&&n.replies.length?n.replies.length:n.skip,limit:20}),t.fetch(n,r,(function(e,r){if(e)t.channelActions.fetchingMessages(n,!1);else if((0===n.replies.length||0===n.skip)&&"object"!==typeof i.props.history.location.state){a.scrollTop=a.scrollHeight;var s=a.scrollHeight;setTimeout((function(){s<a.scrollHeight&&(a.scrollTop=a.scrollHeight)}),1e3)}}))}},i.handleReadChannel=function(){if(i.props.unreadCount>0||i.props.selectedChannel.total_unread>0){var e=i.props,n=e.selectedChannel;e.chatMessageActions.channelActions.markAsRead(n)}},i.handleResendMessage=function(e){i.props.createChatMessageV2Action(e,(function(n,t){n&&i.props.onFailedMessageSend(e)}))},i.handleRemoveReply=function(e){i.props.cbOnRemoveReply(e)},i.handleEditReply=function(e){i.props.onEditReply(e)},i.handleQuoteReply=function(e){i.props.onSelectQuote(e)},i.handleLoadMoreRefChange=function(e,n){e&&i.loadReplies()},i.handleShowSeenUsers=function(){return i.setState({showSeenUsers:!i.state.showSeenUsers})},i.filterSeenMembers=function(){return i.props.selectedChannel.members.filter((function(e){return 2===i.props.selectedChannel.members.length?!(!i.props.selectedChannel.last_reply||!i.props.selectedChannel.last_reply.user)&&(i.props.selectedChannel.last_reply.user.id===i.props.user.id?!(i.props.user.id===e.id):!(i.props.selectedChannel.last_reply.user.id===e.id)):(!i.props.selectedChannel.last_reply||!i.props.selectedChannel.last_reply.user||i.props.selectedChannel.last_reply.user.id!==e.id)&&i.props.user.id!==e.id})).filter((function(e){return!!e.last_visited_at&&e.last_visited_at.timestamp>=i.props.selectedChannel.last_reply.created_at.timestamp}))},i.getLoadRef=function(e){var n=i.props.selectedChannel,t=!1;if(n.replies.length&&!n.isFetching){var a=n.replies.findIndex((function(n){return n.id===e}));a<Math.round(n.replies.length/2)&&a%2===0&&(t=!0)}return t},i.gMessages=Object(ye.a)((function(e){return Object.entries(e.sort((function(e,n){return e.created_at.timestamp-n.created_at.timestamp===0?e.id-n.id:e.created_at.timestamp-n.created_at.timestamp})).map((function(e,n){return e.hasOwnProperty("g_date")?Object(R.a)(Object(R.a)({},e),{},{isLastChat:n===i.props.selectedChannel.replies.length-1}):Object(R.a)(Object(R.a)({},e),{},{g_date:i.props.timeFormat.localizeDate(e.created_at.timestamp,"YYYY-MM-DD"),isLastChat:n===i.props.selectedChannel.replies.length-1})})).reduce((function(e,n){var t=n.g_date;return e[t]=e[t]||[],e[t].push(n),e}),{}))})),i.state={hasArrowUpListener:!1,loadMoreInView:!1,fetchingReplies:!1,showEmoji:{}},i.infiniteScroll=P.a.createRef(),i.mouseOver=P.a.createRef(!1),i}return Object(N.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props.scrollComponent.current;this.props.chatMessageActions.channelActions.saveHistoricalPosition(this.props.selectedChannel.id,e)}},{key:"componentDidMount",value:function(){var e=this.props,n=e.selectedChannel,t=e.historicalPositions,i=this.props.scrollComponent.current;"object"!==typeof this.props.history.location.state&&(t.length?t.forEach((function(e){e.channel_id===n.id&&i&&(i.scrollTop=i.scrollHeight-e.scrollPosition)})):i&&(i.scrollTop=i.scrollHeight)),n.hasMore&&0===n.skip&&this.loadReplies(),n.is_read&&this.handleReadChannel()}},{key:"getSnapshotBeforeUpdate",value:function(e,n){var t=this.props.selectedChannel,i=this.props.scrollComponent.current;return e.selectedChannel&&e.selectedChannel&&e.selectedChannel.replies&&t.replies&&i&&t.replies.length>20&e.selectedChannel.replies.length<t.replies.length&&t.replies.length-e.selectedChannel.replies.length>=2?i.scrollHeight-i.scrollTop:null}},{key:"componentDidUpdate",value:function(e,n,t){var i=this.props,a=i.selectedChannel,r=i.historicalPositions,s=this.props.scrollComponent.current;this.props.selectedChannel&&e.selectedChannel.id!==a.id&&(a.hasMore&&0===a.skip&&this.loadReplies(),this.handleReadChannel(),r.length&&r.forEach((function(e){e.channel_id===a.id&&s&&(s.scrollTop=s.scrollHeight-e.scrollPosition)}))),a&&e.selectedChannel.id===this.props.selectedChannel.id&&(null!==t&&a.replies.length!==e.selectedChannel.replies.length&&(a.replies.length-e.selectedChannel.replies.length===1?a.last_reply&&a.last_reply.user&&a.last_reply.user.id!==this.props.user.id&&(this.props.isLastChatVisible||(s.scrollTop=s.scrollHeight-t)):s.scrollTop=s.scrollHeight-t),a.replies&&a.replies.length&&a.replies.length-e.selectedChannel.replies.length===1&&(a.last_reply&&a.last_reply.user&&a.last_reply.user.id===this.props.user.id?s&&(s.scrollTop=s.scrollHeight):this.props.isLastChatVisible&&!this.props.isIdle&&this.props.isBrowserActive&&document.hasFocus()&&(a.is_read&&this.props.chatMessageActions.channelActions.markAsRead(a),s&&(s.scrollTop=s.scrollHeight)))),this.props.unreadCount>0&&this.props.isLastChatVisible&&!this.props.isIdle&&this.props.isBrowserActive&&document.hasFocus()&&this.handleReadChannel()}},{key:"render",value:function(){var e=this,n=0,t=this.gMessages(this.props.selectedChannel.replies);return P.a.createElement(ve,{ref:this.props.scrollComponent,id:"component-chat-thread",className:"component-chat-thread messages ".concat(this.props.className),tabIndex:"2"},this.props.selectedChannel.isFetching&&this.props.selectedChannel.hasMore&&0===this.props.selectedChannel.replies.length&&0===this.props.selectedChannel.skip&&P.a.createElement(Re,{className:"initial-load"},P.a.createElement(q.j,null)),P.a.createElement(Le,{ref:this.infiniteScroll,className:"infinite-scroll",id:"infinite-scroll-chat-replies"},this.props.selectedChannel.replies&&this.props.selectedChannel.replies.length>=20&&P.a.createElement(z.a,{as:"div",onChange:function(n,t){return e.handleLoadMoreRefChange(n,t)}},P.a.createElement("span",{className:"intersection-load-more-ref"})),P.a.createElement("ul",null,this.props.selectedChannel.replies&&this.props.selectedChannel.replies.length?t.map((function(t,i){return P.a.createElement("div",{key:"".concat(t[0])},P.a.createElement(Ce,{className:"timestamp-container"},P.a.createElement("span",null,e.props.timeFormat.localizeChatDate(t[1][0].created_at.timestamp,"ddd, MMM DD, YYYY"))),t[1].map((function(t,i,a){var r=t.user&&t.user.id===e.props.user.id,s=!1,o=!1,l=!1,c=!1,p=!1;if(t.user){t.created_at.timestamp&&(0===i&&(o=!0,s=!0),0!==i&&e.props.timeFormat.localizeDate(a[i-1].created_at.timestamp,"D")!==e.props.timeFormat.localizeDate(t.created_at.timestamp,"D")&&(o=!0,s=!0),0!==i&&t.created_at.timestamp-a[i-1].created_at.timestamp>600&&(s=!0)),0!==i&&!0===a[i-1].is_read&&!1===t.is_read&&(p=!0),0!==i&&null===a[i-1].user&&(s=!0),n!==t.user.id&&(s=!0,n=t.user.id),"undefined"!==typeof t.body&&null!==t.body&&null!==t.body.match(fe.b)&&(l=!0);c=["gripp_bot_account","gripp_bot_invoice","gripp_bot_offerte","gripp_bot_project","gripp_bot_account","driff_webhook_bot","huddle_bot"].includes(t.user.code)}return P.a.createElement(Ae,{key:t.id,className:"chat-list chat-list-item-".concat(t.id," code-").concat(t.code," "),showTimestamp:o,isLastChat:t.isLastChat},t.user&&p&&e.props.unreadCount>0&&P.a.createElement(pe.a,null),t.user&&P.a.createElement(_e,{isAuthor:r,className:"chat-reply-list-item chat-reply-list-item-".concat(t.id," ").concat(r?"chat-right":"chat-left"),showAvatar:s,isBot:c,isImportant:t.is_important,isExternalChat:t.user&&e.props.users[t.user.id]&&"external"===e.props.users[t.user.id].type&&!r},t.message_failed?P.a.createElement(Fe,null,P.a.createElement("i",{className:"fas fa-times-circle",onClick:function(n){return e.handleResendMessage(t.payload)}})):null,P.a.createElement(je,{isAuthor:r,showAvatar:s,className:"chat-bubble-quote-div"},P.a.createElement(le,{chatMessageActions:e.props.chatMessageActions,timeFormat:e.props.timeFormat,user:e.props.user,reply:t,showAvatar:s,selectedChannel:e.props.selectedChannel,showGifPlayer:l,isAuthor:r,addMessageRef:e.getLoadRef(t.id),isLastChat:t.isLastChat,loadReplies:e.loadReplies,chatSettings:e.props.settings,isLastChatVisible:e.props.isLastChatVisible,dictionary:e.props.dictionary,users:e.props.users,translate:e.props.translate,language:e.props.language,translated_channels:e.props.translated_channels,chat_language:e.props.chat_language},P.a.createElement(Ee,{isAuthor:r,className:"chat-actions-container"},P.a.createElement(he.a,{isAuthor:r,reply:t,showEmojiSwitcher:e.state.showEmoji[t.id]}),!isNaN(t.id)&&!t.is_deleted&&P.a.createElement(ke,{dictionary:e.props.dictionary,className:"chat-message-options",selectedChannel:e.props.selectedChannel,isAuthor:r,replyData:t,teamChannelId:e.props.teamChannelId,isExternalUser:"external"===e.props.user.type}))),t.reactions.length>0&&P.a.createElement(de.a,{reactions:t.reactions,isAuthor:r,reply:t,loggedUser:e.props.user,chatReactionAction:e.props.chatReactionV2Action}),e.props.selectedChannel.last_reply&&e.props.selectedChannel.last_reply.id===t.id&&e.filterSeenMembers().length>0&&P.a.createElement(ue.a,{isAuthor:r,onClick:e.handleShowSeenUsers,seenMembers:e.filterSeenMembers(),isPersonal:2===e.props.selectedChannel.members.length})),!r&&s&&P.a.createElement(Ne,{isForwardedMessage:t.is_transferred,id:t.user.id,type:"USER",imageLink:t.user.profile_image_thumbnail_link?t.user.profile_image_thumbnail_link:t.user.profile_image_link,name:t.user.name,isBot:c,isHuddleBot:"huddle_bot"===t.user.code,showSlider:!0})),null===t.user&&P.a.createElement(_e,{className:"chat-reply-list-item system-reply-list-item chat-reply-list-item-".concat(t.id),isAuthor:!1},P.a.createElement(je,{isAuthor:r,showAvatar:s,className:"chat-bubble-quote-div"},P.a.createElement(Me,{className:"system-message",isAuthor:!1},P.a.createElement(we,{user:e.props.user,chatMessageActions:e.props.chatMessageActions,timeFormat:e.props.timeFormat,selectedChannel:e.props.selectedChannel,reply:t,addMessageRef:e.getLoadRef(t.id),isLastChat:t.isLastChat,isLastChatVisible:e.props.isLastChatVisible,dictionary:e.props.dictionary,users:e.props.users}),P.a.createElement(Oe,{isAuthor:r,className:"chat-actions-container"},P.a.createElement(he.a,{isAuthor:r,reply:t,showEmojiSwitcher:e.state.showEmoji[t.id]}),!isNaN(t.id)&&!t.is_deleted&&P.a.createElement(ke,{dictionary:e.props.dictionary,scrollRef:e.props.scrollComponent,replyData:t,className:"chat-message-options",selectedChannel:e.props.selectedChannel,isAuthor:r,teamChannelId:e.props.teamChannelId,isExternalUser:"external"===e.props.user.type}))),t.reactions.length>0&&P.a.createElement(de.a,{reactions:t.reactions,reply:t,isAuthor:!1,loggedUser:e.props.user,chatReactionAction:e.props.chatReactionV2Action}))))})))})):null,!this.props.selectedChannel.isFetching&&this.props.selectedChannel.replies&&this.props.selectedChannel.replies.length<1&&P.a.createElement(Se,{className:"no-reply-container"},P.a.createElement(q.q,{icon:3})))))}}]),t}(P.a.PureComponent);n.default=Object(D.k)(Object(H.b)((function(e){var n=e.global,t=n.isIdle,i=n.isBrowserActive,a=e.session.user,r=e.chat,s=r.historicalPositions,o=r.isLastChatVisible,l=r.selectedChannel,c=e.users.users;return{user:a,settings:e.settings.user.CHAT_SETTINGS,historicalPositions:s,isLastChatVisible:o,users:c,isIdle:t,isBrowserActive:i,selectedChannel:l}}),null)(Be))}}]);