(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[30],{638:function(e,a,t){"use strict";t.r(a);var n,l=t(4),c=t(0),m=t(11),i=t(9),r=t(1),o=t.n(r),d=t(5),s=t(37),b=t(613),f=t(584),u=t(586),p=t(583),E=t(585),O=t(194),v=t(10),j=t(17),N=t(14),g=t(19),x=t(617),k=t(199),h=t(12),_=t(31),w=v.a.div(n||(n=Object(i.a)(["\n  overflow: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  .row-user-profile-panel {\n    justify-content: center;\n\n    .avatar {\n      width: 68px;\n      height: 68px;\n    }\n\n    input.designation {\n      &::-webkit-input-placeholder {\n        font-size: 12px;\n      }\n      &:-ms-input-placeholder {\n        font-size: 12px;\n      }\n      &::placeholder {\n        font-size: 12px;\n      }\n    }\n\n    .col-label {\n      max-width: 130px;\n\n      @media only screen and (min-width: 1200px) {\n        max-width: 180px;\n      }\n    }\n  }\n\n  .close {\n    border-radius: 100%;\n    padding: 2px;\n  }\n\n  label {\n    padding: 5px 10px;\n    border-radius: 6px;\n    width: 100%;\n  }\n\n  .btn-toggle {\n    &:hover {\n      .input-group-text {\n        border: 1px solid #e1e1e1;\n        background: #fff;\n        color: #7a1b8b;\n      }\n    }\n    .input-group-text {\n      border: 1px solid #7a1b8b;\n      background: #7a1b8b;\n      color: #fff;\n    }\n    svg {\n      cursor: pointer;\n    }\n  }\n\n  .avatar-container {\n    cursor: pointer;\n    position: relative;\n    width: 68px;\n    height: 68px;\n    margin: 0 auto;\n\n    .btn {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      background-color: #fff;\n      border-radius: 50px 50px 50px 50px;\n      height: 25px;\n      width: 25px;\n      padding: 5px;\n    }\n  }\n\n  .form-group {\n    &.designation {\n      margin: 0 auto;\n      width: 66.66%;\n    }\n  }\n"])));a.default=o.a.memo((function(e){var a=e.className,t=void 0===a?"":a,n=Object(s.g)(),i=Object(d.c)(),v=Object(h.V)(),y=Object(h.eb)(),T=y.users,S=y.loggedUser,C=Object(h.cb)(),F=C.checkEmail,P=C.fetchById,I=C.getReadOnlyFields,R=C.getRequiredFields,L=C.update,A=C.updateProfileImage,B=Object(h.db)().selectUserChannel,V=T[e.match.params.id],D=V&&S.id===V.id,M=I(V?V.import_from:""),q=R(V?V.import_from:""),U=Object(r.useState)(!1),Z=Object(m.a)(U,2),z=Z[0],H=Z[1],J=Object(r.useState)(!1),G=Object(m.a)(J,2),W=G[0],Y=G[1],K=Object(r.useState)(!1),X=Object(m.a)(K,2),Q=X[0],$=X[1],ee=Object(r.useState)(!1),ae=Object(m.a)(ee,2),te=ae[0],ne=ae[1],le=Object(r.useState)(V&&V.loaded?V:{}),ce=Object(m.a)(le,2),me=ce[0],ie=ce[1],re=Object(r.useState)({valid:{},feedbackState:{},feedbackText:{}}),oe=Object(m.a)(re,2),de=oe[0],se=oe[1],be={dropZoneRef:Object(r.useRef)(null),first_name:Object(r.useRef)(null),password:Object(r.useRef)(null)},fe=Object(h.ab)()._t,ue={companyName:fe("PROFILE.COMPANY_NAME","Company name"),information:fe("PROFILE.INFORMATION","Information"),firstName:fe("PROFILE.FIRST_NAME","First name:"),middleName:fe("PROFILE.MIDDLE_NAME","Middle name:"),lastName:fe("PROFILE.LAST_NAME","Last name:"),password:fe("PROFILE.PASSWORD","Password:"),position:fe("PROFILE.POSITION","Position:"),city:fe("PROFILE.CITY","City:"),address:fe("PROFILE.ADDRESS","Address:"),zip_code:fe("PROFILE.ZIP_POST_CODE","ZIP/POST code:"),phone:fe("PROFILE.PHONE","Phone:"),email:fe("PROFILE.EMAIL","Email:"),edit:fe("BUTTON.EDIT","Edit"),saveChanges:fe("BUTTON.SAVE_CHANGES","Save changes"),cancel:fe("BUTTON.CANCEL","Cancel"),clickToChangePassword:fe("PROFILE.CLICK_TO_CHANGE_PASSWORD","Click to change your password"),external:fe("PROFILE.EXTERNAL","External")},pe=S&&"internal"===S.type&&V&&"external"===V.type&&1===V.active||S&&S.role&&("admin"===S.role.name||"owner"===S.role.name),Ee=function(e){if("boolean"===typeof e)return e?"is-valid":"is-invalid"},Oe=function(){H((function(e){return!e})),ie(Object(c.a)({},V)),se({valid:{},feedbackState:{},feedbackText:{}}),$(!1)},ve=function(e){if(null!==e.target){var a=e.target,t=a.name,n=a.value;ie((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(l.a)({},t,n.trim()))}))}},je=function(e){if(null!==e.target){var a=e.target,t=a.name,n=a.value;if(V[t]===me[t])return void se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,void 0)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,void 0)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,void 0))}}));"email"===t?q.includes(t)&&""===n.trim()?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Email is required"))}})):""===n.trim()||j.a.test(n.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Email is already taken"))}})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!0)),feedbackState:Object(c.a)({},e.feedbackState),feedbackText:Object(c.a)({},e.feedbackText)}})))})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!1)),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,!1)),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,"Invalid email format"))}})):q.includes(t)?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,""!==n.trim())),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},Object(l.a)({},t,""!==n.trim())),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},Object(l.a)({},t,""===n.trim()?"Field is required.":""))}})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},Object(l.a)({},t,!0)),feedbackState:e.feedbackState,feedbackText:e.feedbackText}}))}},Ne=function(){ne(!1)},ge=function(e,a){ie((function(e){return Object(c.a)(Object(c.a)({},e),{},{profile_image_link:a})})),se((function(a){return{valid:Object(c.a)(Object(c.a)({},a.valid),{},{profile_image_link:!0}),feedbackState:Object(c.a)({},a.feedbackState),feedbackText:Object(c.a)(Object(c.a)({},a.feedbackText),{},{profile_image_link:e})}})),H(!0),v.info(o.a.createElement(o.a.Fragment,null,"Click the ",o.a.createElement("b",null,"Save Changes")," button to update your profile image."))};return Object(r.useEffect)((function(){(!e.match.params.hasOwnProperty("id")||e.match.params.hasOwnProperty("id")&&!e.match.params.hasOwnProperty("name")&&parseInt(e.match.params.id)===S.id)&&n.push("/profile/".concat(S.id,"/").concat(Object(j.h)(S.name)))}),[]),Object(r.useEffect)((function(){var a=T[e.match.params.id]?T[e.match.params.id]:{};a.hasOwnProperty("loaded")?me.id!==a.id&&ie(a):P(e.match.params.id)}),[e.match.params.id,T,ie]),Object(r.useEffect)((function(){"edit"===e.match.params.mode&&me.id&&S.id===me.id&&(n.push("/profile/".concat(me.id,"/").concat(Object(j.h)(me.name))),H(!0)),"view"===e.match.params.mode&&me.id&&S.id===me.id&&(n.push("/profile/".concat(me.id,"/").concat(Object(j.h)(me.name))),H(!1))}),[me,e.match.params.mode]),Object(r.useEffect)((function(){Q&&be.password.current&&be.password.current.focus()}),[Q,be.password]),Object(r.useEffect)((function(){z&&be.first_name.current&&be.first_name.current.focus()}),[z,be.first_name]),T[e.match.params.id]?o.a.createElement(w,{className:"user-profile-panel container-fluid h-100 ".concat(t)},o.a.createElement("div",{className:"row row-user-profile-panel"},o.a.createElement("div",{className:"col-12 col-lg-5 col-xl-6"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body text-center",onDragOver:function(){te||ne(!0)}},(D||pe)&&o.a.createElement(x.a,{acceptType:"imageOnly",hide:!te,ref:be.dropZoneRef,onDragLeave:Ne,onDrop:function(e){!function(e){0===e.length?v.error("File type not allowed. Please use an image file."):e.length>1&&v.warning("Multiple files detected. First selected image will be used.");var a={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:ge};i(Object(N.a)(a,(function(){Ne()})))}(e.acceptedFiles)},onCancel:Ne}),o.a.createElement("div",{className:"avatar-container"},o.a.createElement(g.a,{imageLink:me.profile_image_link,name:me.name?me.name:me.email,noDefaultClick:!0,forceThumbnail:!1}),(D||pe)&&o.a.createElement("span",{className:"btn btn-outline-light btn-sm"},o.a.createElement(g.s,{icon:"pencil",onClick:function(){z||H(!0),be.dropZoneRef.current.open()}}))),z?o.a.createElement("h5",{className:"mb-1 mt-2"},me.first_name," ",me.middle_name," ",me.last_name):o.a.createElement("h5",{className:"mb-1 mt-2"},V.first_name," ",V.middle_name," ",V.last_name),z&&!M.includes("designation")?o.a.createElement("div",{className:"text-muted small d-flex align-items-center mt-2"},o.a.createElement(_.e,{placeholder:"Job Title eg. Manager, Team Leader, Designer",className:"designation",name:"designation",onChange:ve,onBlur:je,defaultValue:V.designation,isValid:de.feedbackState.designation,valid:de.feedbackText.designation})):o.a.createElement("p",{className:"text-muted small"},V.designation),S.id!==V.id&&o.a.createElement("div",{className:"d-flex justify-content-center"},""!==V.contact&&"internal"===S.type&&o.a.createElement("button",{className:"btn btn-outline-light mr-1"},o.a.createElement("a",{href:"tel:".concat(V.contact.replace(/ /g,"").replace(/-/g,""))},o.a.createElement(g.s,{className:"",icon:"phone"}))),"external"!==V.type&&"internal"===S.type&&o.a.createElement("button",{className:"ml-1 btn btn-outline-light"},o.a.createElement(g.s,{onClick:function(){!function(e){B(e)}(V)},icon:"message-circle"}))))),o.a.createElement("div",{className:"card"},z?o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),o.a.createElement("div",{className:"col col-form"},M.includes("first_name")?o.a.createElement(b.a,null,V.first_name):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(de.valid.first_name),innerRef:be.first_name,name:"first_name",onChange:ve,onBlur:je,defaultValue:V.first_name}),o.a.createElement(k.a,{valid:de.feedbackState.first_name},de.feedbackText.first_name)))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),o.a.createElement("div",{className:"col col-form"},M.includes("middle_name")?o.a.createElement(b.a,null,V.middle_name):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(de.valid.middle_name),name:"middle_name",onChange:ve,onBlur:je,defaultValue:V.middle_name}),o.a.createElement(k.a,{valid:de.feedbackState.middle_name},de.feedbackText.middle_name)))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),o.a.createElement("div",{className:"col col-form"},M.includes("last_name")?o.a.createElement(b.a,null,V.last_name):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(de.valid.last_name),name:"last_name",onChange:ve,onBlur:je,defaultValue:V.last_name}),o.a.createElement(k.a,{valid:de.feedbackState.last_name},de.feedbackText.last_name)))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.password),o.a.createElement("div",{className:"col col-form"},M.includes("password")||pe?o.a.createElement(b.a,null,"*****"):o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{onClick:function(){$((function(e){return!e}))},className:"cursor-pointer mb-0 ".concat(Q?"d-none":"")},ue.clickToChangePassword),o.a.createElement(u.a,{className:"form-group-password mb-0 ".concat(Q?"":"d-none")},o.a.createElement(p.a,null,o.a.createElement(f.a,{className:Ee(de.valid.password),innerRef:be.password,name:"password",onChange:ve,onBlur:je,defaultValue:"",type:W?"text":"password"}),o.a.createElement(E.a,{className:"btn-toggle",addonType:"append"},o.a.createElement(O.a,{className:"btn",onClick:function(){Y((function(e){return!e}))}},o.a.createElement(g.s,{icon:W?"eye-off":"eye"})))),o.a.createElement(k.a,{valid:de.feedbackState.password},de.feedbackText.password))))),"external"===V.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),o.a.createElement("div",{className:"col col-form"},M.includes("company_name")?o.a.createElement(b.a,null,V.external_company_name&&V.external_company_name):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(!0),name:"company_name",disabled:pe||!D,onChange:ve,onBlur:je,defaultValue:V.external_company_name?V.external_company_name:""})))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.city),o.a.createElement("div",{className:"col col-form"},M.includes("place")?o.a.createElement(b.a,null,V.place):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(de.valid.place),name:"place",onChange:ve,onBlur:je,defaultValue:V.place}),o.a.createElement(k.a,{valid:de.feedbackState.place},de.feedbackText.place)))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.address),o.a.createElement("div",{className:"col col-form"},M.includes("address")?o.a.createElement(b.a,null,V.address):o.a.createElement(o.a.Fragment,null,o.a.createElement(_.e,{name:"address",onChange:ve,onBlur:je,defaultValue:V.address,isValid:de.feedbackState.address,feedback:de.feedbackText.address})))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.phone),o.a.createElement("div",{className:"col col-form"},M.includes("contact")?o.a.createElement(b.a,null,V.contact):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:Ee(de.valid.contact),name:"contact",onChange:ve,onBlur:je,defaultValue:V.contact}),o.a.createElement(k.a,{valid:de.feedbackState.contact},de.feedbackText.contact)))),o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.email),o.a.createElement("div",{className:"col col-form"},M.includes("email")?o.a.createElement(b.a,null,V.email):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{type:"email",className:Ee(de.valid.email),name:"email",onChange:ve,onBlur:je,defaultValue:V.email}),o.a.createElement(k.a,{valid:de.feedbackState.email},de.feedbackText.email)))),o.a.createElement("hr",null),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-0"},o.a.createElement("div",null,"\xa0"),o.a.createElement("div",null,o.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light mr-2"},ue.cancel),o.a.createElement("span",{onClick:function(){!1===Object.values(de.valid).find((function(e){return!1===e}))?v.error("Some fields require your attention."):!0===Object.values(de.valid).find((function(e){return!0===e}))?me.profile_image_link!==V.profile_image_link?A(me,de.feedbackText.profile_image_link,(function(e,a){a&&H(!1)})):pe?V.email!==me.email?L(Object(c.a)(Object(c.a)({},me),{},{change_email:1}),(function(e,a){a&&H(!1)})):L(Object(c.a)({},me),(function(e,a){a&&H(!1)})):L(me,(function(e,a){a&&H(!1)})):(V&&me.email&&V.email!==me.email?q.includes("email")&&""===me.email.trim()?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Email is required"})}})):""===me.email.trim()||j.a.test(me.email.trim())?F(me.email,(function(e,a){a&&(a.data.status?se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Email is already taken"})}})):pe?V.email!==me.email?L(Object(c.a)(Object(c.a)({},me),{},{change_email:1}),(function(e,a){a&&H(!1)})):L(Object(c.a)({},me),(function(e,a){a&&H(!1)})):L(me,(function(e,a){a&&H(!1)})))})):se((function(e){return{valid:Object(c.a)(Object(c.a)({},e.valid),{},{email:!1}),feedbackState:Object(c.a)(Object(c.a)({},e.feedbackState),{},{email:!1}),feedbackText:Object(c.a)(Object(c.a)({},e.feedbackText),{},{email:"Invalid email format"})}})):v.info("Nothing was updated."),H(!1))},className:"btn btn-primary"},ue.saveChanges)))):o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title d-flex justify-content-between align-items-center"},ue.information,D||pe?o.a.createElement("span",{onClick:Oe,className:"btn btn-outline-light btn-sm"},o.a.createElement(g.s,{className:"mr-2",icon:"edit-2"})," ",ue.edit):null),V.first_name&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.firstName),o.a.createElement("div",{className:"col col-form"},V.first_name)),V.middle_name&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.middleName),o.a.createElement("div",{className:"col col-form"},V.middle_name)),V.last_name&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.lastName),o.a.createElement("div",{className:"col col-form"},V.last_name)),V.id===S.id&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.password),o.a.createElement("div",{className:"col col-form"},"*****")),"external"===V.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.companyName),o.a.createElement("div",{className:"col col-form"},V.external_company_name&&V.external_company_name)),V.role&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.position),o.a.createElement("div",{className:"col col-form"},"external"===V.type?ue.external:V.role.name)),V.place&&"internal"===S.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.city),o.a.createElement("div",{className:"col col-form"},V.place)),V.address&&"internal"===S.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.address),o.a.createElement("div",{className:"col col-form"},V.address)),V.contact&&"internal"===S.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.phone),o.a.createElement("div",{className:"col col-form"},V.contact)),V.email&&"internal"===S.type&&o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col col-label text-muted"},ue.email),o.a.createElement("div",{className:"col col-form cursor-pointer",onClick:function(){window.location.href="mailto:".concat(V.email)}},V.email))))))):o.a.createElement(o.a.Fragment,null)}))}}]);