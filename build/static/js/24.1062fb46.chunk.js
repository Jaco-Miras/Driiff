(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[24],{853:function(e,t,a){"use strict";a.r(t);var n,r,i,c,o,l,s,m,d,p,u,b,f,h,E,v,g,w,O,N,k,y,x=a(9),j=a(7),C=a(5),A=a(0),S=a.n(A),_=a(4),L=a(6),R=_.a.ul(n||(n=Object(C.a)(["\n  .list-group-item:last-child {\n    border-bottom-width: thin !important;\n  }\n  li {\n    cursor: pointer;\n  }\n  &.list-group .list-group-item.active {\n    border-color: #eeebee;\n    background-color: #fafafa !important;\n    .dark & {\n      background-color: #111417 !important;\n    }\n  }\n"]))),D=function(e){var t=e.actions,a=e.counters,n=e.dictionary,r=e.filterBy,i="external"===Object(L.d)((function(e){return e.session.user})).type,c=function(e){e.persist(),r!==e.target.dataset.value&&(t.updateSearch({filterBy:e.target.dataset.value,filterByFolder:null}),document.body.classList.remove("mobile-modal-open"))};return S.a.createElement(R,{className:"list-group list-group-flush"},S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"all"===r?"active":""),"data-value":"all",onClick:c},S.a.createElement("span",{className:"text-primary fa fa-circle mr-2"}),n.all,S.a.createElement("span",{className:"small ml-auto"},a.nonMember+a.member>0&&a.nonMember+a.member)),S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"member"===r?"active":""),"data-value":"member",onClick:c},S.a.createElement("span",{className:"text-success fa fa-circle mr-2"}),n.labelJoined,S.a.createElement("span",{className:"small ml-auto"},a.member>0&&a.member)),S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"favourites"===r?"active":""),"data-value":"favourites",onClick:c},S.a.createElement("span",{className:"text-warning fa fa-circle mr-2"}),n.favourites,S.a.createElement("span",{className:"small ml-auto"},a.favourites>0&&a.favourites)),S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"new"===r?"active":""),"data-value":"new",onClick:c},S.a.createElement("span",{className:"text-info fa fa-circle mr-2"}),n.new,S.a.createElement("span",{className:"small ml-auto"},a.new>0&&a.new)),!i&&S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"nonMember"===r?"active":""),"data-value":"nonMember",onClick:c},S.a.createElement("span",{className:"text-secondary fa fa-circle mr-2"}),n.notJoined,S.a.createElement("span",{className:"small ml-auto"},a.nonMember>0&&a.nonMember)),!i&&S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"external"===r?"active":""),"data-value":"external",onClick:c},S.a.createElement("span",{className:"text-external fa fa-circle mr-2"}),n.withClient,S.a.createElement("span",{className:"small ml-auto"},a.external>0&&a.external)),S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"private"===r?"active":""),"data-value":"private",onClick:c},S.a.createElement("span",{className:"text-danger fa fa-circle mr-2"}),n.private,S.a.createElement("span",{className:"small ml-auto"},a.private>0&&a.private)),S.a.createElement("li",{className:"list-group-item d-flex align-items-center ".concat(r&&"archived"===r?"active":""),"data-value":"archived",onClick:c},S.a.createElement("span",{className:"text-light fa fa-circle mr-2"}),n.archived,S.a.createElement("span",{className:"small ml-auto"},a.archived>0&&a.archived)))},P=a(12),W=a(786),T=a(57),B=a.n(T),I=a(13),K=_.a.div(r||(r=Object(C.a)(["\n  .app-sidebar-menu {\n    overflow: hidden;\n    outline: currentcolor none medium;\n    @media (max-width: 991.99px) {\n      border-bottom-left-radius: 0 !important;\n      border-bottom-right-radius: 0 !important;\n      display: flex;\n      flex-direction: column;\n      .card-body {\n        display: none;\n      }\n      .create-new-post-wrapper {\n        border-top: 1px solid #ebebeb;\n        display: block;\n        order: 9;\n      }\n      .list-group-flush {\n        border-top: 1px solid #ebebeb;\n      }\n    }\n  }\n  @media (max-width: 991.99px) {\n    margin-bottom: 0 !important;\n  }\n"]))),M=_.a.button(i||(i=Object(C.a)(["\n  display: inline-flex;\n  align-items: center;\n"]))),F=Object(_.a)(P.s)(c||(c=Object(C.a)(["\n  margin-right: 4px;\n"]))),J=Object(_.a)(P.s)(o||(o=Object(C.a)(["\n  width: 1em;\n  vertical-align: bottom;\n  margin-right: 40px;\n  cursor: pointer;\n\n  &:hover {\n    color: #000000;\n  }\n"]))),H=_.a.div(l||(l=Object(C.a)([""]))),V=function(e){var t=e.actions,a=e.counters,n=e.dictionary,r=e.filterBy,i=Object(L.c)(),c=Object(L.d)((function(e){return e.session.user}));return S.a.createElement(K,{className:"col-md-3 app-sidebar bottom-modal-mobile"},S.a.createElement(H,{className:"mobile-overlay",onClick:function(){document.body.classList.remove("mobile-modal-open")}}),S.a.createElement("div",{className:"bottom-modal-mobile_inner"},S.a.createElement("div",{className:"app-sidebar-menu",tabIndex:"2"},"internal"===c.type&&S.a.createElement("div",{className:"card-body create-new-post-wrapper"},S.a.createElement(M,{className:"btn btn-primary btn-block",onClick:t.showWorkspaceModal},S.a.createElement(F,{icon:"circle-plus"}),n.addNewWorkspace)),S.a.createElement("div",{className:"post-filter-item list-group list-group-flush"},S.a.createElement("span",{className:"list-group-item d-flex align-items-center pr-3","data-value":"inbox"},n.filters)),S.a.createElement(D,{actions:t,counters:a,dictionary:n,filterBy:r}),S.a.createElement("div",{className:"post-filter-item list-group list-group-flush"},S.a.createElement("span",{className:"list-group-item d-flex align-items-center pr-3","data-value":"inbox"},n.folders,S.a.createElement("span",{className:"ml-auto"},S.a.createElement(B.a,{onToggle:function(){document.querySelectorAll("span.react-tooltip-lite").forEach((function(e){e.parentElement.classList.toggle("tooltip-active")}))},content:n.newFolder},S.a.createElement(J,{className:"mr-0",icon:"plus",onClick:function(){i(Object(I.a)({type:"workspace_folder",mode:"create"}))}}))))),S.a.createElement(W.a,null))))},z=a(1),U=_.a.div(s||(s=Object(C.a)(["\n  overflow: inherit !important;\n  .action-right {\n    margin: 0 !important;\n  }\n  .action-left {\n    ul {\n      margin-bottom: 0;\n      display: inherit;\n\n      li {\n        position: relative;\n\n        .button-dropdown {\n        }\n      }\n    }\n    .app-sidebar-menu-button {\n      margin-left: 8px;\n    }\n  }\n  .btn-cross {\n    position: absolute;\n    top: 0;\n    right: 45px;\n    border: 0;\n    background: transparent;\n    padding: 0;\n    height: 100%;\n    width: 36px;\n    border-radius: 4px;\n    z-index: 9;\n    svg {\n      width: 16px;\n      color: #495057;\n    }\n  }\n"]))),q=S.a.memo((function(e){var t=e.actions,a=e.dictionary,n=e.search,r=n.value,i=n.searching,c=n.filterBy,o=Object(A.useState)(""),l=Object(j.a)(o,2),s=l[0],m=l[1],d=function(){t.updateSearch(Object(z.a)(Object(z.a)({},n),{},{value:s,filterBy:c,searching:!0}))},p=function(){t.updateSearch({value:""}),m("")};Object(A.useEffect)((function(){var e=setTimeout((function(){t.updateSearch({value:s,hasMore:!0})}),500);return function(){return clearTimeout(e)}}),[s]);return S.a.createElement(U,{className:"files-header app-action"},S.a.createElement("div",{className:"action-left mt-2"},S.a.createElement("span",{className:"app-sidebar-menu-button btn btn-outline-light",onClick:function(){document.body.classList.toggle("mobile-modal-open")}},S.a.createElement(P.s,{icon:"menu"}))),S.a.createElement("div",{className:"action-right"},S.a.createElement("div",{className:"input-group"},S.a.createElement("input",{type:"text",onChange:function(e){""===e.target.value.trim()&&""!==r?p():m(e.target.value)},value:s,onKeyDown:function(e){"Enter"!==e.key||i||d()},className:"form-control",placeholder:a.searchWorkspacePlaceholder,"aria-describedby":"button-addon1"}),""!==s.trim()&&S.a.createElement("button",{onClick:p,className:"btn-cross",type:"button"},S.a.createElement(P.s,{icon:"x"})),S.a.createElement("div",{className:"input-group-append"},S.a.createElement("button",{className:"btn btn-outline-light",type:"button",id:"button-addon1",onClick:d},S.a.createElement(P.s,{icon:"search"}))))))})),X=a(11),Z=a(10),G=_.a.div(m||(m=Object(C.a)(["\n  .workspace-title {\n    cursor: pointer;\n  }\n  .labels span {\n    display: flex;\n    align-items: center;\n  }\n  .mobile-icon {\n    display: none;\n  }\n  @media (max-width: 414px) {\n    .badge {\n      display: none;\n    }\n    .mobile-icon {\n      display: block;\n    }\n  }\n"]))),Q=Object(_.a)(P.s)(d||(d=Object(C.a)(["\n  width: 1rem;\n  height: 1rem;\n  margin-right: 3px;\n"]))),Y=_.a.span(p||(p=Object(C.a)(["\n  span.text-success {\n    margin-right: 0;\n  }\n"]))),$=Object(_.a)(P.s)(u||(u=Object(C.a)(["\n  width: 0.8rem;\n  height: 0.8rem;\n  color: #fff;\n  stroke-width: 3;\n  padding: 2px;\n"]))),ee=_.a.span(b||(b=Object(C.a)(["\n  background: #00c851;\n  border-radius: 50%;\n  margin-right: 3px;\n"]))),te=function(e){var t=e.dictionary,a=e.isExternal,n=e.isMember,r=e.item,i=e.onRedirect,c=e.members;return S.a.createElement(G,{className:"workspace-details"},S.a.createElement("div",{className:"title-labels"},S.a.createElement("span",{className:"workspace-title",onClick:function(e){return i(e,r)}},r.topic.name),r.topic.is_locked&&S.a.createElement(Q,{icon:"lock"}),r.topic.is_shared&&!a&&S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"badge badge-external ml-1 align-items-center"},S.a.createElement(Q,{icon:"eye"})," ",t.withClient),S.a.createElement(Q,{icon:"eye",className:"mobile-icon"}))),S.a.createElement("div",{className:"labels"},n&&S.a.createElement(Y,{className:"mr-2"},S.a.createElement(ee,null,S.a.createElement($,{icon:"check"})),S.a.createElement("span",{className:"text-success"},t.labelJoined)),S.a.createElement("span",{className:"mr-2"},S.a.createElement(Q,{icon:"user"}),c.length),r.workspace&&S.a.createElement("span",{className:"mr-2"},S.a.createElement(Q,{icon:"folder"}),r.workspace.name)))},ae=_.a.div(f||(f=Object(C.a)(["\n  margin-left: 10px;\n"]))),ne=Object(_.a)(P.s)(h||(h=Object(C.a)(["\n  width: 1rem;\n  height: 1rem;\n  margin-right: 10px;\n  &.favorite {\n    color: rgb(255, 193, 7);\n    fill: rgb(255, 193, 7);\n  }\n  :hover {\n    color: #7a1b8b;\n    cursor: pointer;\n    &.favorite {\n      color: rgb(255, 193, 7);\n      fill: rgb(255, 193, 7);\n    }\n  }\n"]))),re=_.a.button(E||(E=Object(C.a)(["\n  padding: 5px 10px;\n  font-size: 12px;\n  font-weight: 500;\n"]))),ie=function(e){var t=e.actions,a=e.dictionary,n=e.isExternal,r=e.isMember,i=e.item;return S.a.createElement(ae,{className:"workspace-list-buttons"},r&&!n&&S.a.createElement(ne,{icon:"pencil",onClick:function(){return t.edit(i)}}),S.a.createElement(ne,{icon:"star",className:"".concat(i.topic.is_favourite&&"favorite"),onClick:function(){return t.favourite(i)}}),r&&S.a.createElement(ne,{icon:i.topic.is_active?"bell":"bell-off",onClick:function(){t.toggleWorkspaceNotification(i)}}),r&&!n&&S.a.createElement(ne,{icon:"trash",onClick:function(){return t.showArchiveConfirmation(i)}}),S.a.createElement(re,{className:"btn ".concat(r?"btn-danger":"btn-primary"),onClick:function(){r?t.leave(i):t.join(i)}},r?a.buttonLeave:a.buttonJoin))},ce=_.a.li(v||(v=Object(C.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  list-style: none;\n  border-right: none;\n  border-left: none;\n\n  .workspace-icon {\n    position: relative;\n  }\n  .workspace-list-buttons {\n    display: none;\n  }\n  .workspace-title {\n    font-size: 1rem;\n  }\n  .title-labels,\n  .labels {\n    display: flex;\n  }\n  .title-labels {\n    align-items: center;\n    .feather-lock {\n      margin: 0 5px;\n    }\n    .feather-eye {\n      width: 0.8rem;\n      height: 0.8rem;\n    }\n  }\n  :hover {\n    button {\n      display: inline-flex;\n    }\n    .workspace-list-buttons {\n      display: block;\n    }\n  }\n"]))),oe=Object(_.a)(P.s)(g||(g=Object(C.a)(["\n  position: absolute;\n  z-index: 2;\n  width: 1rem;\n  height: 1rem;\n  top: 0;\n  right: 0;\n  color: rgb(255, 193, 7);\n  fill: rgb(255, 193, 7);\n"]))),le=function(e){var t=e.actions,a=e.dictionary,n=e.item,r=n.members.map((function(e){return e.member_ids?e.member_ids:e.id})).flat(),i=Object(x.a)(new Set(r)),c=Object(Z.C)(i),o="external"===Object(L.d)((function(e){return e.session.user})).type,l=function(e,a){var n={id:a.topic.id,name:a.topic.name,folder_id:a.workspace?a.workspace.id:null,folder_name:a.workspace?a.workspace.name:null};t.toWorkspace(n)};return S.a.createElement(ce,{className:"list-group-item"},S.a.createElement("div",{className:"workspace-icon mr-3"},n.topic.is_favourite&&S.a.createElement(oe,{icon:"star"}),S.a.createElement(P.a,{forceThumbnail:!1,type:"TOPIC",imageLink:n.topic.icon_link,id:n.topic.id,name:n.topic.name,onClick:function(e){return l(0,n)},showSlider:!1})),S.a.createElement(te,{dictionary:a,isExternal:o,isMember:c,members:i,item:n,onRedirect:l}),S.a.createElement(ie,{actions:t,dictionary:a,isExternal:o,isMember:c,item:n}))},se=_.a.div(w||(w=Object(C.a)(["\n  overflow: visible !important;\n"]))),me=_.a.li(O||(O=Object(C.a)(["\n  border: none;\n  cursor: pointer;\n  .badge.badge-light {\n    background: #f1f2f7;\n  }\n"]))),de=_.a.ul(N||(N=Object(C.a)(["\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  li {\n    padding: 15px;\n  }\n  li:nth-child(2) {\n    border-top: none;\n  }\n  &.active-workspaces {\n    border-radius 6px 6px 0 0;\n  }\n  &.archived-workspaces {\n    .dark & {\n      border: 1px solid;\n      border-top: 0;\n      border-color: hsla(0,0%,60.8%,.1);\n      border-radius: 0 0 6px 6px;\n      background: #252a2d;\n    }\n  }\n  &.archived-workspaces li {\n    background-color: #fafafa;\n    opacity: .7;\n    .dark & {\n      background-color: #252a2d;\n    }\n  }\n  &.archived-workspaces li:last-child {\n    border-radius 0 0 6px 6px;\n    border-bottom: none;\n  }\n"]))),pe=function(e){var t=e.actions,a=e.dictionary,n=e.filterBy,r=e.results,i=Object(A.useState)({showActive:!0,showArchived:!0}),c=Object(j.a)(i,2),o=c[0],l=c[1],s=Object(A.useState)({activeDate:!0,archivedDate:!0}),m=Object(j.a)(s,2),d=m[0],p=m[1],u=function(e){l(Object(z.a)(Object(z.a)({},o),{},Object(X.a)({},e,!o[e])))},b=function(e){p(Object(z.a)(Object(z.a)({},d),{},Object(X.a)({},e,!d[e])))};return S.a.createElement(se,{className:"card"},S.a.createElement(de,{className:"active-workspaces"},S.a.createElement(me,{className:"list-group-item"},S.a.createElement("span",{className:"badge badge-light",onClick:function(){return u("showActive")}},S.a.createElement(P.s,{icon:o.showActive?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),a.active),S.a.createElement("div",{style:{float:"right"}},S.a.createElement(P.t,{content:d.activeDate?a.workspaceSortOptionsDate:a.workspaceSortOptionsAlpha},S.a.createElement("span",{className:"badge badge-light",onClick:function(){return b("activeDate")}},S.a.createElement(P.s,{icon:d.activeDate?"arrow-down":"arrow-up",width:16,height:16,className:"mr-1"}))))),o.showActive&&r.filter((function(e){return"favourites"===n?!e.topic.is_archive&&e.topic.is_favourite:!e.topic.is_archive})).sort((function(e,t){return d.activeDate?new Date(t.topic.created_at.date_time)-new Date(e.topic.created_at.date_time):e.topic.name.toLowerCase()<t.topic.name.toLowerCase()?-1:e.topic.name.toLowerCase()>t.topic.name.toLowerCase()?1:0})).map((function(e){return S.a.createElement(le,{actions:t,key:e.topic.id,dictionary:a,item:e})}))),S.a.createElement(de,{className:"archived-workspaces"},S.a.createElement(me,{className:"list-group-item"},S.a.createElement("span",{className:"badge badge-light",onClick:function(){return u("showArchived")}},S.a.createElement(P.s,{icon:o.showArchived?"arrow-up":"arrow-down",width:16,height:16,className:"mr-1"}),a.archived),S.a.createElement("div",{style:{float:"right"}},S.a.createElement(P.t,{content:d.archivedDate?a.workspaceSortOptionsDate:a.workspaceSortOptionsAlpha},S.a.createElement("span",{className:"badge badge-light",onClick:function(){return b("archivedDate")}},S.a.createElement(P.s,{icon:d.archivedDate?"arrow-down":"arrow-up",width:16,height:16,className:"mr-1"}))))),o.showArchived&&r.filter((function(e){return"favourites"===n?e.topic.is_archive&&e.topic.is_favourite:e.topic.is_archive})).sort((function(e,t){return d.archivedDate?new Date(t.topic.created_at.date_time)-new Date(e.topic.created_at.date_time):e.topic.name.toLowerCase()<t.topic.name.toLowerCase()?-1:e.topic.name.toLowerCase()>t.topic.name.toLowerCase()?1:0})).map((function(e){return S.a.createElement(le,{actions:t,key:e.topic.id,dictionary:a,item:e})}))))},ue=_.a.div(k||(k=Object(C.a)(["\n  overflow: hidden auto;\n  .app-block {\n    overflow: inherit;\n    .app-content {\n      height: auto;\n    }\n  }\n"]))),be=_.a.div(y||(y=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"])));t.default=function(e){var t=Object(Z.v)(),a=t.search,n=t.filteredResults,r=a.loaded,i=a.results,c=a.filterBy,o=a.hasMore,l=a.count,s=Object(Z.gb)()._t,m=Object(Z.rb)(),d=Object(A.useState)(null),p=Object(j.a)(d,2),u=p[0],b=p[1],f=Object(A.useState)(null),h=Object(j.a)(f,2),E=h[0],v=h[1],g=Object(A.useRef)(!0);Object(A.useEffect)((function(){return document.body.classList.add("stretch-layout"),m.getFilterCount((function(e,t){})),r||m.search({search:"",skip:0,limit:25,filter_by:"all"},(function(e,t){g.current&&b(!1),e?m.updateSearch({searching:!1}):(v(!0),m.updateSearch({filterBy:c,searching:!1,count:t.data.total_count,hasMore:t.data.has_more,results:t.data.workspaces,loaded:!0}))})),function(){g.current=!1,m.updateSearch({filterBy:"all",filterByFolder:null})}}),[]),Object(A.useEffect)((function(){null!==E&&r&&o&&m.search({search:"",skip:i.length,limit:l-i.length,filter_by:"all"},(function(e,t){if(g.current&&b(!1),e)m.updateSearch({searching:!1});else{var a=[].concat(Object(x.a)(i),Object(x.a)(t.data.workspaces)),n=Object(x.a)(new Map(a.map((function(e){return[e.topic.id,e]}))).values());m.updateSearch({count:t.data.total_count,hasMore:t.data.has_more,results:n})}}))}),[E,r]);var w={notJoined:s("ALL_WORKSPACE.NOT_JOINED","Not joined"),withClient:s("ALL_WORKSPACE.WITH_CLIENT","With client"),searchWorkspacePlaceholder:s("PLACEHOLDER.SEARCH_WORKSPACE_TITLE","Search workspace"),filters:s("PLACEHOLDER.SEARCH_WORKSPACE_FILTER","Filters","Filters"),private:s("WORKSPACE.PRIVATE","Private"),archived:s("WORKSPACE.ARCHIVED","Archived"),new:s("WORKSPACE.NEW","New"),active:s("ALL_WORKSPACE.ACTIVE","Active"),labelOpen:s("LABEL.OPEN","Open"),labelJoined:s("LABEL.JOINED","Joined"),buttonJoin:s("BUTTON.JOIN","Join"),buttonLeave:s("BUTTON.LEAVE","Leave"),externalAccess:s("WORKSPACE_SEARCH.EXTERNAL_ACCESS","External access"),addNewWorkspace:s("SIDEBAR.ADD_NEW_WORKSPACES","Add new workspace"),favourites:s("WORKSPACE.FAVOURITES","Favourites"),all:s("ALL_WORKSPACE.ALL","All"),workspaceSortOptionsAlpha:s("WORKSPACE_SORT_OPTIONS.ALPHA","Sort by Alphabetical Order (A-Z)"),workspaceSortOptionsDate:s("WORKSPACE_SORT_OPTIONS.DATE","Sort by Date (New to Old)"),folders:s("ALL_WORKSPACE.FOLDERS","Folders"),newFolder:s("TOOLTIP.NEW_FOLDER","New folder")};return S.a.createElement(ue,{className:"container-fluid h-100 fadeIn"},S.a.createElement("div",{className:"row app-block"},S.a.createElement(V,{actions:m,dictionary:w,filterBy:c,counters:a.counters}),S.a.createElement("div",{className:"col-lg-9 app-content mb-4"},S.a.createElement("div",{className:"app-content-overlay"}),S.a.createElement(q,{actions:m,dictionary:w,search:a}),r&&S.a.createElement(pe,{actions:m,dictionary:w,filterBy:c,results:n}),u&&S.a.createElement(be,{className:"card initial-load"},S.a.createElement(P.j,null)))))}}}]);