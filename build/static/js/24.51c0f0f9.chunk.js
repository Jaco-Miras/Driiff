(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[24],{755:function(n,e,t){"use strict";t.r(e);var i,a,r,o,s,l,c,p,d,u,h,f,m,g,x,b,w,y,v,A,_,O,E,j,k,C,F,N=t(4),B=t(0),S=t(9),I=t(1),M=t.n(I),T=t(743),z=t(10),R=t(5),q=t(12),D=t(19),L=t(739),G=(t(291),t(37)),P=t(667),U=t(668),H=t(669),Y=z.a.div(i||(i=Object(S.a)(["\n  position: relative;\n  display: inline-flex;\n  flex-flow: column;\n  padding: ",";\n  border-radius: 6px;\n  background: ",";\n  text-align: left;\n  width: 100%;\n  color: ",";\n  font-size: 0.835rem;\n  overflow: visible;\n  min-height: ",";\n\n  &:after {\n    border: 10px solid #0000;\n    position: absolute;\n    top: 6px;\n    z-index: 1;\n    ",";\n    border-left-color: ",";\n    border-right-color: ",";\n    height: 5px;\n  }\n\n  a:not([href]):not([tabindex]) {\n    color: ",";\n\n    &:hover {\n      color: ",";\n    }\n  }\n\n  video {\n    width: 100%;\n  }\n  p.reply-author {\n    color: ",";\n    font-weight: 400;\n    font-size: 12px;\n    font-style: italic;\n    margin: 0;\n    display: block;\n    position: absolute;\n    top: -24px;\n    left: 0;\n    white-space: nowrap;\n    ","\n  }\n  span.emoticon-body {\n    font-size: 2.5rem;\n    padding: 20px 10px;\n    text-align: ",";\n  }\n  .reply-content img {\n    max-width: 100%;\n    max-height: 300px;\n  }\n  span.reply-date {\n    color: ",";\n    font-style: italic;\n    font-size: 11px;\n    position: absolute;\n    top: 0;\n    ",";\n    display: flex;\n    height: 100%;\n    text-align: ",";\n    white-space: nowrap;\n  }\n  ol {\n    text-align: left;\n    position: relative;\n    padding-inline-start: 0;\n    li {\n      margin-left: 0;\n    }\n  }\n  ul {\n    li {\n      text-align: left;\n      position: relative;\n      margin-left: 0;\n    }\n  }\n  span.is-deleted {\n    font-style: italic;\n    color: ",";\n  }\n  span.image-uploading {\n    display: none;\n  }\n  .chat-file-notification {\n    b:hover {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  }\n"])),(function(n){return n.hasFiles?"3px":"6px 9px 8px 9px"}),(function(n){return n.isAuthor?"#7A1B8B":"#F0F0F0"}),(function(n){return n.isAuthor?"#ffffff":"#000000"}),(function(n){return n.hasGif?"150px":"33px"}),(function(n){return n.isAuthor?"right: -16px":"left: -15px"}),(function(n){return n.isAuthor?"#7A1B8B":"#0000"}),(function(n){return n.isAuthor?"#0000":"#F0F0F0"}),(function(n){return n.isAuthor?"#ffffff":"#8C3B9B"}),(function(n){return n.isAuthor?"#fff":"#0056b3"}),(function(n){return n.isAuthor?"#ffffff":"#AAB0C8"}),(function(n){return!0===n.isForwardedMessage&&"top: -40px;"}),(function(n){return n.isAuthor?"right":"left"}),(function(n){return n.showAvatar&&!1===n.hideBg||n.hasRemoveOnDlFiles?"#a7abc3":"#0000"}),(function(n){return n.isAuthor?"right: 100%":"left: 100%"}),(function(n){return n.isAuthor?"right":"left"}),(function(n){return n.isAuthor?"#ffffffe6":"#AAB0C8"})),J=z.a.div(a||(a=Object(S.a)(["\n  background: ",";\n  border-radius: 6px;\n  margin: 4px -4px 4px -4px;\n  text-align: left;\n  padding: 10px 10px 10px 20px;\n  position: relative;\n  cursor: pointer;\n  max-width: ",";\n  &:before {\n    height: 70%;\n    width: 5px;\n    background: ",";\n    background: #ffffffe6;\n    position: absolute;\n    ",";\n    display: inline-block;\n    float: left;\n    left: 5px;\n    opacity: 0.8;\n    @media all and (max-width: 620px) {\n      display: none;\n    }\n  }\n  @media all and (max-width: 620px) {\n    margin: 7px -7px 10px -7px;\n    padding: 7px;\n  }\n"])),(function(n){return n.isAuthor?"#8C3B9B":"#E4E4E4"}),(function(n){return n.hasFiles?"210px":"auto"}),(function(n){return n.isAuthor?"#8C3B9B":"#E4E4E4"}),(function(n){return!n.isEmoticonOnly&&"content: ''"})),V=z.a.div(r||(r=Object(S.a)(["\n  font-weight: 600;\n  @media all and (max-width: 620px) {\n    font-size: 11px;\n    line-height: 1.2;\n    font-weight: normal;\n  }\n"]))),K=z.a.div(o||(o=Object(S.a)(["\n  color: ",";\n  max-width: 100%;\n  img,\n  video {\n    display: none;\n  }\n  .video-quote,\n  .image-quote {\n    img {\n      width: auto;\n      display: inline-block;\n    }\n  }\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre-wrap;\n  a {\n    color: ",";\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n\n    @media only screen and (max-width: 1024px) {\n      white-space: normal;\n      word-break: break-word;\n\n      &:hover {\n        word-break: unset;\n      }\n    }\n\n    &:hover {\n      overflow: unset;\n      white-space: unset;\n      text-overflow: unset;\n      word-break: break-word;\n    }\n  }\n"])),(function(n){return n.isAuthor?"#ffffffe6":"#000000"}),(function(n){return n.isAuthor?"#ffffffe6":"#8C3B9B"})),W=Object(z.a)(P.a)(s||(s=Object(S.a)(["\n  img {\n    cursor: pointer;\n  }\n  a {\n    font-weight: bold;\n    cursor: pointer;\n  }\n  .reply-file-item {\n    display: block;\n    font-weight: bold;\n\n    &.component-image-text-link {\n      img.component-svg-image {\n        display: inline-block;\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        filter: brightness(0) saturate(100%) ",";\n      }\n\n      &:hover {\n        color: #972c86;\n\n        img.component-svg-image {\n          filter: brightness(0) saturate(100%) ",";\n        }\n      }\n    }\n\n    &.file-only {\n      img {\n        width: 52.5px;\n        height: 52.5px;\n      }\n    }\n  }\n\n  ","\n"])),(function(n){return n.isAuthor?Object(L.hexToCSSFilter)("#ffffff").filter:Object(L.hexToCSSFilter)("#8C3B9B").filter}),(function(n){return n.isAuthor?Object(L.hexToCSSFilter)("#fff").filter:Object(L.hexToCSSFilter)("#0056b3").filter}),(function(n){return n.hasMessage&&""})),Q=z.a.span(l||(l=Object(S.a)(["\n  max-width: ",";\n  padding: ",";\n  ul {\n    list-style-type: none;\n  }\n\n  a,\n  a:not([href]):not([tabindex]) {\n    cursor: pointer;\n    color: ",";\n    color: ",";\n    text-decoration: underline;\n\n    &.gdrive-link {\n      text-decoration: none;\n\n      .link {\n        @media (max-width: 1580px) {\n          max-width: 20vw;\n        }\n        @media (max-width: 1480px) {\n          max-width: 14vw;\n        }\n        @media (max-width: 1380px) {\n          max-width: 5vw;\n        }\n        @media (max-width: 991.99px) {\n          max-width: 350px;\n        }\n        @media (max-width: 822px) {\n          max-width: 20vw;\n        }\n      }\n      .preview-text {\n        font-weight: bold;\n        color: ",";\n      }\n    }\n\n    &:focus,\n    &:hover {\n      color: ",";\n    }\n    &.btn {\n      border: 1px solid ",";\n\n      &:focus,\n      &:hover {\n        border: 1px solid ",";\n      }\n\n      &.btn-action {\n        margin-top: 0.5rem;\n        border-radius: 8px;\n      }\n\n      &.btn-complete {\n        color: ",";\n        border: 1px solid ",";\n      }\n    }\n  }\n\n  span.completed {\n    text-decoration: line-through;\n  }\n"])),(function(n){return n.hasFiles?"200px":"auto"}),(function(n){return n.hasFiles?"7px 4px 5px 6px":""}),(function(n){return n.isAuthor?"#ffffff":"#8C3B9B"}),(function(n){return n.isAuthor?"#ffffff99":"#7a1b8b"}),(function(n){return n.isAuthor?"#FFF":"#828282"}),(function(n){return n.isAuthor?"#ffffff":"#7a1b8b"}),(function(n){return n.isAuthor?"#ffffff":"#8C3B9B"}),(function(n){return n.isAuthor?"#fff":"#0056b3"}),(function(n){return n.isAuthor?"#fff":"#0056b3"}),(function(n){return n.isAuthor?"#fff":"#0056b3"})),X=z.a.div(c||(c=Object(S.a)(["\n  display: flex;\n  flex-flow: ",";\n\n  .chat-content {\n    width: 100%;\n    padding-left: 0;\n  }\n\n  .chat-clap {\n    float: ",";\n  }\n"])),(function(n){return n.isAuthor?"row":"row-reverse"}),(function(n){return n.isAuthor?"left":"right"})),Z=z.a.div(p||(p=Object(S.a)(["\n  ","\n\n  .reply-author {\n    ",";\n  }\n  .reply-content {\n    clear: both;\n    width: 100%;\n    display: block;\n    z-index: 1;\n\n    p {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n\n      a {\n        color: ",";\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n\n        @media only screen and (max-width: 1024px) {\n          white-space: normal;\n          word-break: break-word;\n\n          &:hover {\n            word-break: unset;\n          }\n        }\n\n        &:hover {\n          overflow: unset;\n          white-space: unset;\n          text-overflow: unset;\n          word-break: break-word;\n        }\n      }\n    }\n  }\n  .gif_player {\n    clear: both;\n    position: relative;\n    left: 0;\n    overflow: hidden;\n    //height: 250px;\n    min-height: 150px;\n    cursor: pointer;\n    .gifPlayer {\n      border-radius: 8px;\n      max-height: 250px;\n    }\n    .play_button {\n      height: 60px;\n      width: 60px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n"])),(function(n){return!n.isEmoticonOnly&&"\n    &:before {\n        ".concat((function(n){return n.showAvatar&&"content: ''"}),";\n        border: 10px solid transparent;\n        border-left-color: #f0f0f0;\n        position: absolute;\n        top: 6px;\n        left: -15px;\n        z-index: 1;\n        ").concat((function(n){return!0===n.isAuthor&&"\n            left: auto;\n            right: -15px;\n            border-left-color: red;\n            border-left-color: #7A1B8B;\n            border-right-color: transparent;\n        "}),";\n        width: 20px;\n        height: 20px;\n    }\n    ")}),(function(n){return n.isAuthor?"margin-left: 30px":"margin-right: 30px"}),(function(n){return n.isAuthor,"#ff4444"})),$=z.a.div(d||(d=Object(S.a)(["\n  color: #676767;\n  display: flex;\n  flex-flow: ",";\n  .reply-date {\n    margin: ",";\n    flex-flow: column;\n    justify-content: center;\n  }\n  .reply-date.updated {\n    > span:last-child {\n      display: none;\n    }\n  }\n  .reply-date.updated:hover {\n    > span:first-child {\n      display: none;\n    }\n    > span:last-child {\n      display: block;\n    }\n  }\n"])),(function(n){return n.isAuthor?"row":"row-reverse"}),(function(n){return n.isAuthor?"0 10px 0 0":"0 0 0 10px"})),nn=z.a.span(u||(u=Object(S.a)(["\n  color: #aab0c8;\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  position: absolute;\n  top: calc(50% - 25px);\n  margin: 0 10px;\n  ",";\n  height: 25px;\n  white-space: nowrap;\n\n  svg {\n    width: 15px;\n    height: 15px;\n    position: relative;\n    top: 2px;\n    margin-right: 5px;\n  }\n"])),(function(n){return n.isAuthor?"right: 100%;":"left: 100%;"})),en=z.a.span(h||(h=Object(S.a)(["\n  padding: ",";\n  font-weight: 500;\n  color: #929496;\n  &.important {\n    font-weight: 600;\n    color: #191c20;\n  }\n  @media (max-width: 620px) {\n    display: block;\n    font-size: 11px;\n    line-height: 1.2;\n  }\n"])),(function(n){return n.isEmoticonOnly||n.isGifOnly||!0===n.hasFiles?"3px 9px 3px 9px":"0"})),tn=M.a.memo((function(n){var e=n.reply,t=n.showAvatar,i=n.selectedChannel,a=n.showGifPlayer,r=n.isAuthor,o=n.user,s=n.chatMessageActions,l=n.timeFormat,c=n.chatSettings,p=n.dictionary,d=n.users,u=n.translated_channels,h=n.chat_language,f=n.translate,m=n.language,g=Object(G.g)(),x=Object(q.v)();Object(H.a)({message:e,actions:s}),Object(U.a)({message:e,isAuthor:r,translate:i.is_translate,chat_language:h,actions:s});var b=Object(q.c)({reply:e,dictionary:p,isAuthor:r,user:o,selectedChannel:i,users:d,translate:f,language:m,translated_channels:u,chat_language:h}),w=b.quoteAuthor,y=b.quoteBody,v=b.replyBody,A=b.hasMessage,_=b.isGifOnly,O=b.isEmoticonOnly,E=e.files.length>0,j=e.files.some((function(n){return n.remove_on_download})),k={container:Object(I.useRef)(null)},C=Object(I.useRef)(null),F=function(n){return n.preventDefault(),g.push(n.currentTarget.dataset.href),!1};Object(I.useEffect)((function(){var n=k.container.current.querySelector("a.push");return n&&n.addEventListener("click",F,!0),function(){n&&n.removeEventListener("click",F,!0)}}),[]);var N=e.user&&d[e.user.id]&&"external"===d[e.user.id].type&&!r;return M.a.createElement(Y,{ref:k.container,tabIndex:e.id,hasFiles:E,className:"chat-bubble ql-editor ".concat(e.is_important&&"important"," ").concat(N&&"external-chat"),showAvatar:t,isAuthor:r,hideBg:O||_||E&&!A,theme:c.chat_message_theme,hasGif:a,hasRemoveOnDlFiles:j},M.a.createElement(M.a.Fragment,null,e.is_transferred&&M.a.createElement(nn,{className:"small",isAuthor:r},M.a.createElement(D.s,{icon:"corner-up-right"}),p.forwardedMessage),M.a.createElement(X,{className:"chat-content-clap",isAuthor:r},M.a.createElement(Z,{showAvatar:t,isAuthor:r,isEmoticonOnly:O,className:"chat-content animated slower",ref:C},!r&&t&&M.a.createElement(M.a.Fragment,null,M.a.createElement(en,{isEmoticonOnly:O,hasFiles:E,isGifOnly:_,className:"chat-name-not-author-mobile ".concat(e.is_important&&"important")},"BOT"===e.user.type&&e.user.code&&e.user.code.includes("huddle")?p.teamFeedback:e.user.name)),e.quote&&e.quote.body&&!e.is_deleted&&(void 0!==e.quote.user_id||void 0!==e.quote.user)&&M.a.createElement(J,{className:"quote-container",showAvatar:t,isEmoticonOnly:O,hasFiles:E,theme:c.chat_message_theme,onClick:function(n){if(e.quote){var t=document.querySelector(".chat-list-item-".concat(e.quote.id));t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},isAuthor:r},e.quote.user_id===o.id?M.a.createElement(V,{theme:c.chat_message_theme,isAuthor:!0},"You"):M.a.createElement(V,{theme:c.chat_message_theme,isAuthor:e.quote.user_id===o.id},w),M.a.createElement(K,{ref:function(n){n&&n.querySelectorAll('[data-google-link-retrieve="0"]').forEach((function(n){x.init(n)}))},className:"quote-content",theme:c.chat_message_theme,isAuthor:r,dangerouslySetInnerHTML:{__html:y}})),e.files.length>0&&!e.is_deleted&&M.a.createElement(W,{dictionary:p,hasMessage:A,isAuthor:r,theme:c.chat_message_theme,files:e.files,reply:e,type:"chat",topic_id:"TOPIC"===i.type?i.entity_id:null}),A&&M.a.createElement("span",null,M.a.createElement(Q,{ref:function(n){n&&n.querySelectorAll('[data-google-link-retrieve="0"]').forEach((function(n){x.init(n)}))},hasFiles:E,theme:c.chat_message_theme,isAuthor:r,className:"reply-content ".concat(O?"emoticon-body":""," ").concat(e.is_deleted?"is-deleted":""),dangerouslySetInnerHTML:{__html:v}})),a&&M.a.createElement(D.c,{body:e.body,autoplay:!0}))),M.a.createElement($,{className:"chat-timestamp",isAuthor:r},M.a.createElement("span",{className:"reply-date created"},M.a.createElement("span",null,l.todayOrYesterdayDate(e.created_at.timestamp)),j&&M.a.createElement("span",null,p.removeOnDownload)))))})),an=t(670),rn=t(671),on=t(672),sn=t(682),ln=t(673),cn=t(17),pn=z.a.span(f||(f=Object(S.a)(['\n  display: block;\n  width: 100%;\n\n  .chat-file-notification {\n    b:hover {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  }\n\n  .push-link {\n    display: inline-block;\n    position: relative;\n    padding-bottom: 25px;\n    margin-bottom: -25px;\n    width: 100%;\n\n    &:before {\n      position: absolute;\n      left: -14px;\n      top: -7px;\n      bottom: 0;\n      width: 6px;\n      height: calc(100% - 12px);\n      background: linear-gradient(180deg, rgba(106, 36, 126, 1) 0%, rgba(216, 64, 113, 1) 100%);\n      content: "";\n      border-radius: 6px 0 0 6px;\n    }\n\n    .card-body {\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      padding: 1rem;\n      max-width: 95%;\n      display: block;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      font-size: 12px;\n    }\n\n    .open-post {\n      display: flex;\n      position: absolute;\n      right: -20px;\n      bottom: -10px;\n      justify-content: center;\n      align-items: center;\n      font-size: 12px;\n\n      svg {\n        margin-left: 0;\n        height: 12px;\n      }\n    }\n  }\n']))),dn=z.a.span(m||(m=Object(S.a)(["\n  display: block;\n  width: 100%;\n"]))),un=z.a.div(g||(g=Object(S.a)(["\n  color: #a7abc3;\n  font-style: italic;\n  font-size: 11px;\n  position: absolute;\n  top: 0;\n  left: calc(100% + 10px);\n  display: flex;\n  height: 100%;\n  align-items: center;\n  white-space: nowrap;\n\n  .star-wrap {\n    .feather-star {\n      width: 16px;\n      height: 16px;\n\n      &.active {\n        fill: #7a1b8bcc;\n        color: #7a1b8bcc;\n      }\n    }\n  }\n"]))),hn=Object(I.forwardRef)((function(n,e){var t=n.reply,i=n.selectedChannel,a=n.chatMessageActions,r=n.user,o=n.timeFormat,s=n.dictionary,l=n.users,c=Object(G.g)(),p=Object(G.i)(),d=Object(q.T)({dictionary:s,reply:t,selectedChannel:i,user:r,users:l}).parseBody;return M.a.createElement(pn,null,M.a.createElement(dn,{ref:e,id:"bot-".concat(t.id),onClick:function(){if(t.body.startsWith("UPLOAD_BULK::")){var n=JSON.parse(t.body.replace("UPLOAD_BULK::",""));n.files&&a.viewFiles(n.files)}else if(t.body.startsWith("POST_CREATE::")){if(""!==t.body.replace("POST_CREATE::","").trim()){var e=JSON.parse(t.body.replace("POST_CREATE::",""));p&&p.workspaceId?p.folderId?c.push("/workspace/posts/".concat(p.folderId,"/").concat(p.folderName,"/").concat(p.workspaceId,"/").concat(Object(cn.h)(p.workspaceName),"/post/").concat(e.post.id,"/").concat(Object(cn.h)(e.post.title))):c.push("/workspace/posts/".concat(p.workspaceId,"/").concat(p.workspaceName,"/post/").concat(e.post.id,"/").concat(Object(cn.h)(e.post.title))):c.push("/posts/".concat(e.post.id,"/").concat(Object(cn.h)(e.post.title)))}}},dangerouslySetInnerHTML:{__html:d},isPostNotification:t.body.includes("POST_CREATE::")}),M.a.createElement(un,{className:"chat-timestamp",isAuthor:!1},M.a.createElement("span",{className:"reply-date created"},o.localizeTime(t.created_at.timestamp))))})),fn=M.a.memo(hn),mn=z.a.li(x||(x=Object(S.a)(["\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  margin-bottom: ",';\n  text-align: center;\n  .chat-reply-list-item {\n    position: relative;\n    :before {\n      top: 7px;\n    }\n  }\n  .chat-actions-container {\n    opacity: 0;\n\n    .star-wrap {\n      position: relative;\n      display: flex;\n      &[data-star="true"] {\n        .feather-star {\n          fill: #7a1b8bcc;\n          color: #7a1b8bcc;\n        }\n      }\n      .feather-star {\n        width: 16px;\n        height: 16px;\n        cursor: pointer;\n      }\n      .star-count {\n        font-size: 0.835rem;\n        color: #a7abc3;\n        height: 16px;\n        line-height: 16px;\n        padding: 0 4px;\n      }\n      .star-user-popup {\n        position: absolute;\n        width: 250px;\n        padding: 4px;\n        background-color: #ffffff;\n        top: 100%;\n        z-index: 1;\n        border-top: 1px solid #eeeeee;\n        border-radius: 8px;\n        color: #4d4d4d;\n\n        .dark & {\n          background-color: #25282c;\n          border-top: 1px solid #25282c;\n          border-radius: 8px;\n          color: #c7c7c7;\n        }\n\n        .name {\n          display: block;\n          width: 100%;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n        }\n      }\n\n      display: none;\n      visibility: hidden;\n    }\n  }\n\n  &:hover {\n    .chat-actions-container {\n      opacity: 1;\n    }\n  }\n'])),(function(n){return n.isLastChat?"20px":"5px"})),gn=z.a.div(b||(b=Object(S.a)(["\n  z-index: 1;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  color: #a7abc3;\n  padding: 26px 0 14px 0;\n  position: sticky;\n  top: 0;\n  span {\n    padding: 4px 8px;\n    display: inline-block;\n    font-size: 11px;\n    border-radius: 6px;\n    margin: 0 4px;\n    background: #f0f0f0;\n  }\n  &[stuck] {\n    &:before,\n    &:after {\n      display: none;\n    }\n  }\n  @media (max-width: 620px) {\n    padding: 14px 0 10px 0;\n  }\n"]))),xn=z.a.div(w||(w=Object(S.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  //align-items: ",";\n  justify-content: flex-end;\n  flex-flow: column;\n  flex-flow: ",";\n  margin-left: ",";\n  ",";\n  margin-top: ",";\n  margin-top: ",";\n  @media (max-width: 620px) {\n    margin-top: ",";\n    margin-top: ",";\n    ",";\n    ",";\n    ",";\n  }\n  &:before {\n    ",";\n    border: 10px solid transparent;\n    border-right-color: ",";\n    position: absolute;\n    top: ",";\n    left: 30px;\n    z-index: 1;\n    @media all and (max-width: 620px) {\n      display: none;\n    }\n    ",";\n  }\n  .dark & {\n    &:before {\n      display: none;\n    }\n  }\n"])),(function(n){return n.isAuthor?"flex-end":"flex-start"}),(function(n){return n.isAuthor?"row":"row-reverse"}),(function(n){return n.isAuthor||n.showAvatar?"0":"22px"}),(function(n){return!0===n.isAuthor&&"position: relative; right: 15px;"}),(function(n){return n.showAvatar&&"36px"}),(function(n){return n.showAvatar&&n.isAuthor&&"20px"}),(function(n){return n.showAvatar&&"12px"}),(function(n){return n.showAvatar&&n.isAuthor&&"8px"}),(function(n){return!n.showAvatar&&!n.isAuthor&&!n.isBot&&"margin-left: 0"}),(function(n){return!0===n.isAuthor&&!n.showAvatar&&"position: relative; right: 0px;"}),(function(n){return!0===n.isAuthor&&"position: relative; right: 0px;"}),(function(n){return n.showAvatar&&"content: '';"}),(function(n){return n.isImportant?"#7B68EE":n.isExternalChat?"#FFDB92":"#f0f0f0"}),(function(n){return n.showAvatar&&!n.isAuthor?"42px":"6px"}),(function(n){return!0===n.isAuthor&&"\n            left: auto;\n            right: -16px;\n            border-left-color:  ".concat((function(n){return n.isImportant?"#7B68EE":"#7A1B8B"}),";\n            border-right-color: transparent;\n            @media all and (max-width: 620px) {\n              display: none;\n            }\n        ")})),bn=z.a.div(y||(y=Object(S.a)(["\n  flex-flow: ",";\n  flex-wrap: wrap;\n  ",";\n  min-width: 150px;\n  color: #a7abc3;\n  background: #ffffff;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: 0;\n  ",";\n  height: calc(100% + 4px);\n  margin-top: -2px;\n  transition: opacity 0.3s ease;\n"])),(function(n){return n.isAuthor?"row-reverse":"row"}),(function(n){return n.isAuthor?"margin-right: 10px":"margin-left: 10px"}),(function(n){return n.isAuthor?"right: 100%":"left: 100%"})),wn=z.a.div(v||(v=Object(S.a)(["\n  flex-flow: ",";\n  flex-wrap: wrap;\n  ",";\n  min-width: 150px;\n  color: #a7abc3;\n  background: #ffffff;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: 0;\n  ",";\n  height: calc(100% + 4px);\n  margin-top: -2px;\n  transition: opacity 0.3s ease;\n  button {\n    margin: 5px;\n  }\n"])),(function(n){return n.isAuthor?"row-reverse":"row"}),(function(n){return n.isAuthor?"margin-right: 10px":"margin-left: 10px"}),(function(n){return n.isAuthor?"right: 100%":"left: 100%"})),yn=Object(z.a)(an.a)(A||(A=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n  margin: 5px;\n  max-width: 25px;\n\n  @media (max-width: 620px) {\n    margin-right: 0;\n  }\n\n  .more-options-tooltip {\n    &.orientation-bottom {\n      top: calc(100% - 35px);\n      @media (max-width: 620px) {\n        top: 100%;\n      }\n    }\n\n    &.orientation-top {\n      @media (max-width: 620px) {\n        bottom: 30px;\n      }\n    }\n\n    &.orientation-right {\n      left: calc(100% + 10px);\n      @media (max-width: 620px) {\n        left: 0;\n      }\n    }\n    &.orientation-left {\n      @media (max-width: 620px) {\n        left: auto;\n        right: 0;\n      }\n    }\n  }\n"]))),vn=z.a.div(_||(_=Object(S.a)(["\n  //width: 100%;\n  //overflow: hidden;\n  max-width: 75%;\n  position: relative;\n  flex-flow: column;\n  display: inherit;\n  margin-left: ",";\n  > img {\n    // max-height: ",";\n    max-height: 300px;\n    max-width: 100%;\n    width: auto;\n    object-fit: cover;\n  }\n  .edited-message {\n    color: #aab0c8;\n    font-style: italic;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    position: absolute;\n    top: 50%;\n    margin: 0 10px;\n    height: 25px;\n    white-space: nowrap;\n    ",";\n  }\n  .chat-options {\n    visibility: hidden;\n  }\n  .chat-options.active {\n    visibility: visible;\n  }\n  :hover {\n    .chat-options {\n      visibility: visible;\n    }\n  }\n  @media (max-width: 991.99px) {\n    max-width: calc(100% - 110px);\n  }\n\n  @media (max-width: 620px) {\n    ",";\n    ",";\n  }\n"])),(function(n){return n.showAvatar&&!n.isAuthor?"1rem":"1.6rem"}),(function(n){return n.maxImgHeight>300?"".concat(n.maxImgHeight,"px;"):"300px"}),(function(n){return n.isAuthor?"right: 100%;":"left: 100%"}),(function(n){return!n.showAvatar&&!n.isAuthor&&"margin-left: 0"}),(function(n){return!0===!n.isAuthor&&"margin-left: 0"})),An=z.a.div(O||(O=Object(S.a)(["\n  position: relative;\n  display: inline-flex;\n  border-radius: 8px;\n  background: #f4f4f4f4;\n  text-align: left;\n  min-width: 100px;\n  max-width: 100%;\n  padding: 7px 15px;\n  line-height: 1.5rem;\n  float: left;\n  align-items: center;\n  justify-content: flex-end;\n  flex-flow: ",";\n  .chat-options {\n    visibility: hidden;\n  }\n  :hover {\n    .chat-options {\n      visibility: visible;\n    }\n  }\n  @media (max-width: 620px) {\n    padding: 7px;\n  }\n"])),(function(n){return n.isAuthor?"row":"row-reverse"})),_n=z.a.span(E||(E=Object(S.a)(["\n  color: red;\n  margin: 0 10px;\n"]))),On=Object(z.a)(D.a)(j||(j=Object(S.a)(["\n  align-self: flex-start;\n  width: 2rem !important;\n  height: 2rem !important;\n  margin-top: ",";\n\n  img {\n    width: 2rem !important;\n    height: 2rem !important;\n  }\n  @media (max-width: 620px) {\n    display: none;\n  }\n  .pixel-avatar {\n    padding-top: 2px !important;\n  }\n"])),(function(n){return!0===n.isForwardedMessage?"25px":"0"})),En=0,jn=M.a.memo((function(n){var e=n.actualIndex,t=n.reply,i=n.lastReply,a=n.isLastChatVisible,r=n.dictionary,o=n.timeFormat,s=n.chatMessageActions,l=n.translate,c=n.language,p=n.translated_channels,d=n.chat_language,u=n.scrollComponent,h=Object(R.d)((function(n){return n.session.user})),f=Object(R.d)((function(n){return n.chat.selectedChannel})),m=Object(R.d)((function(n){return n.settings.user.CHAT_SETTINGS})),g=Object(R.d)((function(n){return n.users.users})),x=f.replies[e-1],b=!(!t||!t.user)&&t.user.id===h.id,w=!1,y=!1,v=!1,A=!1,_=!1;if(t&&t.user){t.created_at.timestamp&&(0===e&&(y=!0,w=!0),0!==e&&x&&o.localizeDate(x.created_at.timestamp,"D")!==o.localizeDate(t.created_at.timestamp,"D")&&(y=!0,w=!0),0!==e&&x&&t.created_at.timestamp-x.created_at.timestamp>600&&(w=!0)),0!==e&&x&&!0===x.is_read&&!1===t.is_read&&(_=!0),0!==e&&x&&null===x.user&&(w=!0),En!==t.user.id&&(w=!0,En=t.user.id),"undefined"!==typeof t.body&&null!==t.body&&null!==t.body.match(cn.b)&&(v=!0);A=["gripp_bot_account","gripp_bot_invoice","gripp_bot_offerte","gripp_bot_project","gripp_bot_account","driff_webhook_bot"].includes(t.user.code)}var O=f.members.filter((function(n){return 2===f.members.length?!(!f.last_reply||!f.last_reply.user)&&(f.last_reply.user.id===h.id?!(h.id===n.id):!(f.last_reply.user.id===n.id)):(!f.last_reply||!f.last_reply.user||f.last_reply.user.id!==n.id)&&h.id!==n.id})).filter((function(n){return!!n.last_visited_at&&n.last_visited_at.timestamp>=f.last_reply.created_at.timestamp}));return M.a.createElement(mn,{"data-message-id":t.id,"data-code":t.code,"data-timestamp":t.created_at.timestamp,className:"chat-list chat-list-item-".concat(t.id," code-").concat(t.code),showTimestamp:y},y&&M.a.createElement(gn,{className:"timestamp-container"},M.a.createElement("span",null,o.localizeChatDate(t.created_at.timestamp,"ddd, MMM DD, YYYY"))),t.user&&_&&!a&&M.a.createElement(rn.a,null),t.user&&M.a.createElement(xn,{isAuthor:b,className:"chat-reply-list-item chat-reply-list-item-".concat(t.id," ").concat(b?"chat-right":"chat-left"),"data-message-id":t.id,showAvatar:w,isBot:A,hasGif:v},t.message_failed?M.a.createElement(_n,null,M.a.createElement("i",{className:"fas fa-times-circle",onClick:function(e){return n.handleResendMessage(t.payload)}})):null,M.a.createElement(vn,{isAuthor:b,showAvatar:w,className:"chat-bubble-quote-div"},M.a.createElement(tn,{chatMessageActions:s,timeFormat:o,user:h,reply:t,showAvatar:w,selectedChannel:f,showGifPlayer:v,isAuthor:b,isLastChat:i.id===t.id,chatSettings:m,dictionary:r,users:g,translate:l,language:c,translated_channels:p,chat_language:d}),M.a.createElement(bn,{isAuthor:b,className:"chat-actions-container"},M.a.createElement(on.a,{isAuthor:b,reply:t,chatMessageActions:s,scrollComponent:u}),!isNaN(t.id)&&!t.is_deleted&&M.a.createElement(yn,{dictionary:r,className:"chat-message-options",selectedChannel:f,isAuthor:b,replyData:t,scrollComponent:u,chatMessageActions:s})),t.reactions.length>0&&M.a.createElement(sn.a,{reactions:t.reactions,isAuthor:b,reply:t,loggedUser:h,chatReactionAction:n.chatReactionV2Action}),f.last_reply&&f.last_reply.id===t.id&&O.length>0&&M.a.createElement(ln.a,{isAuthor:b,onClick:n.handleShowSeenUsers,seenMembers:O,isPersonal:2===f.members.length})),!b&&w&&M.a.createElement(On,{isForwardedMessage:t.is_transferred,id:t.user.id,type:"USER",imageLink:t.user.profile_image_thumbnail_link?t.user.profile_image_thumbnail_link:t.user.profile_image_link,name:t.user.name,isBot:A})),null===t.user&&M.a.createElement(xn,{className:"chat-reply-list-item system-reply-list-item chat-reply-list-item-".concat(t.id),"data-message-id":t.id,isAuthor:!1,hasGif:v},M.a.createElement(vn,{isAuthor:b,showAvatar:w,className:"chat-bubble-quote-div"},M.a.createElement(An,{className:"system-message",isAuthor:!1},M.a.createElement(fn,{user:h,chatMessageActions:s,timeFormat:o,selectedChannel:f,reply:t,isLastChat:i.id===t.id,dictionary:r,users:g}),M.a.createElement(wn,{isAuthor:b,className:"chat-actions-container"},M.a.createElement(on.a,{isAuthor:b,reply:t,chatMessageActions:s,scrollComponent:u}),!isNaN(t.id)&&!t.is_deleted&&M.a.createElement(yn,{dictionary:r,replyData:t,className:"chat-message-options",selectedChannel:f,isAuthor:b,scrollComponent:u,chatMessageActions:s}))),t.reactions.length>0&&M.a.createElement(sn.a,{reactions:t.reactions,reply:t,isAuthor:!1,loggedUser:h,chatReactionAction:n.chatReactionV2Action}))))})),kn=z.a.div(k||(k=Object(S.a)(["\n  background: transparent;\n  background-repeat: repeat;\n  //   height: calc(100% - 181px);\n  //   overflow-y: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  z-index: 1;\n  > ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  .chat-message-options svg {\n    fill: currentColor;\n  }\n  &.is-processed {\n    opacity: 0;\n  }\n  > div:first-child {\n    width: 100%;\n    overflow-x: hidden;\n  }\n"]))),Cn=z.a.div(C||(C=Object(S.a)(["\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  svg {\n    max-width: 100%;\n    width: 100%;\n    max-height: 40%;\n    margin: auto;\n  }\n"]))),Fn=z.a.div(F||(F=Object(S.a)(["\n  display: flex;\n  justify-content: center;\n  &.initial-load {\n    position: absolute;\n    top: 45%;\n    left: 45%;\n    transform: translate(-45%, -45%);\n  }\n"])));e.default=function(n){var e=n.dictionary,t=Object(I.useRef)(null),i=Object(I.useRef)(null),a=Object(I.useRef)(null),r=Object(q.b)(),o=Object(q.U)(),s=Object(q.k)(),l=Object(R.d)((function(n){return n.session.user})),c=Object(R.d)((function(n){return n.chat.selectedChannel})),p=Object(R.d)((function(n){return n.global.isIdle})),d=Object(R.d)((function(n){return n.global.isBrowserActive})),u=Object(q.I)(c),h=Object(R.d)((function(n){return n.settings.user.CHAT_SETTINGS})).translate,f=Object(R.d)((function(n){return n.settings.user.GENERAL_SETTINGS})),m=f.chat_language,g=f.translated_channels,x=f.language,b=function(){if(!c.isFetching&&c.hasMore){r.channelActions.fetchingMessages(c,!0);var n={skip:0,limit:20};"undefined"!==typeof c.replies&&(n={skip:0===c.skip&&c.replies.length?c.replies.length:c.skip,limit:20}),r.fetch(c,n,(function(n,e){n&&r.channelActions.fetchingMessages(c,!1)}))}};Object(I.useEffect)((function(){c.hasMore&&0===c.skip&&b(),t.current&&t.current[c.id]&&t.current[c.id].firstItem&&i.current&&i.current.scrollToIndex({index:t.current[c.id].firstItem.originalIndex,align:"start",behavior:"instant"})}),[c.id]);var w=function(n){n&&(s>0||c.total_unread>0)&&r.channelActions.markAsRead(c)};return M.a.createElement(kn,{ref:a,id:"component-chat-thread",className:"component-chat-thread messages",tabIndex:"2","data-init":1,"data-channel-id":c.id},c.replies&&c.replies.length>0&&M.a.createElement(T.a,{ref:i,overscan:0,firstItemIndex:c.replyCount?c.replyCount-c.replies.length:100-c.replies.length,initialTopMostItemIndex:c.replies.length-1,data:c.replies.sort((function(n,e){return n.created_at.timestamp-e.created_at.timestamp===0?n.id-e.id:n.created_at.timestamp-e.created_at.timestamp})),startReached:b,atBottomStateChange:function(n){return w(n)},followOutput:function(n){return n?!p&&d&&document.hasFocus():u&&c.id===u.id?!(u&&u.replies.length!==c.replies.length&&c.replies.length-u.replies.length>1)&&(c.last_reply&&c.last_reply.user&&c.last_reply.user.id===l.id):void 0},itemsRendered:function(n){return function(n){n.length&&(t.current=Object(B.a)(Object(B.a)({},t.current&&Object(B.a)({},t.current)),{},Object(N.a)({},c.id,{firstItem:n[0]})))}(n)},itemContent:function(n,t){return M.a.createElement(jn,{index:n,actualIndex:c.replyCount?c.replies.length-(c.replyCount-n):n,reply:t,lastReply:c.replies[c.replies.length-1],dictionary:e,chatMessageActions:r,timeFormat:o,translate:h,language:x,translated_channels:g,chat_language:m,scrollComponent:a.current})}}),c.replies&&0===c.replies.length&&!c.hasMore&&M.a.createElement(Cn,{className:"no-reply-container"},M.a.createElement(D.q,{icon:3})),c.isFetching&&c.hasMore&&0===c.skip&&M.a.createElement(Fn,{className:"initial-load"},M.a.createElement(D.j,null)))}}}]);