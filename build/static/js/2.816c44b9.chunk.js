(this.webpackJsonpdriff=this.webpackJsonpdriff||[]).push([[2],{634:function(e,t,a){"use strict";a.r(t);var n,r=a(8),i=a(2),l=a(0),c=a.n(l),o=a(5),s=a(709),d=a(15),u=a(3),m=a(7),p=a(6),f=u.a.div(n||(n=Object(i.a)(["\n  padding: 10px;\n  width: 100%;\n  background: #000;\n  color: #fff;\n  height: 40px;\n  display: flex;\n  place-content: center;\n  .feather {\n    cursor: pointer;\n  }\n  position: fixed;\n  top: 0;\n  z-index: 1000;\n\n  .button-notification {\n    background: #8c48ae;\n    border: none;\n    padding: 0 1rem;\n    margin: 0 6px;\n  }\n"])));t.default=c.a.memo((function(e){var t=e.data,a=t.type,n=t.requirement,i=t.handleReminder,u=Object(m.eb)(),b=u.logout,O=u.processBackendLogout,E=Object(o.c)(),h=Object(m.cb)()._t,_={update:h("DRIFF.DRIFF_VERSION_UPDATE","Go!"),remindMeAboutThis:h("DRIFF.REMIND_ME_ABOUT_THIS","Not right now"),updateReload:h("DRIFF.UPDATE_BODY_RELOAD","\ud83c\udf89  Driff is updated. Reload now?"),updateLogout:h("DRIFF.UPDATE_BODY_LOGOUT","\ud83c\udf89 Driff is updated. Logout now?")},j=Object(l.useState)(!0),v=Object(r.a)(j,2),g=v[0],y=v[1],k=function(){y(!g),E(Object(d.d)({type:a}))};return Object(l.useEffect)((function(){var e=setInterval((function(){var t=document.querySelector(".modal-backdrop");t&&t.classList.contains("show")&&(t.classList.remove("show"),clearInterval(e))}),100)}),[]),c.a.createElement(f,{isOpen:g,toggle:k,size:"m",centered:!0},c.a.createElement("div",{dangerouslySetInnerHTML:{__html:function(){switch(n){case"logout":return _.updateLogout;default:return _.updateReload}}()}}),c.a.createElement(s.a,{className:"button-notification",onClick:function(){switch(k(),n){case"logout":b(O()());break;default:window.location.reload()}}},_.update)," ",c.a.createElement(p.s,{className:"ml-3 align-self-center",icon:"x",onClick:function(){k(),i()}}))}))},635:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(0),i=a.n(r),l=a(5),c=a(736),o=a(728),s=a(729),d=a(709),u=a(15),m=a(663),p=a(6);t.default=i.a.memo((function(e){var t=e.data,a=t.submitText,f=t.cancelText,b=t.headerText,O=t.bodyText,E=t.type,h=t.size,_=void 0===h?"m":h,j=e.data.actions.onSubmit,v=Object(l.c)(),g=Object(r.useState)(!0),y=Object(n.a)(g,2),k=y[0],x=y[1],w=Object(r.useState)(!1),T=Object(n.a)(w,2),C=T[0],N=T[1],S=function(){x(!k),v(Object(u.d)({type:E}))},R=null;return i.a.createElement(c.a,{isOpen:k,toggle:S,size:_,centered:!0},i.a.createElement(m.a,{toggle:S},b),i.a.createElement(o.a,null,i.a.createElement("span",{dangerouslySetInnerHTML:{__html:O}}),e.data.generalConditionText&&i.a.createElement(p.s,{className:"ml-2",icon:"help-circle",width:16,height:16,onMouseEnter:function(){N(!0),clearTimeout(R)}}),C&&i.a.createElement("div",{onMouseLeave:function(){R=setTimeout((function(){N(!1)}),600)}},e.data.generalConditionText)),i.a.createElement(s.a,null,i.a.createElement(d.a,{outline:!0,color:"secondary",onClick:S},f),i.a.createElement(d.a,{color:"primary",onClick:function(){S(),j()}},a)," "))}))},636:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s,d=a(8),u=a(2),m=a(0),p=a.n(m),f=a(5),b=a(36),O=a(729),E=a(736),h=a(3),_=a(16),j=a(15),v=a(6),g=a(100),y=a(142),k=a(663),x=a(7),w=Object(h.a)(v.s)(n||(n=Object(u.a)(["\n  cursor: pointer;\n  cursor: hand;\n  border: 1px solid #afb8bd;\n  height: 38px;\n  margin: -1px 8px;\n  width: 40px;\n  padding: 10px;\n  border-radius: 8px;\n\n  // &.feather-send {\n  //     border: 1px solid #7a1b8b;\n  //     background-color: #7a1b8b;\n  //     color: #fff;\n  // }\n"]))),T=h.a.div(r||(r=Object(u.a)(["\n  padding: 10px;\n"]))),C=h.a.div(i||(i=Object(u.a)(["\n  label {\n    margin-top: 0.5rem;\n    font-weight: 600;\n  }\n  ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    height: 300px;\n    max-height: 300px;\n    overflow: auto;\n  }\n"]))),N=h.a.li(l||(l=Object(u.a)(["\n  padding: 5px 0;\n  color: ",";\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  width: 100%;\n  font-weight: ",";\n  :hover {\n    color: #972c86;\n    font-weight: 600;\n    .channel-icon {\n      border: ",";\n    }\n  }\n  .channel-icon {\n    border: ",";\n  }\n"])),(function(e){return e.chosen?"#972c86":"#676767"}),(function(e){return e.chosen?"600":"500"}),(function(e){return e.chosen?"2px solid #972c86":"1px solid #972c86"}),(function(e){return e.chosen?"2px solid #972c86":"1px solid #ddd"})),S=Object(h.a)(y.a)(c||(c=Object(u.a)(["\n  // width: 30px;\n  // height: 30px;\n  // min-width: 30px;\n"]))),R=Object(h.a)(O.a)(o||(o=Object(u.a)(["\n  justify-content: space-between;\n  .chosen-channel-title {\n    color: #7a1b8b;\n    font-weight: 600;\n  }\n"]))),A=Object(h.a)(g.a)(s||(s=Object(u.a)(["\n  margin: 0 0 1.5rem !important;\n"])));t.default=p.a.memo((function(e){var t=e.data,n=t.type,r=t.message,i=Object(b.g)(),l=Object(f.c)(),c=Object(f.d)((function(e){return e.chat.channels})),o=Object(m.useState)(""),s=Object(d.a)(o,2),u=s[0],O=s[1],h=Object(m.useState)(null),v=Object(d.a)(h,2),g=v[0],y=v[1],I=Object(m.useState)(null),D=Object(d.a)(I,2),L=D[0],F=D[1],P=Object(m.useState)(!0),U=Object(d.a)(P,2),M=U[0],W=U[1],H=function(){W(!M),l(Object(j.d)({type:n}))},K=Object.values(c).sort((function(e,t){var a;return 0!==(a=t.is_pinned-e.is_pinned)?a:e.last_reply&&t.last_reply?e.last_reply.created_at.timestamp===t.last_reply.created_at.timestamp?e.title.localeCompare(t.title):t.last_reply.created_at.timestamp-e.last_reply.created_at.timestamp:e.last_reply&&!t.last_reply?-1:!e.last_reply&&t.last_reply?1:e.last_reply||t.last_reply?void 0:e.title.localeCompare(t.title)})).filter((function(e){return!e.is_archived&&(""===u.trim()||-1!==e.title.toLowerCase().search(u.toLowerCase()))})),B=Object(x.cb)()._t,q={recentChannels:B("CHAT.FORWARD.RECENT_CHANNELS","Recent channels"),transferMessageTo:B("CHAT.FORWARD.TRANSFER_MESSAGE_TO","Transfer the message to"),searchChannelPlaceholder:B("CHAT.FORWARD.SEARCH_CHANNEL_PLACEHOLDER","Search channel")},V=function(){O("")};return Object(m.useEffect)((function(){var e=setTimeout((function(){if(""!==u.trim()){F(!0);var e={search:u,skip:0,limit:25};l(Object(_.Bb)(e,(function(){return F(!1)})))}}),300);return function(){return clearTimeout(e)}}),[u]),p.a.createElement(E.a,{isOpen:M,toggle:H,size:"lg",className:"chat-forward-modal",centered:!0},p.a.createElement(k.a,{toggle:H},q.transferMessageTo),p.a.createElement(T,null,p.a.createElement(A,{onChange:function(e){O(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)return e.preventDefault(),!1;27===e.keyCode&&V()},value:u,onClickEmpty:V,closeButton:"true",searching:L,className:"chat-search",placeholder:q.searchChatPlaceholder}),p.a.createElement(C,null,p.a.createElement("label",null,q.recentChannels),Object.keys(c).length>0&&p.a.createElement("ul",null,K.map((function(e){return p.a.createElement(N,{key:e.id,onClick:function(){return function(e){y(e)}(e)},chosen:g&&g.id===e.id},p.a.createElement(S,{className:"message-forward-popup",channel:e}),e.title)}))))),g&&p.a.createElement(R,null,p.a.createElement("span",{className:"chosen-channel-title"},g?g.title:null),p.a.createElement(w,{onClick:function(){var e={channel_id:g.id,body:r.body,mention_ids:[],file_ids:r.files.length?r.files.map((function(e){return e.file_id})):[],reference_id:a(71).generate(),reference_title:g.title,is_transferred:!0};l(Object(_.db)(e,(function(e,t){e||(l(Object(_.Ob)(g)),i.push("/chat/".concat(g.code)))}))),H()},icon:"send",fill:"#fff",className:"bg-primary"})))}))},637:function(e,t,a){"use strict";a.r(t);var n,r=a(8),i=a(2),l=a(98),c=a.n(l),o=a(0),s=a.n(o),d=a(667),u=a.n(d),m=a(5),p=a(736),f=a(728),b=a(729),O=a(709),E=a(3),h=a(56),_=a(16),j=a(15),v=a(137),g=a(7),y=a(663),k=E.a.div(n||(n=Object(i.a)(["\n  display: flex;\n  width: 100%;\n  flex-flow: column;\n  > div {\n    margin-bottom: 10px;\n  }\n"])));t.default=s.a.memo((function(e){var t=e.data,a=t.type,n=t.message,i=Object(g.cb)()._t,l=Object(m.c)(),d=Object(m.d)((function(e){return e.session.user})),E=Object(g.X)(),x=Object(o.useState)(!1),w=Object(r.a)(x,2),T=w[0],C=w[1],N=Object(o.useState)("20m"),S=Object(r.a)(N,2),R=S[0],A=S[1],I=Object(o.useState)(new Date),D=Object(r.a)(I,2),L=D[0],F=D[1],P=Object(o.useState)(null),U=Object(r.a)(P,2),M=U[0],W=U[1],H=Object(o.useState)(!0),K=Object(r.a)(H,2),B=K[0],q=K[1],V={chatReminder:i("REMINDER.CHAT_REMINDER","Set a reminder"),oneHour:i("REMINDER.ONE_HOUR","1 hour"),threeHours:i("REMINDER.THREE_HOURS","3 hours"),tomorrow:i("REMINDER.TOMORROW","Tomorrow"),pickDateTime:i("REMINDER.PICK_DATE_TIME","Pick date and time"),snooze:i("REMINDER.SNOOZE","Snooze"),cancel:i("REMINDER.CANCEL","Cancel")},Y=function(){q(!B),l(Object(j.d)({type:a}))},z=function(e,t){W(!1),A(t)};return s.a.createElement(p.a,{isOpen:B,toggle:Y,centered:!0,className:"chat-forward-modal"},s.a.createElement(y.a,{toggle:Y},V.chatReminder),s.a.createElement(f.a,null,s.a.createElement(k,null,s.a.createElement(v.a,{readOnly:!0,onClick:function(e){z(0,"1h")},checked:"1h"===R,value:"1h",name:"role"},V.oneHour),s.a.createElement(v.a,{readOnly:!0,onClick:function(e){z(0,"3h")},checked:"3h"===R,value:"3h",name:"role"},V.threeHours),s.a.createElement(v.a,{readOnly:!0,onClick:function(e){z(0,"tomorrow")},checked:"tomorrow"===R,value:"tomorrow",name:"role"},V.tomorrow),s.a.createElement(v.a,{readOnly:!0,onClick:function(){A("pick_data"),W(!0)},checked:"pick_data"===R,value:"pick_data",name:"role"},V.pickDateTime),M&&s.a.createElement(u.a,{minDate:new Date,onChange:function(e){F(e)},value:L,disableClock:!0}))),s.a.createElement(b.a,null,s.a.createElement(O.a,{color:"primary",onClick:function(){if(!T){C(!0);var e={message_id:n.id,set_time:"pick_data"===R?c.a.utc(new Date(L)).format("YYYY-MM-DD HH:mm:ss"):R};l(Object(_.gb)(e,(function(){C(!1),Y();var e="You",t="",a=new Date;switch(R){case"1h":a.setHours(a.getHours()+1),t="in an hour at ".concat(Object(h.a)(a)," today");break;case"3h":a.setHours(a.getHours()+3),t="in 3 hours at ".concat(Object(h.a)(a)," today");break;case"tomorrow":a.setDate(a.getDate()+1),t="at 9 AM tomorrow";break;case"pick_data":t="at ".concat(c()(new Date(L)).format("YYYY-MM-DD HH:mm"));break;default:t=R+" at 9 AM"}var r=document.createElement("div");r.innerHTML=n.body,r.innerText.length>=15&&(r.innerText=r.innerText.substring(0,15)+"..."),d.id!==n.user.id&&(e=n.user.name),E.success(s.a.createElement(s.a.Fragment,null,'I will remind you about this message ("',s.a.createElement("b",null,r.innerText)," from ",e," in ",t,'")'))})))}}},T&&s.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),V.snooze)," ",s.a.createElement(O.a,{outline:!0,color:"secondary",onClick:Y},V.cancel)))}))},638:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s,d,u,m=a(69),p=a.n(m),f=a(93),b=a(1),O=a(12),E=a(8),h=a(2),_=a(0),j=a.n(_),v=a(5),g=a(729),y=a(736),k=a(728),x=a(709),w=a(3),T=a(6),C=a(16),N=a(15),S=a(7),R=a(44),A=a(99),I=a(663),D=a(18),L=a(50),F=a(27),P=w.a.div(n||(n=Object(h.a)(["\n  flex: 1 0 0;\n  width: 100%;\n  border: 1px solid #afb8bd;\n  border-radius: 5px;\n  min-height: 350px;\n  position: relative;\n"]))),U=Object(w.a)(A.a)(r||(r=Object(h.a)(["\n  &.description-input {\n    // overflow: auto;\n    // overflow-x: hidden;\n    position: static;\n    width: 100%;\n  }\n  .ql-toolbar {\n    position: absolute;\n    bottom: 0;\n    padding: 0;\n    border: none;\n    .ql-formats {\n      margin-right: 10px;\n    }\n    .ql-image {\n      display: none;\n    }\n  }\n  .ql-container {\n    border: none;\n  }\n  .ql-editor {\n    padding: 5px;\n  }\n  .ql-editor {\n    height: 320px;\n    max-height: 320px;\n  }\n  .ql-mention-list-container-top,\n  .ql-mention-list-container {\n    width: 300px !important;\n    max-height: 170px;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(26, 26, 26, 0.4) 0 2px 3px 0, rgba(0, 0, 0, 0.1) 0 1px 3px 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    z-index: 2;\n\n    .dark & {\n      background: #25282c;\n      color: #c7c7c7;\n    }\n\n    .ql-mention-list {\n      padding: 0;\n\n      .ql-mention-list-item {\n        display: flex;\n        align-items: center;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n        padding-left: 1rem;\n\n        &.selected {\n          background: #7a1b8b;\n          color: #fff;\n          span.all-pic > img {\n            filter: brightness(0) saturate(100%) invert(1);\n          }\n        }\n      }\n    }\n  }\n"]))),M=w.a.div(i||(i=Object(h.a)(["\n  width: 100%;\n  margin-top: 15px;\n  border: 1px solid #afb8bd;\n  border-radius: 5px;\n  ul {\n    margin: 0;\n    padding: 10px 0;\n    align-items: center;\n    justify-content: ",";\n    display: flex;\n    overflow-x: auto;\n  }\n  li {\n    list-style: none;\n    padding: 0 10px;\n    border-radius: 8px;\n    position: relative;\n\n    img {\n      width: auto;\n      height: 160px;\n      border: 1px solid #ddd;\n      object-fit: cover;\n      border-radius: inherit;\n    }\n    span {\n      position: absolute;\n      top: -10px;\n      right: -6px;\n      display: none;\n      color: black;\n    }\n    span:hover {\n      color: #7a1b8b;\n      cursor: pointer;\n    }\n    .app-file-list {\n      height: 158px;\n      width: 158px;\n      margin-bottom: 0;\n    }\n    &:first-of-type {\n      padding-left: 15px;\n    }\n    &:last-of-type {\n      padding-right: 15px;\n    }\n    .remove-upload {\n      background: rgba(0, 0, 0, 0.8);\n      color: #ffffff;\n      border-radius: 50%;\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      display: ",";\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      border: 2px solid #fff;\n      top: -8px;\n      right: 2px;\n      &:hover {\n        background: rgba(0, 0, 0, 1);\n      }\n      svg {\n        width: 12px;\n        height: 12px;\n      }\n    }\n  }\n  li:hover span {\n    display: ",';\n  }\n  &:after {\n    content: "";\n    width: 100px;\n  }\n'])),(function(e){return e.hasOneFile?"center":"flex-start"}),(function(e){return e.hasOneFile?"none":"flex"}),(function(e){return e.hasOneFile?"none":"block"})),W=Object(w.a)(T.s)(l||(l=Object(h.a)(["\n  position: absolute;\n  right: 0;\n  cursor: pointer;\n  border: 1px solid #afb8bd;\n  height: 1.5rem;\n  margin: -1px 8px;\n  width: 1.5rem;\n  padding: 5px;\n  border-radius: 8px;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  &:hover {\n    background: #afb8bd;\n    color: #ffffff;\n  }\n  &.feather-send {\n    border: 1px solid #7a1b8b;\n    background-color: #7a1b8b;\n    color: #fff;\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n    &:hover {\n      background-color: #8c3b9b;\n    }\n  }\n"]))),H=Object(w.a)(T.f)(c||(c=Object(h.a)(["\n  left: unset;\n  bottom: 40px;\n\n  .common-picker-btn {\n    text-align: right;\n  }\n  .react-giphy-select__src-components-GiphyList-styles__list___Tdg5X {\n    height: 250px;\n  }\n"]))),K=w.a.div(o||(o=Object(h.a)([""]))),B=w.a.span(s||(s=Object(h.a)(["\n  font-weight: 500;\n"]))),q=Object(w.a)(g.a)(d||(d=Object(h.a)(["\n  flex-wrap: nowrap;\n"]))),V=w.a.div(u||(u=Object(h.a)(["\n  .react-select-container {\n    max-width: 320px;\n  }\n"]))),Y=[{id:"remove_automatically",value:"remove_automatically",label:"Remove file automatically in 5 days",icon:"file-minus"}],z=function(e){var t=e.files,a=e.onRemoveFile;return j.a.createElement(M,{hasOneFile:1===t.length},j.a.createElement("ul",null,t.map((function(e,t){return j.a.createElement("li",{key:t},j.a.createElement("div",{className:"remove-upload","aria-label":"close",onClick:function(){return function(e){a(e)}(e)}},j.a.createElement(T.s,{icon:"x"})),"IMAGE"===e.type&&j.a.createElement("img",{alt:"file",src:e.src}),"IMAGE"!==e.type&&j.a.createElement(K,{className:"card app-file-list"},j.a.createElement("div",{className:"app-file-icon"},j.a.createElement(T.r,{icon:"document",width:"28",height:"32"})),j.a.createElement("div",{className:"p-2 small"},e.name)))}))))};t.default=j.a.memo((function(e){var t=e.data,n=t.type,r=t.mode,i=t.droppedFiles,l=t.post,c=void 0===l?null:l,o=t.members,s=void 0===o?[]:o,d=(t.team_channel,Object(_.useRef)(0)),u=Object(S.X)(),m=Object(_.useRef)(),h=Object(S.cb)()._t,g=Object(v.c)(),w=Object(_.useRef)(),T=Object(v.d)((function(e){return e.workspaces.workspaces})),A=Object(_.useRef)(null),M=Object(v.d)((function(e){return e.chat.selectedChannel})),K=Object(v.d)((function(e){return e.session.user})),G=Object(v.d)((function(e){return e.global.dataFromInput})),X=Object(v.d)((function(e){return e.posts.commentType})),Q=Object(v.d)((function(e){return e.posts})),Z=Q.parentId,J=Q.editPostComment,$=Object(_.useState)(!0),ee=Object(E.a)($,2),te=ee[0],ae=ee[1],ne=Object(_.useState)(!1),re=Object(E.a)(ne,2),ie=re[0],le=re[1],ce=Object(_.useState)(i),oe=Object(E.a)(ce,2),se=oe[0],de=oe[1],ue=Object(_.useState)(""),me=Object(E.a)(ue,2),pe=me[0],fe=me[1],be=Object(_.useState)(""),Oe=Object(E.a)(be,2),Ee=Oe[0],he=Oe[1],_e=Object(_.useState)([]),je=Object(E.a)(_e,2),ve=je[0],ge=je[1],ye=Object(_.useState)(!1),ke=Object(E.a)(ye,2),xe=ke[0],we=ke[1],Te=Object(_.useState)(null),Ce=Object(E.a)(Te,2),Ne=Ce[0],Se=Ce[1],Re=Object(_.useState)([]),Ae=Object(E.a)(Re,2),Ie=Ae[0],De=Ae[1],Le=Object(_.useState)(null),Fe=Object(E.a)(Le,2),Pe=Fe[0],Ue=Fe[1],Me=function(){we(!xe)},We={cancel:h("BUTTON.CANCEL","Cancel"),upload:h("BUTTON.UPLOAD","Upload"),fileUpload:h("FILE_UPLOAD","File upload"),quillPlaceholder:h("FORM.REACT_QUILL_PLACEHOLDER","Write great things here..."),fileUploadLabel:h("LABEL.EXTERNAL_WORKSPACE_FILES","Files added to workspace can be seen by internal and external accounts"),uploading:h("FILE_UPLOADING","Uploading File"),unsuccessful:h("FILE_UNSUCCESSFULL","Upload File Unsuccessful")};Object(_.useEffect)((function(){null!==G&&(w.current.getEditor().clipboard.dangerouslyPasteHTML(0,G.text),fe(G.text),he(G.textOnly),ge(G.quillContents),w.current.focus())}),[G]),Object(_.useEffect)((function(){"post"===r&&J&&de([].concat(Object(O.a)(J.files.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{src:e.view_link})}))),Object(O.a)(i)));var e=function(e){27===e.keyCode&&g(Object(N.d)({type:n})),L.osName.includes("Mac")?e.metaKey&&13===e.keyCode&&Ve():e.ctrlKey&&13===e.keyCode&&Ve()};return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e,!1)}}),[]);var He=function(){ae(!te),g(Object(N.d)({type:n})),g(Object(N.R)({sent:!1}))};function Ke(){return(Ke=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se.filter((function(e){return"string"===typeof e.id})).length){e.next=7;break}return t=new FormData,a={user_id:K.id,file_type:"private",folder_id:null,fileOption:Ne,options:{config:{onUploadProgress:qe}}},se.filter((function(e){return"string"===typeof e.id})).map((function(e,a){t.append("files[".concat(a,"]"),e.bodyFormData.get("file"))})),a.files=t,e.next=7,new Promise((function(e,t){e(Object(R.C)(a))})).then((function(e){var t=[].concat(Object(O.a)(se.filter((function(e){return"string"!==typeof e.id}))),Object(O.a)(e.data.map((function(e){return e}))));Ye(t)})).catch((function(e){Be(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=function(){null!==A.curent&&(le(!1),u.dismiss(A.current),u.error(j.a.createElement("div",null,We.unsuccessful,".")),A.current=null)},qe=function(e){var t=e.loaded/e.total;null===A.current?A.current=u.info(j.a.createElement("div",null,We.uploading,"."),{progress:d.current,autoClose:!0}):u.update(A.current,{progress:t,autoClose:!0})},Ve=function(){ie||(le(!0),function(){Ke.apply(this,arguments)}(),g(Object(N.d)({type:n})))},Ye=function(e){var t=[],n=pe,i=!1;if(ve.ops&&ve.ops.length>0){var l=ve.ops.filter((function(e){return e.insert.mention?e:null})).map((function(e){return Number(e.insert.mention.id)}));t=(t=Object(O.a)(new Set(l))).includes(NaN)?Object(O.a)(new Set([].concat(Object(O.a)(t.filter((function(e){return!isNaN(e)}))),Object(O.a)(M.members.map((function(e){return e.id})))))):t.filter((function(e){return!isNaN(e)})),ve.ops.forEach((function(e){e.insert.image&&(i=!0)}))}if(""!==Ee.trim()||0!==t.length||i||(n="<span></span>"),"chat"===r)g(Object(C.Pb)({value:""})),e.forEach((function(r,i){var l={};i===e.length-1?(l={channel_id:M.id,body:n,mention_ids:t,file_ids:[r.id],quote:null,reference_id:a(71).generate(),reference_title:"DIRECT"===M.type?"".concat(K.first_name," in a direct message"):M.title},setTimeout((function(){g(Object(C.db)(l)),u.dismiss(A.current)}),300),g(Object(N.R)({sent:!0}))):(l={channel_id:M.id,body:"",mention_ids:[],file_ids:[r.id],quote:null,reference_id:a(71).generate(),reference_title:"DIRECT"===M.type?"".concat(K.first_name," in a direct message"):M.title},g(Object(C.db)(l)))}));else if("post"===r){var o=a(71).generate(),s={post_id:c.id,body:n,mention_ids:t,file_ids:[].concat(Object(O.a)(e.map((function(e){return e.id}))),Object(O.a)(Ie.map((function(e){return e.id})))),reference_id:o,personalized_for_id:null,parent_id:Z,approval_user_ids:G&&G.approvers?G.approvers:[],shared_with_client:!X||"internal"!==X};if(g(Object(D.Pb)(null)),g(Object(N.R)({sent:!0})),g(Object(D.Qb)(null)),J)s=Object(b.a)(Object(b.a)({},s),{},{id:J.id,file_ids:[].concat(Object(O.a)(e.map((function(e){return e.id}))),Object(O.a)(se.filter((function(e){return"string"!==typeof e.id}))),Object(O.a)(Ie.map((function(e){return e.id})))),parent_id:J.parent_id,reference_id:null}),g(Object(D.Ab)(s)),g(Object(D.Ob)(null)),u.dismiss(A.current);else{var d=Math.floor(Date.now()/1e3),m={author:K,body:n,clap_count:0,code:d,created_at:{timestamp:d},files:[],files_trashed:[],id:o,is_archive:!1,is_editable:!0,is_edited:0,is_favourite:!1,mention_ids:t,original_body:n,parent_id:Z,personalized_for_id:null,post_id:c.id,quote:null,reference_id:o,ref_quote:null,replies:{},todo_reminder:null,total_replies:0,total_unread_replies:0,updated_at:{timestamp:d},unfurls:[],user_clap_count:0,clap_user_ids:[],users_approval:[]};g(Object(D.a)(m)),g(Object(D.mb)(s)),u.dismiss(A.current)}}},ze=Object(_.useState)(!1),Ge=Object(E.a)(ze,2),Xe=Ge[0],Qe=Ge[1];Object(_.useEffect)((function(){!0===Xe&&w.current&&setTimeout((function(){w.current.focus()}),300)}),[Xe]);var Ze=!1;c&&(Ze=c.recipients.some((function(e){return("TOPIC"===e.type||"WORKSPACE"===e.type)&&e.is_shared})));var Je=Object(S.M)({mode:r,mentionOrientation:"bottom",quillRef:w,members:s,setImageLoading:Ue,setInlineImages:De}).modules;return j.a.createElement(y.a,{isOpen:te,toggle:He,size:"lg",centered:!0},j.a.createElement(I.a,{toggle:He},We.fileUpload),j.a.createElement(k.a,null,j.a.createElement(P,null,j.a.createElement(U,{ref:function(e){w.current=e,Qe(!0)},className:"chat-input description-input",modules:Je,placeholder:We.quillPlaceholder,readOnly:ie,onChange:function(e,t,a,n){fe(e),ge(n.getContents()),he(n.getText(e))},height:80}),j.a.createElement(W,{onClick:Me,icon:"smile"}),!0===xe&&j.a.createElement(H,{handleShowEmojiPicker:Me,onSelectEmoji:function(e){var t=w.current.getEditor();w.current.focus();var a=t.getSelection().index;t.insertText(a,e.native),t.setSelection(a+2)},onSelectGif:function(e){var t=w.current.getEditor();w.current.focus();var a=t.getSelection().index;t.insertEmbed(a,"image",e.images.downsized.url),t.setSelection(a+5)},orientation:"top",ref:m})),j.a.createElement(z,{files:se,onRemoveFile:function(e){de(se.filter((function(t){return t.id!==e.id})))}}),j.a.createElement(V,{className:"mt-1"},j.a.createElement(F.d,{options:Y,value:Ne,onChange:function(e){Se(e)},isClearable:!0,maxMenuHeight:250,menuPlacement:"top",placeholder:"File options"}))),j.a.createElement(q,null,(M&&M.entity_id&&T[M.entity_id]&&T[M.entity_id].is_shared&&T[M.entity_id].team_channel.id===M.id&&"internal"===K.type||Ze&&"internal"===K.type)&&j.a.createElement(B,null,We.fileUploadLabel),j.a.createElement(x.a,{outline:!0,color:"secondary",onClick:He},We.cancel),j.a.createElement(x.a,{color:"primary",onClick:Ve,disabled:Pe},ie&&j.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),We.upload)))}))},639:function(e,t,a){"use strict";a.r(t);var n,r,i,l=a(12),c=a(11),o=a(1),s=a(8),d=a(2),u=a(61),m=a.n(u),p=a(0),f=a.n(p),b=a(5),O=a(36),E=a(629),h=a(736),_=a(728),j=a(658),v=a(3),g=a(16),y=a(15),k=a(27),x=a(99),w=a(7),T=a(663),C=a(97),N=a(6),S=Object(v.a)(E.a)(n||(n=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  margin: 20px 0;\n  .icon-wrapper {\n    width: 60px;\n    position: relative;\n    justify-content: center;\n    align-items: center;\n    display: grid;\n\n    .btn {\n      background: #fff;\n      position: absolute;\n      right: 5px;\n      bottom: -5px;\n      padding: 3px;\n\n      &:hover {\n        background: #fff !important;\n      }\n    }\n  }\n  .name-wrapper {\n    width: calc(100% - 40px);\n  }\n  .form-group {\n    margin-bottom: 0;\n  }\n  label {\n    margin: 0 20px 0 0;\n    min-width: 530px;\n  }\n  button {\n    margin-left: auto;\n  }\n  .react-select__multi-value__label {\n    align-self: center;\n  }\n"]))),R=Object(v.a)(k.h)(r||(r=Object(d.a)(["\n  flex: 1 0 0;\n  width: 1%;\n  min-width: 550px;\n  .react-select__control--menu-is-open {\n    border-color: #7a1b8b !important;\n    box-shadow: none;\n  }\n  .react-select__option {\n    background-color: #ffffff;\n  }\n  .react-select__menu-list--is-multi > div {\n    &:hover {\n      background: #8c3b9b;\n      color: #ffffff;\n      cursor: pointer;\n      .react-select__option {\n        background: #8c3b9b;\n        cursor: pointer;\n      }\n    }\n  }\n  .react-select__control--is-focused {\n    border-color: #7a1b8b !important;\n    box-shadow: none;\n  }\n  @media all and (max-width: 480px) {\n    width: 100%;\n  }\n"]))),A=Object(v.a)(x.a)(i||(i=Object(d.a)(["\n  flex: 1 0 0;\n  width: 1%;\n  &.group-chat-input {\n    border: 1px solid #afb8bd;\n    border-radius: 5px;\n    max-height: 130px;\n    overflow: auto;\n    overflow-x: hidden;\n    position: static;\n    width: 100%;\n  }\n  .ql-toolbar {\n    display: none;\n  }\n  .ql-container {\n    border: none;\n  }\n  .ql-editor {\n    padding: 5px;\n  }\n  @media all and (max-width: 480px) {\n    width: 100%;\n  }\n"])));t.default=function(e){var t=e.data,n=t.type,r=t.mode,i=Object(p.useRef)(),d=Object(p.useRef)(),u=Object(b.c)(),E=Object(O.g)(),v=Object(w.cb)()._t,x=Object(w.X)(),I=Object(w.a)(),D=I.searchExisting,L=I.create,F=I.update,P=Object(w.W)().localizeDate,U=Object(b.d)((function(e){return e.users.mentions})),M=Object(b.d)((function(e){return e.chat.selectedChannel})),W=Object(b.d)((function(e){return e.session.user})),H=Object(b.d)((function(e){return e.global.recipients})),K=Object(p.useState)(!0),B=Object(s.a)(K,2),q=B[0],V=B[1],Y=Object(p.useState)(""),z=Object(s.a)(Y,2),G=z[0],X=z[1],Q=Object(p.useState)(""),Z=Object(s.a)(Q,2),J=Z[0],$=Z[1],ee=Object(p.useState)(!1),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=Object(p.useState)(!1),ie=Object(s.a)(re,2),le=ie[0],ce=ie[1],oe=Object(p.useState)(!1),se=Object(s.a)(oe,2),de=se[0],ue=se[1],me=Object(p.useState)(!1),pe=Object(s.a)(me,2),fe=pe[0],be=pe[1],Oe=Object(p.useState)(!1),Ee=Object(s.a)(Oe,2),he=Ee[0],_e=Ee[1],je=function(){V(!q),u(Object(y.d)({type:n}))},ve={chatTitle:v("MODAL.CHAT_TITLE","Title"),people:v("MODAL.PEOPLE","People"),firstMessage:v("MODAL.FIRST_MESSAGE","First message"),newGroupChat:v("MODAL.NEW_GROUP_CHAT","New group chat"),editChat:v("MODAL.EDIT_CHAT","Edit chat"),createChat:v("MODAL.CREATE_CHAT","Create chat"),chatInfo:v("FOLDER_INFO","Create a group chat to quickly discuss any subject with multiple people. A group chat can hold an unlimited amount of members."),chatInfoEdit:v("FOLDER_INFO_EDIT","Edit the chat's title and members. A group chat can hold an unlimited amount of members."),feedbackChatTitleIsRequired:v("FEEDBACK.CHAT_TITLE_IS_REQUIRED","Chat title is required."),feedbackChatTitleIsUnique:v("FEEDBACK.CHAT_TITLE_IS_UNIQUE","Chat title is already taken."),feedbackChatMemberIsRequired:v("FEEDBACK.CHAT_MEMBER_IS_REQUIRED","You must assign atleast a member on this chat.")},ge=Object.values(U).filter((function(e){return"internal"===e.type})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{value:e.id,label:e.name})})),ye=ge.filter((function(e){return e.value===W.id})),ke=Object(p.useState)({icon:{file:null,file_id:null,value:"edit"===r?M.icon_link:null},title:{value:"edit"===r?M.title:""},selectedUsers:{value:"edit"===r?M.members.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{value:e.id,label:e.first_name})})):ye}}),xe=Object(s.a)(ke,2),we=xe[0],Te=xe[1],Ce=function(){if(!we.icon.file||we.icon.file_id){if(!de){if(ue(!0),"edit"===r){var e=M.members.filter((function(e){return!we.selectedUsers.value.some((function(t){return t.id===e.id}))})).map((function(e){return e.id})),t=we.selectedUsers.value.filter((function(e){return!M.members.some((function(t){return t.id===e.id}))})).map((function(e){return e.id})),n=Object(o.a)(Object(o.a)({id:M.id},we.icon.file_id&&{file_id:we.icon.file_id}),{},{channel_id:M.id,channel_name:we.title.value,remove_member_ids:e,add_member_ids:t,message_body:"CHANNEL_UPDATE::".concat(JSON.stringify({author:{id:W.id,name:W.name,first_name:W.first_name,partial_name:W.partial_name,profile_image_link:W.profile_image_thumbnail_link?W.profile_image_thumbnail_link:W.profile_image_link},title:M.title===we.title.value?"":we.title.value,added_members:t,removed_members:e}))});M.members=we.selectedUsers.value,M.title=we.title.value,F(n,(function(){ue(!1)}))}else{var i=a(71).generate(),c=Math.round(+new Date/1e3),s={id:i,body:G,code:i,editable:0,unfurls:[],quote:null,files:[],mention_html:null,reactions:[],is_deleted:!1,is_completed:!0,is_transferred:!1,is_read:!0,channel_id:i,g_date:P(c),created_at:{timestamp:c},updated_at:{timestamp:c},user:W},d={id:i,entity_id:0,type:"GROUP",title:we.title.value,code:i,is_archived:!1,is_pinned:!1,is_hidden:!1,is_muted:!1,total_unread:0,profile:null,selected:!0,inviter:null,hasMore:!1,skip:0,isFetching:!1,members:[].concat(Object(l.a)(we.selectedUsers.value),[W]),replies:[s],created_at:{timestamp:c},updated_at:{timestamp:c},last_reply:{id:null,body:G,user:W,created_at:{timestamp:c}},reference_id:i},m={recipient_ids:H.filter((function(e){return"USER"===e.type})).filter((function(e){var t=!1;return we.selectedUsers.value.forEach((function(a){a.id===e.type_id&&(t=!0)})),t})).map((function(e){return e.id})),title:we.title.value};0!==J.trim().length&&(m=Object(o.a)(Object(o.a)({},m),{},{message_body:G}));var p=d;L(m,(function(e,t){if(ue(!1),!e){var a=Object(o.a)(Object(o.a)(Object(o.a)({},d),{},{id:t.data.channel.id,old_id:p.id},we.icon.file_id&&{file_id:we.icon.file_id}),{},{code:t.data.code,members:t.data.channel.members?t.data.channel.members:d.members,profile:t.data.channel.profile,type:"GROUP",last_reply:t.data.channel.last_reply,replies:0!==J.trim().length?[Object(o.a)(Object(o.a)({},s),{},{id:t.data.last_reply.id,channel_id:t.data.channel.id,created_at:{timestamp:s.created_at.timestamp},updated_at:{timestamp:s.created_at.timestamp}})]:[],selected:!0,search:t.data.search});u(Object(g.h)(a)),u(Object(g.Ob)(a)),E.push("/chat/".concat(t.data.code))}}))}je()}}else Le(we.icon.file)},Ne=m.a.debounce((function(){var e=H.filter((function(e){return"USER"===e.type})).filter((function(e){var t=!1;return we.selectedUsers.value.forEach((function(a){a.id===e.type_id&&(t=!0)})),t})).map((function(e){return e.id}));if("edit"===r){if(we.title.value===M.title&&JSON.stringify(M.members.map((function(e){return e.id})).sort())===JSON.stringify(we.selectedUsers.value.map((function(e){return e.id})).sort())){var t=Object(o.a)({},we);t.selectedUsers.valid=!0,t.selectedUsers.feedback=null,ne(!1),Te(t),be(!0)}else if(e.length){ce(!0);D(we.title.value,e,(function(e,t){ce(!1),e||(t.data.channel_id?ne(!0):ne(!1))})),be(!1)}}else if(e.length){ce(!0);D(we.title.value,e,(function(e,t){ce(!1),e||(t.data.channel_id?ne(!0):ne(!1))}))}}),300),Se=Object(w.M)({mode:"group_chat"}).modules;Object(p.useEffect)((function(){we.selectedUsers.value.length&&Ne()}),[we.title.value,we.selectedUsers.value.length]),Object(p.useEffect)((function(){if(!le){var e=Object(o.a)({},we);""===e.title.value?(e.title.valid=!1,e.title.feedback=ve.feedbackChatTitleIsRequired):!0===ae?(e.title.valid=!1,e.title.feedback=ve.feedbackChatTitleIsUnique):(e.title.valid=!0,e.title.feedback=null),0===e.selectedUsers.value.length?(e.selectedUsers.valid=!1,e.selectedUsers.feedback=ve.feedbackChatMemberIsRequired):(e.selectedUsers.valid=!0,e.selectedUsers.feedback=null),Te(e)}}),[we.title.value,we.selectedUsers.value,ae,le]);var Re=function(){_e(!1)},Ae=function(e,t){Te((function(a){return Object(o.a)(Object(o.a)({},a),{},{icon:Object(o.a)(Object(o.a)({},a.icon),{},{file:e,value:t})})}))},Ie={iconDropZone:Object(p.useRef)(null)},De=Object(w.r)().uploadCompanyFiles,Le=function(e){De({file:e},(function(e,t){Te((function(e){return Object(o.a)(Object(o.a)({},e),{},{icon:Object(o.a)(Object(o.a)({},e.icon),{},{file_id:t.data.id})})}))}))};return Object(p.useEffect)((function(){we.icon.file&&be(!1)}),[we.icon.file]),Object(p.useEffect)((function(){we.icon.file_id&&Ce()}),[we.icon.file_id]),f.a.createElement(h.a,{isOpen:q,toggle:je,size:"lg",onOpened:function(){i&&i.current&&i.current.focus()},centered:!0},f.a.createElement(T.a,{toggle:je},"edit"===r?ve.editChat:ve.newGroupChat),f.a.createElement(_.a,null,f.a.createElement(S,null,f.a.createElement("div",null,f.a.createElement(j.a,{className:"modal-info mb-3"},"edit"===r?ve.chatInfoEdit:ve.chatInfo),f.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},f.a.createElement("div",{className:"icon-wrapper",onClick:function(){Ie.iconDropZone.current.open()}},f.a.createElement(C.a,{acceptType:"imageOnly",hide:!he,ref:Ie.iconDropZone,onDragLeave:Re,onDrop:function(e){!function(e){0===e.length?x.error("File type not allowed. Please use an image file."):e.length>1&&x.warning("Multiple files detected. First selected image will be used.");var t={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:Ae};u(Object(y.a)(t,(function(){Re()})))}(e.acceptedFiles)},onCancel:Re}),f.a.createElement(N.a,{imageLink:we.icon.value,name:we.title.value,noDefaultClick:!0,forceThumbnail:!1}),f.a.createElement("span",{className:"btn btn-outline-light btn-sm"},f.a.createElement(N.s,{icon:"pencil"}))),f.a.createElement("div",{className:"name-wrapper"},f.a.createElement(j.a,{className:"modal-label",for:"chat"},ve.chatTitle),f.a.createElement(k.e,{name:"title",style:{borderRadius:"5px"},defaultValue:we.title.value,onChange:function(e){var t=e.target,a=t.name,n=t.value;Te((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(c.a)({},a,{value:n}))}))},innerRef:i,isValid:we.title.valid,feedback:we.title.feedback}))))),f.a.createElement(S,null,f.a.createElement("div",null,f.a.createElement(j.a,{className:"modal-label",for:"people"},ve.people),f.a.createElement(R,{options:ge,value:we.selectedUsers.value,onChange:function(e){Te(null===e?function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedUsers:{value:ye}})}:function(t){return Object(o.a)(Object(o.a)({},t),{},{selectedUsers:{value:e}})})}}))),"new"===r&&f.a.createElement(S,null,f.a.createElement("div",null,f.a.createElement(j.a,{className:"modal-label",for:"firstMessage"},ve.firstMessage),f.a.createElement(A,{className:"group-chat-input",modules:Se,ref:d,onChange:function(e,t,a,n){var r=n.getText(e);X(e),$(r)}}))),f.a.createElement(S,null,f.a.createElement("button",{className:"btn btn-primary",disabled:le||Object.keys(we).map((function(e){return we[e].valid})).some((function(e){return!1===e}))||"edit"===r&&fe,onClick:Ce},de&&f.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"edit"===r?ve.editChat:ve.createChat))))}},640:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o=a(11),s=a(1),d=a(12),u=a(8),m=a(2),p=a(0),f=a.n(p),b=a(5),O=a(36),E=a(629),h=a(736),_=a(728),j=a(658),v=a(630),g=a(729),y=a(709),k=a(3),x=a(14),w=a(19),T=a(15),C=a(21),N=a(6),S=a(47),R=a(97),A=a(27),I=a(7),D=a(663),L=a(16),F=a(33),P=a(61),U=a(82),M=a(52),W=a(20),H=Object(k.a)(E.a)(n||(n=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n\n  .icon-wrapper {\n    width: 60px;\n    position: relative;\n    justify-content: center;\n    align-items: center;\n    display: grid;\n\n    .btn {\n      background: #fff;\n      position: absolute;\n      right: 5px;\n      bottom: -5px;\n      padding: 3px;\n\n      &:hover {\n        background: #fff !important;\n      }\n    }\n  }\n\n  .name-wrapper {\n    width: calc(100% - 40px);\n  }\n\n  > .form-control:not(:first-child) {\n    border-radius: 5px;\n  }\n\n  .input-feedback {\n    margin-left: 130px;\n    @media all and (max-width: 480px) {\n      margin-left: 0;\n    }\n  }\n\n  label {\n    margin: 0 20px 0 0;\n    min-width: 530px;\n  }\n  button {\n    margin-left: auto;\n  }\n  .react-select-container {\n    width: 100%;\n    // z-index: 2;\n  }\n  .react-select__multi-value__label {\n    align-self: center;\n  }\n  .files {\n    width: 320px;\n  }\n  .file-attachments {\n    position: relative;\n    max-width: 100%;\n    margin-left: 128px;\n    @media all and (max-width: 480px) {\n      margin-left: 0;\n    }\n    ul {\n      margin-right: 128px;\n      margin-bottom: 0;\n      @media all and (max-width: 480px) {\n        padding-right: 40px;\n      }\n      li {\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n  }\n  &.file-attachment-wrapper {\n    margin-top: 30px;\n    margin-bottom: -20px;\n  }\n  &.action-wrapper {\n    z-index: 0;\n    margin-top: 40px;\n\n    .action-archive-wrapper {\n      display: flex;\n      width: 100%;\n\n      .btn-archive {\n        display: flex;\n        margin-left: auto;\n        text-decoration: underline;\n        color: #a7abc3;\n      }\n    }\n  }\n  &.checkboxes {\n    flex-flow: row !important;\n    label {\n      min-width: 0;\n    }\n  }\n  &.external-select {\n    .invalid-feedback {\n      display: block;\n    }\n    .react-select__control {\n      border-color: ","!important;\n    }\n  }\n"])),(function(e){return!1===e.valid?"red":"#cccccc"})),K=Object(k.a)(A.d)(r||(r=Object(m.a)(["\n  flex: 1 0 0;\n  width: 1%;\n  @media all and (max-width: 480px) {\n    width: 100%;\n  }\n"]))),B=Object(k.a)(A.h)(i||(i=Object(m.a)(["\n  flex: 1 0 0;\n  width: 1%;\n  .react-select__control--menu-is-open {\n    border-color: #7a1b8b !important;\n    box-shadow: none;\n  }\n  .react-select__option {\n    background-color: #ffffff;\n  }\n  .react-select__menu-list--is-multi > div {\n    &:hover {\n      background: #8c3b9b;\n      color: #ffffff;\n      cursor: pointer;\n      .react-select__option {\n        background: #8c3b9b;\n        cursor: pointer;\n      }\n    }\n  }\n  .react-select__control--is-focused {\n    border-color: #7a1b8b !important;\n    box-shadow: none;\n  }\n  .has-not-accepted .react-select__multi-value__label {\n    background: #33b5e5;\n    color: #fff;\n  }\n  @media all and (max-width: 480px) {\n    width: 100%;\n  }\n"]))),q=Object(k.a)(A.c)(l||(l=Object(m.a)(["\n  .description-input {\n    height: ","px;\n    max-height: 300px;\n  }\n\n  label {\n    min-width: 100%;\n    font-weight: 500;\n  }\n\n  .ql-toolbar {\n    bottom: 30px;\n    left: 40px;\n  }\n\n  .invalid-feedback {\n    position: absolute;\n    bottom: 0;\n    top: auto;\n  }\n"])),(function(e){return e.height})),V=k.a.div(c||(c=Object(m.a)(["\n  .component-radio-input {\n    font-size: 0.9rem;\n  }\n"])));t.default=f.a.memo((function(e){var t=e.data,n=t.type,r=t.mode,i=t.item,l=void 0===i?null:i,c=Object(I.r)().uploadFiles,m=Object(I.cb)()._t,E=Object(O.g)(),k=Object(b.c)(),Y=Object(I.X)(),z=Object(p.useState)(!0),G=Object(u.a)(z,2),X=G[0],Q=G[1],Z=Object(p.useState)(!1),J=Object(u.a)(Z,2),$=J[0],ee=J[1],te=Object(b.d)((function(e){return e.settings.user})),ae=Object(b.d)((function(e){return e.session.user})),ne=Object(b.d)((function(e){return e.users.users})),re=Object(b.d)((function(e){return e.users.externalUsers})),ie=Object(b.d)((function(e){return e.users.archivedUsers})),le=Object(b.d)((function(e){return e.workspaces.workspaces})),ce=Object(b.d)((function(e){return e.workspaces.folders})),oe=Object(p.useState)([]),se=Object(u.a)(oe,2),de=se[0],ue=se[1],me=Object(p.useState)([]),pe=Object(u.a)(me,2),fe=pe[0],be=pe[1],Oe=Object(p.useState)(""),Ee=Object(u.a)(Oe,2),he=Ee[0],_e=Ee[1],je=Object(p.useState)(""),ve=Object(u.a)(je,2),ge=ve[0],ye=ve[1],ke=Object(p.useState)({is_private:!1,has_folder:null!==l&&"WORKSPACE"===l.type&&null!==l.folder_id,icon:null,icon_link:l&&l.channel?l.channel.icon_link:null,name:"",selectedUsers:[],selectedFolder:null===l?null:"FOLDER"===l.type?{value:l.id,label:l.name}:l.folder_id?{value:l.folder_id,label:l.folder_name}:null,description:"",textOnly:"",has_externals:!1,selectedExternals:[]}),xe=Object(u.a)(ke,2),we=xe[0],Te=xe[1],Ce=Object(p.useState)(!1),Ne=Object(u.a)(Ce,2),Se=Ne[0],Re=Ne[1],Ae=Object(p.useState)(!1),Ie=Object(u.a)(Ae,2),De=Ie[0],Le=Ie[1],Fe=Object(p.useState)([]),Pe=Object(u.a)(Fe,2),Ue=Pe[0],Me=Pe[1],We=Object(p.useState)([]),He=Object(u.a)(We,2),Ke=He[0],Be=He[1],qe=Object(p.useState)([]),Ve=Object(u.a)(qe,2),Ye=Ve[0],ze=Ve[1],Ge=Object(p.useState)(!1),Xe=Object(u.a)(Ge,2),Qe=Xe[0],Ze=Xe[1],Je=Object(p.useState)({name:null,description:null,has_folder:null,team:null,external:!0}),$e=Object(u.a)(Je,2),et=$e[0],tt=$e[1],at=Object(p.useState)({name:"",description:"",folder:"",team:"",external:""}),nt=Object(u.a)(at,2),rt=nt[0],it=nt[1],lt={container:Object(p.useRef)(null),workspace_name:Object(p.useRef)(null),dropZone:Object(p.useRef)(null),iconDropZone:Object(p.useRef)(null),first_name:Object(p.useRef)(null)},ct=Object(p.useState)([]),ot=Object(u.a)(ct,2),st=ot[0],dt=ot[1],ut=Object(p.useState)([]),mt=Object(u.a)(ut,2),pt=mt[0],ft=mt[1],bt=Object(p.useState)([]),Ot=Object(u.a)(bt,2),Et=Ot[0],ht=Ot[1],_t=Object(p.useState)({email:"",first_name:"",middle_name:"",last_name:"",company:"",language:"en",send_by_email:!0}),jt=Object(u.a)(_t,2),vt=jt[0],gt=jt[1],yt=Object(p.useState)([]),kt=Object(u.a)(yt,2),xt=kt[0],wt=kt[1],Tt=[].concat(Object(d.a)(Object.values(ne)),Object(d.a)(ie)),Ct=[{value:"en",label:f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{countryAbbr:"en",className:"mr-2",width:"18"}),m("LANGUAGE.ENGLISH","English"))},{value:"nl",label:f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{countryAbbr:"nl",className:"mr-2",width:"18"}),m("LANGUAGE.DUTCH","Dutch"))}],Nt={createWorkspace:m("WORKSPACE.CREATE_WORKSPACE","Create workspace"),create:m("BUTTON.CREATE","Create"),updateWorkspace:m("WORKSPACE.UPDATE_WORKSPACE","Update workspace"),update:m("BUTTON.UPDATE","Update"),workspaceName:m("WORKSPACE.WORKSPACE_NAME","Name"),workspaceInfo:m("WORKSPACE.WORKSPACE_INFO","A workspace centers the team communication about a subject. A workspace can only be connected to one folder."),lockWorkspace:m("WORKSPACE.WORKSPACE_LOCK","Make workspace private"),lockWorkspaceText:m("WORKSPACE.WORKSPACE_LOCK.DESCRIPTION","When a workspace is private it is only visible to the members of the workspace."),archiveThisWorkspace:m("WORKSPACE.WORKSPACE_ARCHIVE","Archive this workspace"),unArchiveThisWorkspace:m("WORKSPACE.WORKSPACE_UNARCHIVE","Un-archive this workspace"),description:m("LABEL.DESCRIPTION","Description"),addToFolder:m("CHECKBOX.ADD_TO_FOLDER","Add to folder"),folder:m("LABEL.FOLDER","Folder"),team:m("LABEL.TEAM","Team"),archiveWorkspace:m("HEADER.ARCHIVE_WORKSPACE","Archive workspace"),archive:m("BUTTON.ARCHIVE","Archive"),unArchiveWorkspace:m("HEADER.UNARCHIVE_WORKSPACE","Un-archive workspace"),cancel:m("BUTTON.CANCEL","Cancel"),archiveBodyText:m("TEXT.ARCHIVE_CONFIRMATION","Are you sure you want to archive this workspace?"),unArchiveBodyText:m("TEXT.UNARCHIVE_CONFIRMATION","Are you sure you want to un-archive this workspace?"),confirm:m("WORKSPACE.CONFIRM","Confirm"),lockedWorkspace:m("WORKSPACE.LOCKED_WORKSPACE","Private workspace"),lockedWorkspaceText:m("WORKSPACE.LOCKED_WORKSPACE_TEXT","Only members can view and search this workspace."),feedbackWorkspaceNameIsRequired:m("FEEDBACK.WORKSPACE_NAME_IS_REQUIRED","Workspace name is required."),feedbackWorkspaceNameAlreadyExists:m("FEEDBACK.WORKSPACE_NAME_ALREADY_EXISTS","Workspace name already exists."),feedbackWorkspaceDescriptionIsRequired:m("FEEDBACK.WORKSPACE_DESCRIPTION_IS_REQUIRED","Description is required."),toasterWorkspaceIsCreated:m("TOASTER.WORKSPACE_IS_CREATED","::workspace_name:: workspace is created.",{workspace_name:"<b>".concat(we.name,"</b>")}),externalWorkspace:m("WORKSPACE.EXTERNAL_WORKSPACE","External workspace"),externalUserConfirmation:m("CONFIRMATION_EXTERNAL_USER","Are you sure you want to give an external user access to this Workspace?"),workspaceWithExternals:m("WORKSPACE.WORKSPACE_WITH_EXTERNALS","Workspace with externals"),externalGuest:m("WORKSPACE.EXTERNAL_GUEST","External guest"),peopleExternal:m("PEOPLE.EXTERNAL","External"),peopleInvited:m("PEOPLE.INVITED","Invited"),workspaceWithExternalsInfo1:m("WORKSPACE.WORKSPACE_WITH_EXTERNALS_INFO1","This function will allow users outside your company be invited on this workspace."),workspaceWithExternalsInfo2:m("WORKSPACE.WORKSPACE_WITH_EXTERNALS_INFO2","This may be your customer or supplier."),emailExists:m("WORKSPACE.EMAIL_EXISTS","Email already used"),invalidEmail:m("WORKSPACE.INVALID_EMAIL","Invalid email"),newExternalInfo:m("WORKSPACE.NEW_EXTERNAL_INFO","You are adding a new external user (#::email::#). You can add extra information to this account if you like. The account can verify or change this info during his first login.",{email:vt.email}),newExternalUser:m("WORKSPACE.NEW_EXTERNAL_USER","New external user"),firstName:m("REGISTER.FIRST_NAME","First name"),middleName:m("REGISTER.MIDDLE_NAME","Middle name"),lastName:m("REGISTER.LAST_NAME","Last name"),companyName:m("DRIFF.COMPANY_NAME","Company name"),languageLabel:m("SETTINGS.LANGUAGE_LABEL","Language"),save:m("POST.SAVE","Save"),sendMyself:m("BUTTON.SEND_MYSELF","Send the signup link myself"),sendTruDriff:m("BUTTON.SEND_TRU_DRIFF","Automatically send the signup link to the mail")},St=Object(p.useCallback)((function(){return""===we.name?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:Nt.feedbackWorkspaceNameIsRequired})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:!1})})),!1):Object.values(le).some((function(e){return"edit"===r?e.id!==l.id&&e.name.toLowerCase()===we.name.toLowerCase():e.name.toLowerCase()===we.name.toLowerCase()}))?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:Nt.feedbackWorkspaceNameAlreadyExists})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:!0})})),!0):(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:""})})),void tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:!0})})))}),[we.name,we.has_folder,we.selectedFolder,le,tt,it]),Rt=function(){Q(!X),k(Object(T.d)({type:n}))},At=function(e){var t=e.target.dataset.name,a=!we[t];Te((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,a))}))},It=Object.values(ce).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{icon:"folder",value:e.id,label:e.name})})),Dt=Object(p.useCallback)(Object(P.debounce)((function(e,t){e?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:""})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:null})}))):!1===e&&!1===t?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:Nt.emailExists})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:!1})}))):!1===e&&!0===t?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:Nt.invalidEmail})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:!1})}))):(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:""})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:!0})})))}),300),[]),Lt=function(e,t){var a=new FormData;a.append("files[0]",t),c({is_primary:0,topic_id:e.topic_id?e.topic_id:e.id,files:a},(function(t,a){k(Object(C.T)(Object(s.a)(Object(s.a)({},e),{},{topic_id:e.topic_id?e.topic_id:e.id,file_id:a.data.files[0].id,workspace_id:e.folder_id?e.folder_id:e.workspace_id})))}))},Ft=Object(p.useCallback)((function(e,t,a,n){var r=n.getText(e);n.getContents().ops&&n.getContents().ops.length&&function(e){if((e=e.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}))).length){var t=[ae.id].concat(Object(d.a)(we.selectedUsers.map((function(e){return e.id}))),Object(d.a)(pt)),a=e.filter((function(e){return!t.some((function(t){return t===e}))}));dt(a.length?a.map((function(e){return parseInt(e)})):[])}else ft([]),dt([])}(n.getContents().ops.filter((function(e){return e.insert.mention})).map((function(e){return e.insert.mention.id}))),Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{description:e,textOnly:r})})),""===r.trim()?(it((function(e){return Object(s.a)(Object(s.a)({},e),{},{description:Nt.feedbackWorkspaceDescriptionIsRequired})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{description:!1})}))):tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{description:!0})}))}),[Te,it,tt,we.selectedUsers,st,pt]),Pt=function(){Re(!1)},Ut=function(){Le(!1)},Mt=Object(p.useCallback)((function(e,t){Te((function(a){return Object(s.a)(Object(s.a)({},a),{},{icon:e,icon_link:t})}))}),[]),Wt=Object(p.useCallback)((function(e){0===e.length?Y.error("File type not allowed. Please use an image file."):e.length>1&&Y.warning("Multiple files detected. First selected image will be used.");var t={type:"file_crop_upload",imageFile:e[0],mode:"profile",handleSubmit:Mt};k(Object(T.a)(t,(function(){Ut()})))}),[Mt,Ut]),Ht=function(){var e={type:"confirmation",headerText:Nt.archiveWorkspace,submitText:Nt.archive,cancelText:Nt.cancel,bodyText:Nt.archiveBodyText,actions:{onSubmit:Kt}};0===l.active&&(e=Object(s.a)(Object(s.a)({},e),{},{headerText:Nt.unArchiveWorkspace,submitText:Nt.unArchiveWorkspace,bodyText:Nt.unArchiveBodyText})),k(Object(T.a)(e))},Kt=Object(p.useCallback)((function(){var e={id:l.channel.id,is_archived:1===l.active,is_muted:!1,is_pinned:!1,is_shared:l.is_external};e.is_archived||(e.push_unarchived=1),k(Object(L.nb)(e)),Y.success(f.a.createElement("span",null,f.a.createElement("b",null,l.name)," workspace is",1===l.active?f.a.createElement(f.a.Fragment,null," unarchived"):f.a.createElement(f.a.Fragment,null," archived"),null!==we.selectedFolder&&f.a.createElement(f.a.Fragment,null," ",f.a.createElement("b",null,we.selectedFolder.label)," under directory"),".")),Rt()}),[]);Object(p.useEffect)((function(){var e=null;if(Object.values(ne).length&&(e=Object(s.a)(Object(s.a)({},ne[ae.id]),{},{value:ae.id,label:ae.name})),"edit"===r){var t=[],a=[],n=void 0!==l.type&&"WORKSPACE"===l.type?1===l.is_lock:1===l.private;l.members.length&&(t=l.members.filter((function(e){return 1===e.active&&"internal"===e.type})).map((function(e){return{value:e.id,label:e.name,name:e.name,id:e.id,first_name:""===e.first_name?e.email:e.first_name,profile_image_link:e.profile_image_link,profile_image_thumbnail_link:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link,has_accepted:e.has_accepted,email:e.email}})),a=l.members.filter((function(e){return"external"===e.type})).map((function(e){return{value:e.id,label:""!==e.name?e.name:""!==e.first_name?e.first_name:e.email,name:e.name,id:e.id,first_name:""===e.first_name?e.email:e.first_name,profile_image_link:e.profile_image_link,profile_image_thumbnail_link:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link,email:e.email,has_accepted:e.has_accepted}})),wt(l.members.filter((function(e){return 0===e.active&&e.has_accepted})))),Te(Object(s.a)(Object(s.a)({},we),{},{has_folder:null!==l&&"WORKSPACE"===l.type&&null!==l.folder_id,selectedUsers:t,selectedFolder:l.folder_id?{value:l.folder_id,label:l.folder_name}:null,description:l.description,textOnly:l.description,name:l.name,is_private:n,has_externals:a.length>0,selectedExternals:a})),tt({name:!0,folder:!0,team:!0}),l.hasOwnProperty("primary_files")&&Be(l.primary_files)}else Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{selectedUsers:e?[e]:[],selectedFolder:null===l?null:{value:l.id,label:l.name},has_folder:null!==l&&"FOLDER"===l.type})})),tt((function(t){return Object(s.a)(Object(s.a)({},t),{},{team:!!e||null,name:null})}));return function(){return k(Object(F.h)())}}),[]),Object(p.useEffect)((function(){var e=!0;we.has_folder&&null===we.selectedFolder&&(e=!1),tt((function(t){return Object(s.a)(Object(s.a)({},t),{},{has_folder:e})})),St()}),[we.has_folder,we.selectedFolder]),Object(p.useEffect)((function(){var e=Object.values(ne).filter((function(e){return"internal"===e.type&&1===e.active})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:e.id,label:e.name})}));ue(e)}),[Object.values(ne).length]),Object(p.useEffect)((function(){if(re.length){var e=re.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:e.id,label:e.has_accepted?"".concat(e.email," | ").concat(e.first_name," ").concat(e.last_name," - ").concat(e.external_company_name):"".concat(e.email," "),dictionary:{peopleExternal:m("PEOPLE.EXTERNAL","External"),peopleInvited:m("PEOPLE.INVITED","Invited")}})}));be(e)}}),[re.length]);var Bt=function(e,t){return!t||(-1!==e.label.toLowerCase().search(t.toLowerCase())||e.data.email&&-1!==e.data.email.toLowerCase().search(t.toLowerCase()))},qt=function(){ee((function(e){return!e}))},Vt=function(e){e.persist(),gt((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},e.target.name,e.target.value))}))},Yt=function(e,t){gt(Object(s.a)(Object(s.a)({},vt),{},{send_by_email:"myself"!==t}))};return f.a.createElement(h.a,{innerRef:lt.container,isOpen:X,toggle:Rt,centered:!0,size:"lg",onOpened:function(){lt.workspace_name&&lt.workspace_name.current&&lt.workspace_name.current.focus()}},f.a.createElement(D.a,{toggle:Rt},"edit"===r?Nt.updateWorkspace:Nt.createWorkspace),f.a.createElement(_.a,{onDragOver:function(){Re(!0)}},f.a.createElement(h.a,{isOpen:$,toggle:qt,centered:!0,onOpened:function(){lt.first_name&&lt.first_name.current&&lt.first_name.current.focus()}},f.a.createElement(D.a,{toggle:qt},Nt.newExternalUser),f.a.createElement(_.a,null,f.a.createElement(j.a,{className:"modal-info mb-3"},Nt.newExternalInfo),f.a.createElement(j.a,{className:"modal-label"},Nt.firstName),f.a.createElement(v.a,{className:"mb-2",name:"first_name",value:vt.first_name,onChange:Vt,autoFocus:!0,innerRef:lt.first_name}),f.a.createElement(j.a,{className:"modal-label"},Nt.middleName),f.a.createElement(v.a,{className:"mb-2",name:"middle_name",value:vt.middle_name,onChange:Vt}),f.a.createElement(j.a,{className:"modal-label"},Nt.lastName),f.a.createElement(v.a,{className:"mb-2",name:"last_name",value:vt.last_name,onChange:Vt}),f.a.createElement(j.a,{className:"modal-label"},Nt.companyName),f.a.createElement(v.a,{className:"mb-2",name:"company",value:vt.company,onChange:Vt}),f.a.createElement(j.a,{className:"modal-label"},Nt.languageLabel),f.a.createElement(U.a,{styles:"1"===te.GENERAL_SETTINGS.dark_mode?M.a:M.b,value:Ct.find((function(e){return e.value===vt.language})),onChange:function(e){gt((function(t){return Object(s.a)(Object(s.a)({},t),{},{language:e.value})}))},options:Ct}),f.a.createElement(V,{className:"mt-3"},f.a.createElement(A.j,{readOnly:!0,onClick:function(e){Yt(0,"myself")},checked:!vt.send_by_email,value:"myself",name:"myself"},Nt.sendMyself),f.a.createElement(A.j,{readOnly:!0,onClick:function(e){Yt(0,"driff")},checked:vt.send_by_email,value:"driff",name:"driff"},Nt.sendTruDriff))),f.a.createElement(g.a,null,f.a.createElement(y.a,{className:"btn-outline-secondary",onClick:qt},Nt.cancel),f.a.createElement(y.a,{color:"primary",onClick:function(){qt(),Et.some((function(e){return e.email===vt.email}))?ht(Et.map((function(e){return e.email===vt.email?vt:e}))):ht([].concat(Object(d.a)(Et),[vt])),gt({email:"",first_name:"",middle_name:"",last_name:"",company:"",language:"en",send_by_email:!0})}},Nt.save))),f.a.createElement(R.a,{hide:!Se,ref:lt.dropZone,onDragLeave:Pt,onDrop:function(e){!function(e){var t=[];e.forEach((function(e){var a=Math.floor(Date.now());"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/webp"===e.type?t.push({rawFile:e,type:"IMAGE",id:a,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:ae}):"video/mp4"===e.type?t.push({rawFile:e,type:"VIDEO",id:a,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:ae}):t.push({rawFile:e,type:"DOC",id:a,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:ae})})),Me((function(e){return[].concat(Object(d.a)(e),t)})),Pt()}(e.acceptedFiles)},onCancel:Pt,attachedFiles:Ue}),f.a.createElement(H,{className:"modal-input mt-0"},f.a.createElement("div",null,f.a.createElement(j.a,{className:"modal-info pb-3 pt-3"},Nt.workspaceInfo),f.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},f.a.createElement("div",{className:"icon-wrapper",onClick:function(){lt.iconDropZone.current.open()}},f.a.createElement(R.a,{acceptType:"imageOnly",hide:!De,ref:lt.iconDropZone,onDragLeave:Ut,onDrop:function(e){var t=e.acceptedFiles;Wt(t)},onCancel:Ut}),f.a.createElement(N.a,{imageLink:we.icon_link,name:we.name,noDefaultClick:!0,forceThumbnail:!1}),f.a.createElement("span",{className:"btn btn-outline-light btn-sm"},f.a.createElement(N.s,{icon:"pencil"}))),f.a.createElement("div",{className:"name-wrapper"},f.a.createElement(j.a,{className:"modal-label",for:"chat"},Nt.workspaceName),f.a.createElement(v.a,{name:"name",defaultValue:"edit"===r?l.name:"",onFocus:function(){it((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:""})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:null})}))},onChange:function(e){e.persist(),Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{name:e.target.value.trim()})}))},onBlur:function(){St()},valid:et.name,invalid:null!==et.name&&!et.name,innerRef:lt.workspace_name}),f.a.createElement(A.f,{valid:et.name},rt.name))))),f.a.createElement(H,{className:"modal-input checkboxes"},f.a.createElement("div",null,f.a.createElement(A.a,{type:"success",name:"has_folder",checked:we.has_folder,onClick:At},Nt.addToFolder)),f.a.createElement("div",null,f.a.createElement(A.a,{type:"success",name:"has_externals",checked:we.has_externals,onClick:At},Nt.workspaceWithExternals)),f.a.createElement("div",{style:{position:"relative"}},f.a.createElement(N.t,{content:f.a.createElement("div",null,Nt.workspaceWithExternalsInfo1,f.a.createElement("br",null),Nt.workspaceWithExternalsInfo2)},f.a.createElement(N.s,{icon:"alert-circle",width:"16",height:"16"})))),!0===we.has_folder&&f.a.createElement(H,{className:"modal-input"},f.a.createElement(j.a,{for:"people"},Nt.folder),f.a.createElement(K,{options:It,value:we.selectedFolder,onChange:function(e){Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{selectedFolder:e})}))},isMulti:!1,isClearable:!0}),f.a.createElement(A.f,{valid:et.has_folder},rt.has_folder)),f.a.createElement(H,{className:"modal-input"},f.a.createElement(j.a,{for:"people"},Nt.team),f.a.createElement(B,{valid:et.team,options:de,value:we.selectedUsers,inputValue:he,onChange:function(e){null===e?(Te((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedUsers:[]})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{team:"edit"===r})}))):(Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{selectedUsers:e})})),tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{team:!0})})))},onInputChange:function(e){_e(e)},filterOption:Bt,isSearchable:!0}),f.a.createElement(A.f,{valid:et.user},rt.user)),!0===we.has_externals&&f.a.createElement(H,{className:"modal-input external-select",valid:et.external},f.a.createElement(j.a,{for:"people"},Nt.externalGuest),f.a.createElement(A.f,{valid:et.external},rt.external),f.a.createElement(B,{creatable:!0,options:fe,value:we.selectedExternals,inputValue:ge,isValidNewOption:function(e,t,a){var n=a.some((function(t){return t.email===e})),r=t.some((function(t){return t.email===e}));return!n&&!r&&""!==e&&(!!x.a.test(e)&&!Tt.some((function(t){return t.email===e})))},onCreateOption:function(e){var t=Et.find((function(t){return t.email===e}));gt(t||{email:e,first_name:"",middle_name:"",last_name:"",company:"",language:"en",send_by_email:!0}),qt(!0),Te((function(t){return Object(s.a)(Object(s.a)({},t),{},{selectedExternals:[].concat(Object(d.a)(t.selectedExternals),[{id:a(71).generate(),label:e,value:e,name:e,first_name:e,email:e,has_accepted:!1}])})}))},onChange:function(e){if(e&&e.some((function(e){return e.label.startsWith("Add ")&&!e.hasOwnProperty("id")}))){ee(!0);var t=e.find((function(e){return e.label.startsWith("Add ")}));gt({email:t.value,first_name:"",middle_name:"",last_name:"",company:"",language:"en",send_by_email:!0})}if(null===e)Te((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedExternals:[]})})),ht([]);else{var n=e.map((function(e){return e.id?e:Object(s.a)(Object(s.a)({},e),{},{id:a(71).generate(),label:e.value,value:e.value,name:e.value,first_name:e.value,email:e.value,has_accepted:!1})}));Te((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedExternals:n})})),ht(Et.filter((function(t){return e.some((function(e){return e.email===t.email}))})))}},onInputChange:function(e){ye(e);var t=fe.some((function(t){return t.email===e})),a=we.selectedExternals.some((function(t){return t.email===e}));t||a||""===e?Dt(null):x.a.test(e)?Tt.some((function(t){return t.email===e}))?Dt(!1,!1):Dt(!0):Dt(!1,!0)},filterOption:Bt,formatCreateLabel:function(e){return"Add ".concat(e)},isSearchable:!0,classNamePrefix:"react-select",onMenuClose:function(){tt((function(e){return Object(s.a)(Object(s.a)({},e),{},{external:!0})}))},onEmailClick:function(e){var t=Et.find((function(t){return t.email===e.email}));t&&gt(t),qt(!0)}})),f.a.createElement(q,{className:"modal-description",height:window.innerHeight-660,required:!0,showFileButton:!0,onChange:Ft,onOpenFileDialog:function(){lt.dropZone.current&&lt.dropZone.current.open()},defaultValue:"edit"===r&&l?l.description:"",mode:r,valid:et.description,feedback:rt.description,disableBodyMention:!0,modal:"workspace",mentionedUserIds:st,onAddUsers:function(e){Te(Object(s.a)(Object(s.a)({},we),{},{selectedUsers:[].concat(Object(d.a)(e.map((function(e){return{id:e.id,value:e.id,label:e.name,name:e.name,first_name:e.first_name,profile_image_link:e.profile_image_thumbnail_link?e.profile_image_thumbnail_link:e.profile_image_link}}))),Object(d.a)(we.selectedUsers))})),dt([])},onDoNothing:function(e){ft(e.map((function(e){return e.id}))),dt(st.filter((function(t){return!e.some((function(e){return e.id===t}))})))},setInlineImages:ze}),(Ue.length>0||Ke.length>0)&&f.a.createElement(H,{className:"file-attachment-wrapper"},f.a.createElement(N.h,{attachedFiles:[].concat(Object(d.a)(Ue),Object(d.a)(Ke)),handleRemoveFile:function(e){Be((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))})),Me((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))}))}})),f.a.createElement(H,{className:"action-wrapper"},f.a.createElement(j.a,null),f.a.createElement(A.a,{name:"is_private",checked:we.is_private,onClick:At},Nt.lockWorkspace),f.a.createElement("div",{className:"lock-workspace-text-container pb-3"},f.a.createElement(j.a,{className:"lock-workspace-text"},Nt.lockWorkspaceText)),f.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(!Qe){var e=[].concat(Object(d.a)(we.selectedUsers.filter((function(e){return"number"===typeof e.id}))),Object(d.a)(we.selectedExternals.filter((function(e){return"number"===typeof e.id})))),t=e.map((function(e){return e.id})),a={name:we.name,description:we.description,is_external:0,member_ids:t,is_lock:we.is_private?1:0,workspace_id:we.selectedFolder&&"number"===typeof we.selectedFolder.value&&we.has_folder?we.selectedFolder.value:0,file_ids:Ye.map((function(e){return e.id}))};if(Et.length&&we.has_externals&&(a="edit"===r?Object(s.a)(Object(s.a)({},a),{},{new_externals:Et.filter((function(e){return we.selectedExternals.some((function(t){return t.email===e.email}))})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{first_name:e.first_name.trim(),middle_name:e.middle_name.trim(),last_name:e.last_name.trim(),company:e.company.trim()})})),is_external:1}):Object(s.a)(Object(s.a)({},a),{},{external_emails:Et.filter((function(e){return we.selectedExternals.some((function(t){return t.email===e.email}))})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{first_name:e.first_name.trim(),middle_name:e.middle_name.trim(),last_name:e.last_name.trim(),company:e.company.trim()})})),is_external:1})),"edit"===r){var n=l.members.filter((function(e){return 1===e.active})),i=l.members.filter((function(e){return!t.some((function(t){return e.id===t}))})),c=t.filter((function(e){return!n.some((function(t){return t.id===e}))})),o=e.filter((function(e){return!e.has_accepted})).map((function(e){return e.id}));a=Object(s.a)(Object(s.a)({},a),{},{workspace_id:we.selectedFolder&&we.has_folder?we.selectedFolder.value:0,topic_id:l.id,remove_member_ids:i.map((function(e){return e.id})),new_member_ids:c}),(i.filter((function(e){return e.has_accepted})).length||a.new_member_ids.filter((function(e){return!o.some((function(t){return t===e}))&&!xt.some((function(t){return t.id===e}))})).length||l.name!==we.name)&&(a.system_message="CHANNEL_UPDATE::".concat(JSON.stringify({author:{id:ae.id,name:ae.name,first_name:ae.first_name,partial_name:ae.partial_name,profile_image_link:ae.profile_image_thumbnail_link?ae.profile_image_thumbnail_link:ae.profile_image_link},title:we.name===l.name?"":we.name,added_members:c.filter((function(e){return!o.some((function(t){return t===e}))&&!xt.some((function(t){return t.id===e}))})),removed_members:i.filter((function(e){return e.has_accepted})).map((function(e){return e.id}))})));var u=function(){Ze(!0);if(1===l.members.length&&0===we.selectedUsers.length&&1===l.is_lock){var e={id:l.channel.id,is_archived:!0,is_muted:!1,is_pinned:!1,is_shared:l.is_external};k(Object(L.nb)(e)),Rt()}else i.some((function(e){return e===ae.id}))&&k(Object(C.M)({workspace_id:l.id,channel_id:l.channel.id})),k(Object(C.T)(a,(function(e,t){if(Rt(),!e){if(we.icon&&Lt(a,we.icon),t.data){var n=Et.find((function(e){return!e.send_by_email}));if(n){var r=t.data.members.find((function(e){return e.email===n.email}));r&&r.invite_link&&Object(W.b)(Y,r.invite_link)}}if(function(){var e=[];if(l.primary_files&&l.primary_files.length&&(e=l.primary_files.filter((function(e){return!Ke.some((function(t){return t.id===e.id}))}))),e.length){var t={topic_id:l.id,is_primary:1,file_ids:e.map((function(e){return e.id}))};k(Object(w.q)(t))}}(),Ue.length){var i=new FormData;for(var c in Ue)i.append("files["+c+"]",Ue[c].rawFile);k(Object(w.Ub)({is_primary:1,topic_id:t.data.id,files:i}))}we.selectedFolder&&"number"===typeof we.selectedFolder.value?E.push("/workspace/dashboard/".concat(we.selectedFolder.value,"/").concat(Object(x.h)(we.selectedFolder.label),"/").concat(t.data.id,"/").concat(Object(x.h)(we.name))):E.push("/workspace/dashboard/".concat(t.data.id,"/").concat(Object(x.h)(we.name)))}})))};if(l.is_lock!==a.is_lock&&1===a.is_lock||we.has_externals){!function(){var e={type:"confirmation",headerText:we.has_externals&&1===a.is_lock?"".concat(Nt.lockedWorkspace," / ").concat(Nt.externalWorkspace):we.has_externals?Nt.externalWorkspace:Nt.lockedWorkspace,submitText:Nt.confirm,cancelText:Nt.cancel,bodyText:we.has_externals&&1===a.is_lock?"".concat(Nt.externalUserConfirmation,"<br/>").concat(Nt.lockedWorkspaceText):we.has_externals?Nt.externalUserConfirmation:Nt.lockedWorkspaceText,actions:{onSubmit:u}};k(Object(T.a)(e))}()}else u()}else{var p=function(){Ze(!0),k(Object(C.d)(a,(function(e,t){if(Rt(),e&&(Ze(!1),Y.warning(f.a.createElement("span",null,"Workspace creation failed.",f.a.createElement("br",null),"Please try again."))),t){if(we.selectedFolder&&"number"===typeof we.selectedFolder.value?E.push("/workspace/dashboard/".concat(we.selectedFolder.value,"/").concat(Object(x.h)(t.data.workspace.name),"/").concat(t.data.id,"/").concat(Object(x.h)(t.data.topic.name)),{folder_id:we.selectedFolder.value,workspace_id:t.data.id}):E.push("/workspace/dashboard/".concat(t.data.id,"/").concat(Object(x.h)(t.data.topic.name)),{folder_id:null,workspace_id:t.data.id}),Ue.length){var a=new FormData;for(var n in Ue)a.append("files["+n+"]",Ue[n].rawFile);k(Object(w.Ub)({is_primary:1,topic_id:t.data.id,files:a}))}var r={id:t.data.id,name:t.data.topic.name,is_external:t.data.is_external,is_lock:t.data.is_lock,description:t.data.topic.description,unread_count:0,type:"WORKSPACE",key_id:t.data.key_id,active:1,unread_chats:0,unread_posts:0,folder_id:t.data.workspace?t.data.workspace.id:null,folder_name:t.data.workspace?t.data.workspace.name:null,member_ids:t.data.member_ids,members:t.data.members,channel:{code:t.data.channel.code,id:t.data.channel.id,loaded:!1},team_channel:{code:t.data.team_channel.code,id:t.data.team_channel.id,icon_link:t.data.team_channel.icon_link},created_at:t.data.topic.created_at,updated_at:t.data.topic.created_at,is_shared:we.has_externals},i=Et.find((function(e){return!e.send_by_email}));if(i){var l=t.data.members.find((function(e){return e.email===i.email}));l&&l.invite_link&&Object(W.b)(Y,l.invite_link)}k(Object(C.P)(r)),we.icon&&Lt(r,we.icon),null!==we.selectedFolder?Y.success(f.a.createElement("span",{dangerouslySetInnerHTML:{__html:Nt.toasterWorkspaceIsCreated}})):Y.success(f.a.createElement("span",{dangerouslySetInnerHTML:{__html:m("TOASTER.WORKSPACE_UNDER_FOLDER_IS_CREATED","::workspace_name:: workspace is created under ::folder_name:: directory",{workspace_name:"<b>".concat(we.name,"</b>"),folder_name:"<b>".concat(we.selectedFolder.label,"</b>")})}}))}})))};if(1===a.is_lock||we.has_externals){!function(){var e={type:"confirmation",headerText:we.has_externals&&1===a.is_lock?"".concat(Nt.lockedWorkspace," / ").concat(Nt.externalWorkspace):we.has_externals?Nt.externalWorkspace:Nt.lockedWorkspace,submitText:Nt.confirm,cancelText:Nt.cancel,bodyText:we.has_externals&&1===a.is_lock?"".concat(Nt.externalUserConfirmation,"<br/>").concat(Nt.lockedWorkspaceText):we.has_externals?Nt.externalUserConfirmation:Nt.lockedWorkspaceText,actions:{onSubmit:p}};k(Object(T.a)(e))}()}else p()}}},disabled:""===we.name.trim()||""===we.textOnly.trim()||0===we.selectedUsers.length},Qe&&f.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"edit"===r?Nt.updateWorkspace:Nt.createWorkspace),"edit"===r&&f.a.createElement("div",{className:"action-archive-wrapper"},1===l.active?f.a.createElement("span",{onClick:Ht,className:"btn-archive text-link mt-2 cursor-pointer"},Nt.archiveThisWorkspace):f.a.createElement("span",{onClick:Ht,className:"btn-archive text-link mt-2 cursor-pointer"},Nt.unArchiveThisWorkspace)))))}))},641:function(e,t,a){"use strict";a.r(t);var n,r=a(11),i=a(1),l=a(8),c=a(2),o=a(0),s=a.n(o),d=a(36),u=a(5),m=a(629),p=a(736),f=a(728),b=a(658),O=a(630),E=a(3),h=a(15),_=a(21),j=a(27),v=a(7),g=a(663),y=a(14),k=Object(E.a)(m.a)(n||(n=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 5px 0 20px 0;\n\n  > .form-control:not(:first-child) {\n    border-radius: 5px;\n  }\n\n  ","\n\n  .input-feedback {\n    margin-left: 130px;\n    @media all and (max-width: 480px) {\n      margin-left: 0;\n    }\n  }\n\n  p {\n    max-width: 530px;\n    opacity: 0.8;\n  }\n\n  button {\n    margin-left: auto;\n  }\n  .react-select-container {\n    width: 100%;\n  }\n  .react-select__multi-value__label {\n    align-self: center;\n  }\n  &.action-wrapper {\n    margin-top: 40px;\n\n    .action-archive-wrapper {\n      display: flex;\n      width: 100%;\n\n      .btn-archive {\n        display: flex;\n        margin-left: auto;\n        text-decoration: underline;\n        color: #a7abc3;\n      }\n    }\n  }\n"])),"");t.default=s.a.memo((function(e){var t=e.data,a=t.type,n=t.mode,c=t.item,m=void 0===c?null:c,E=Object(d.g)(),x=Object(v.cb)()._t,w={createWorkspaceFolder:x("WORKSPACE.CREATE_WORKSPACE_FOLDER","Create folder"),updateWorkspaceFolder:x("WORKSPACE.UPDATE_WORKSPACE_FOLDER","Update folder"),removeWorkspaceFolder:x("WORKSPACE.DELETE_WORKSPACE_FOLDER","Remove folder"),folderName:x("FOLDER_NAME","Name"),folderInfo:x("FOLDER_INFO","Folders help to organize your workspaces and are set for everyone who can see them. A workspace can only be connected to one folder."),lockWorkspaceFolder:x("WORKSPACE.WORKSPACE_FOLDER_LOCK","Make folder private"),lockWorkspaceFolderText:x("WORKSPACE.WORKSPACE_FOLDER_LOCK.DESCRIPTION","When a folder is private it is only visible to the members of the workspaces inside the folder."),description:x("DESCRIPTION","Description"),remove:x("WORKSPACE.REMOVE","Remove"),cancel:x("WORKSPACE.CANCEL","Cancel"),removeFolderText:x("WORKSPACE.REMOVE_FOLDER_TEXT","Workspaces in"),removeFolderText2:x("WORKSPACE.REMOVE_FOLDER_TEXT_2","will move back to the Workspaces sections in your sidebar. <br /><br />The workspaces in this folder will not be removed when you remove this folder."),confirm:x("WORKSPACE.CONFIRM","Confirm"),lockedFolder:x("WORKSPACE.LOCKED_FOLDER","Private folder"),lockedFolderText:x("WORKSPACE.LOCKED_FOLDER_TEXT","Only members can view and search this workspace.")},T=Object(v.X)(),C=Object(o.useRef)(),N=Object(u.c)(),S=Object(u.d)((function(e){return e.workspaces})),R=S.activeTopic,A=S.folders,I=Object(u.d)((function(e){return e.workspaces.activeTab})),D=Object(o.useState)(!0),L=Object(l.a)(D,2),F=L[0],P=L[1],U=Object(o.useState)(!1),M=Object(l.a)(U,2),W=M[0],H=M[1],K=Object(o.useState)({is_private:!1,name:"",description:"",textOnly:"",workspace_id:null}),B=Object(l.a)(K,2),q=B[0],V=B[1],Y=Object(o.useState)({name:null}),z=Object(l.a)(Y,2),G=z[0],X=z[1],Q=Object(o.useState)({name:""}),Z=Object(l.a)(Q,2),J=Z[0],$=Z[1],ee=function(){P(!F),N(Object(h.d)({type:a}))},te=Object(o.useCallback)((function(e){var t=e.target.dataset.name;V((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t,!e[t]))}))}),[V]);Object(o.useEffect)((function(){"edit"===n&&V(Object(i.a)(Object(i.a)({},q),{},{name:m.name,description:m.description,textOnly:m.description,is_private:1===m.is_lock,workspace_id:m.id}))}),[]);var ae=Object(o.useCallback)((function(){X(Object(i.a)(Object(i.a)({},G),{},{name:""!==q.name})),"edit"===n?""===q.name?$(Object(i.a)(Object(i.a)({},J),{},{name:"Please provide a folder name."})):Object.values(A).filter((function(e){return e.name.toLowerCase()===q.name.toLowerCase()})).length?m.name!==q.name&&$(Object(i.a)(Object(i.a)({},J),{},{name:"Folder name already exists."})):$(Object(i.a)(Object(i.a)({},J),{},{name:""})):""===q.name?$(Object(i.a)(Object(i.a)({},J),{},{name:"Please provide a folder name."})):Object.values(A).filter((function(e){return e.name.toLowerCase()===q.name.toLowerCase()})).length?$(Object(i.a)(Object(i.a)({},J),{},{name:"Folder name already exists."})):$(Object(i.a)(Object(i.a)({},J),{},{name:""}))}),[q.name,G,X,J,$,A]),ne=Object(o.useCallback)((function(e){e.persist(),null!==G.name&&X((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:null})})),V((function(t){return Object(i.a)(Object(i.a)({},t),{},{name:e.target.value.trim()})})),ae()}),[G.name,X,V]),re=Object(o.useCallback)((function(){ae()}),[ae]),ie=Object(o.useCallback)((function(){if(!W){var e={name:q.name,description:q.description,is_external:"extern"===I?1:0,is_folder:1,is_lock:q.is_private?1:0};if("edit"===n){e=Object(i.a)(Object(i.a)({},e),{},{workspace_id:q.workspace_id,topic_id:q.workspace_id});var t=function(){H(!0),N(Object(_.T)(e,(function(e,t){H(!1),e&&T.error(s.a.createElement("span",null,"Folder update failed.",s.a.createElement("br",null),"Please try again.")),t&&(T.success(s.a.createElement("span",null,s.a.createElement("b",null,q.name)," folder is updated")),ee())})))};m.is_lock!==e.is_lock&&1===e.is_lock?function(){var e={type:"confirmation",headerText:w.lockedFolder,submitText:w.confirm,cancelText:w.cancel,bodyText:w.lockedFolderText,actions:{onSubmit:t}};N(Object(h.a)(e))}():t()}else{var a=function(){H(!0),N(Object(_.d)(e,(function(e,t){H(!1),e&&T.error(s.a.createElement("span",null,"Folder creation failed.",s.a.createElement("br",null),"Please try again.")),t&&(T.success(s.a.createElement("span",null,s.a.createElement("b",null,q.name)," folder is created")),ee())})))};1===e.is_lock?function(){var e={type:"confirmation",headerText:w.lockedFolder,submitText:w.confirm,cancelText:w.cancel,bodyText:w.lockedFolderText,actions:{onSubmit:a}};N(Object(h.a)(e))}():a()}}}),[N,ee,I,q.description,q.is_private,q.name,G.name,V,n]),le=function(){N(Object(_.e)({topic_id:m.id},(function(e,t){e||R&&R.folder_id===m.id&&E.push("/workspace/chat/".concat(R.id,"/").concat(Object(y.h)(R.name)))}))),ee()};return s.a.createElement(p.a,{isOpen:F,toggle:ee,size:"lg",onOpened:function(){C&&C.current&&C.current.focus()},centered:!0},s.a.createElement(g.a,{toggle:ee,className:"workspace-folder-header"},"edit"===n?"Edit  folder":"Create new folder"),s.a.createElement(f.a,null,s.a.createElement(k,{className:"modal-input"},s.a.createElement("div",null,s.a.createElement(b.a,{className:"modal-info"},w.folderInfo),s.a.createElement(b.a,{className:"modal-label",for:"folder"},w.folderName)),s.a.createElement("div",{className:"folder-searchbar-container"},s.a.createElement(O.a,{className:"folder-searchbar",defaultValue:"edit"===n?m.name:"",onChange:ne,onBlur:re,valid:G.name,invalid:null!==G.name&&!G.name,innerRef:C}),s.a.createElement(j.f,{valid:G.name},J.name))),s.a.createElement(k,{className:"action-wrapper",style:{marginTop:"40px"}},s.a.createElement("div",null,s.a.createElement(j.a,{name:"is_private",checked:q.is_private,onClick:te},w.lockWorkspaceFolder),s.a.createElement("div",{className:"lock-workspace-folder-text-container"},s.a.createElement(b.a,{className:"lock-workspace-text"},w.lockWorkspaceFolderText))),s.a.createElement("div",{className:"create-folder-btn ml-auto"},s.a.createElement("button",{className:"btn btn-primary",disabled:null===G.name||!1===G.name,onClick:ie},W&&s.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"edit"===n?w.updateWorkspaceFolder:w.createWorkspaceFolder)),"edit"===n&&s.a.createElement("div",{className:"action-archive-wrapper"},s.a.createElement("span",{onClick:function(){var e={type:"confirmation",headerText:w.removeWorkspaceFolder,submitText:w.remove,cancelText:w.cancel,bodyText:"".concat(w.removeFolderText," <b>").concat(m.name,"</b> ").concat(w.removeFolderText2),actions:{onSubmit:le}};N(Object(h.a)(e))},className:"btn-archive text-link mt-2 cursor-pointer"},w.removeWorkspaceFolder)))))}))},642:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(2),i=a(98),l=a.n(i),c=a(0),o=a.n(c),s=a(667),d=a.n(s),u=a(5),m=a(736),p=a(728),f=a(729),b=a(709),O=a(3),E=a(15),h=a(18),_=a(137),j=a(7),v=a(663);function g(){var e=Object(r.a)(["\n  display: flex;\n  width: 100%;\n  flex-flow: column;\n  > div {\n    margin-bottom: 10px;\n  }\n"]);return g=function(){return e},e}var y=O.a.div(g());t.default=o.a.memo((function(e){var t=e.data,a=t.type,r=t.post,i=t.topic_id,s=Object(u.c)(),O=Object(j.X)(),g=new Date,k=g.getMinutes();g.setMinutes(k+1);var x=Object(c.useState)("20m"),w=Object(n.a)(x,2),T=w[0],C=w[1],N=Object(c.useState)(g),S=Object(n.a)(N,2),R=S[0],A=S[1],I=Object(c.useState)(null),D=Object(n.a)(I,2),L=D[0],F=D[1],P=Object(c.useState)(!0),U=Object(n.a)(P,2),M=U[0],W=U[1],H=Object(c.useState)(!0),K=Object(n.a)(H,2),B=K[0],q=K[1],V=Object(c.useState)(!1),Y=Object(n.a)(V,2),z=Y[0],G=Y[1],X=function(){q(!B),s(Object(E.d)({type:a}))},Q=function(e,t){F(!1),C(t),W(!0)};return o.a.createElement(m.a,{isOpen:B,toggle:X,centered:!0,className:"chat-forward-modal"},o.a.createElement(v.a,{toggle:X},"Snooze post"),o.a.createElement(p.a,null,o.a.createElement(y,null,o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"2m")},checked:"2m"===T,value:"2m",name:"role"},"2 minutes"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"20m")},checked:"20m"===T,value:"20m",name:"role"},"20 minutes"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"1h")},checked:"1h"===T,value:"1h",name:"role"},"1 hour"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"3h")},checked:"3h"===T,value:"3h",name:"role"},"3 hours"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"tomorrow")},checked:"tomorrow"===T,value:"tomorrow",name:"role"},"Tomorrow"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){Q(0,"next_week")},checked:"next_week"===T,value:"next_week",name:"role"},"Next Week"),o.a.createElement(_.a,{readOnly:!0,onClick:function(e){C("pick_data"),F(!0),W(!0)},checked:"pick_data"===T,value:"pick_data",name:"role"},"Pick date and time"),L&&o.a.createElement(d.a,{minDate:g,onChange:function(e){e>new Date?(A(e),W(!0)):W(!1)},value:R,disableClock:!0})),!1===M&&o.a.createElement("div",null,"Date time is invalid. Please select new date time.")),o.a.createElement(f.a,null,o.a.createElement(b.a,{disabled:!M,color:"primary",onClick:function(e){if(!z){if(G(!0),"pick_data"===T){var t=new Date;if(!(R>t))return void W(!1);W(!0)}var a={post_id:r.id,set_time:"pick_data"===T?l.a.utc(new Date(R)).format("YYYY-MM-DD HH:mm:ss"):T};s(Object(h.wb)(a,(function(e,t){if(G(!1),X(),!e){s(Object(h.Jb)({post_id:r.id,topic_id:i}));var a="",n=new Date;switch(T){case"2m":n.setMinutes(n.getMinutes()+2),a="for 2 minutes.";break;case"20m":n.setMinutes(n.getMinutes()+20),a="for 20 minutes.";break;case"1h":n.setHours(n.getHours()+1),a="for an hour.";break;case"3h":n.setHours(n.getHours()+3),a="for 3 hours";break;case"tomorrow":n.setDate(n.getDate()+1),a="for a day";break;case"next_week":n.setDate(n.getDate()+7),a="for a a week";break;case"pick_data":a="until ".concat(l()(new Date(R)).format("YYYY-MM-DD HH:mm"));break;default:a=T+""}O.success("You snoozed this ".concat(r.title," ").concat(a))}})))}}},z&&o.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Snooze")," ",o.a.createElement(b.a,{outline:!0,color:"secondary",onClick:X},"Cancel")))}))},643:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(24),i=a(2),l=a(0),c=a.n(l),o=a(5),s=a(736),d=a(632),u=a(728),m=a(658),p=a(630),f=a(729),b=a(3),O=a(15),E=a(663);function h(){var e=Object(i.a)([""]);return h=function(){return e},e}function _(){var e=Object(i.a)([""]);return _=function(){return e},e}var j=Object(b.a)(s.a)(_()),v=Object(b.a)(d.a)(h());t.default=c.a.memo((function(e){var t=e.className,a=void 0===t?"":t,i=e.title,s=e.type,d=e.defaultValue,b=void 0===d?"":d,h=e.preInputLabel,_=void 0===h?"":h,g=e.label,y=void 0===g?"":g,k=e.postInputLabel,x=void 0===k?"":k,w=e.onPrimaryAction,T=e.onChange,C=e.onClose,N=void 0===C?function(){}:C,S=e.labelClose,R=void 0===S?"Close":S,A=e.labelPrimaryAction,I=void 0===A?"Save":A,D=Object(r.a)(e,["className","title","type","defaultValue","preInputLabel","label","postInputLabel","onPrimaryAction","onChange","onClose","labelClose","labelPrimaryAction"]),L=Object(o.c)(),F={main:Object(l.useRef)(null),name:Object(l.useRef)(null)},P=Object(l.useState)(b),U=Object(n.a)(P,2),M=U[0],W=U[1],H=function(){L(Object(O.d)({type:s}))},K=Object(l.useRef)();return c.a.createElement(j,Object.assign({ref:F.main,isOpen:!0,toggle:H,centered:!0,onOpened:function(){K&&K.current&&K.current.focus()},className:"single-input-modal ".concat(a)},D),c.a.createElement(E.a,{toggle:H},i),c.a.createElement(u.a,null,""!==_&&c.a.createElement(m.a,{className:"modal-info mb-3"},_),c.a.createElement(v,null,""!==y&&c.a.createElement(m.a,{className:"modal-label"},y),c.a.createElement(p.a,{innerRef:K,autoFocus:!0,defaultValue:b,onChange:function(e){W(e.target.value),T(e)}}),x)),c.a.createElement(f.a,null,c.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal",onClick:function(){N(),H()}},R),c.a.createElement("button",{disabled:""===M.trim(),type:"button",className:"btn btn-primary",onClick:function(){w(),H()}},I)))}))},644:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(8),i=a(24),l=a(2),c=a(0),o=a.n(c),s=a(5),d=a(82),u=a(736),m=a(728),p=a(658),f=a(729),b=a(3),O=a(19),E=a(15),h=a(7),_=a(663),j=a(52);function v(){var e=Object(l.a)([""]);return v=function(){return e},e}var g=Object(b.a)(u.a)(v());t.default=o.a.memo((function(e){var t=e.className,a=void 0===t?"":t,l=e.type,u=e.file,b=e.topic_id,v=e.folder_id,y=Object(i.a)(e,["className","type","file","topic_id","folder_id"]),k=Object(s.c)(),x=Object(h.X)(),w=Object(s.d)((function(e){return e.files.workspaceFiles})),T=Object(c.useState)(null),C=Object(r.a)(T,2),N=C[0],S=C[1],R=Object(c.useState)(!1),A=Object(r.a)(R,2),I=A[0],D=A[1],L=Object.values(w[b].folders).filter((function(e){return"undefined"===typeof e.payload&&((!v||e.id!==v)&&!e.is_archived)})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{id:e.id,label:e.search})})),F=function(){k(Object(E.d)({type:l}))},P=Object(h.S)().generalSettings.dark_mode;return o.a.createElement(g,Object.assign({isOpen:!0,toggle:F,centered:!0,className:"single-input-modal ".concat(a)},y),o.a.createElement(_.a,{toggle:F},"Move the file"),o.a.createElement(m.a,null,o.a.createElement("div",{className:"d-flex align-items-center"},o.a.createElement("span",{className:"pr-1 mb-3"},"Move"),o.a.createElement("div",{className:"folder-name mb-3"},u.search),o.a.createElement("span",{className:"pl-1 mb-3"},"to:")),o.a.createElement(p.a,{className:"folder-name"},"Select a folder"),o.a.createElement(d.a,{styles:"0"===P?j.b:j.a,options:L,onChange:function(e){S(e)}})),o.a.createElement(f.a,null,o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal",onClick:function(){F()}},"Cancel"),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){if(!I){if(D(!0),N){k(Object(O.Bb)({file_id:u.id,topic_id:b,folder_id:N.id},(function(e,t){D(!1),e?x.success(o.a.createElement("div",null,"Failed to move ",o.a.createElement("b",null,u.search)," to folder ",o.a.createElement("strong",null,N.label))):x.success(o.a.createElement("div",null,o.a.createElement("strong",null,u.search)," has been moved to folder ",o.a.createElement("strong",null,N.label)))})))}F()}}},I&&o.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Move File")))}))},645:function(e,t,a){"use strict";a.r(t);var n,r=a(8),i=a(2),l=(a(717),a(0)),c=a.n(l),o=a(5),s=a(736),d=a(728),u=a(729),m=a(709),p=a(3),f=a(15),b=a(663),O=Object(l.lazy)((function(){return Promise.all([a.e(17),a.e(18)]).then(a.bind(null,720))})),E=Object(p.a)(s.a)(n||(n=Object(i.a)(["\n  &.modal-dialog {\n    .modal-body {\n      padding: 0;\n\n      .cropper-view-box {\n        border-radius: 50%;\n      }\n    }\n  }\n"])));t.default=c.a.memo((function(e){var t=e.data,a=t.type,n=t.imageFile,i=t.handleSubmit,s=Object(o.c)(),p=Object(l.useState)(!0),h=Object(r.a)(p,2),_=h[0],j=h[1],v={cropper:Object(l.useRef)(null)},g=function(){j(!_),s(Object(f.d)({type:a}))};return c.a.createElement(E,{isOpen:_,toggle:g,size:"lg",centered:!0},c.a.createElement(b.a,{toggle:g},"Crop Image"),c.a.createElement(d.a,{style:{padding:0}},c.a.createElement(l.Suspense,{fallback:c.a.createElement(c.a.Fragment,null)},c.a.createElement(O,{style:{height:window.innerHeight-300,width:"100%"},aspectRatio:1,guides:!1,src:URL.createObjectURL(n),ref:v.cropper}))),c.a.createElement(u.a,null,c.a.createElement(m.a,{color:"primary",onClick:function(){var e=v.cropper.current.getCroppedCanvas().toDataURL("image/jpeg",.5);i(function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),i=r.length,l=new Uint8Array(i);i--;)l[i]=r.charCodeAt(i);return new File([l],t,{type:n,lastModified:Date.now()})}(e,n.name),e),g()}},"Save"),c.a.createElement(m.a,{color:"secondary",onClick:g},"Discard")))}))},646:function(e,t,a){"use strict";a.r(t);var n,r=a(12),i=a(8),l=a(2),c=a(0),o=a.n(c),s=a(5),d=a(736),u=a(728),m=a(729),p=a(709),f=a(15),b=a(27),O=a(7),E=a(663),h=a(6),_=a(14),j=a(3).a.span(n||(n=Object(l.a)(["\n  cursor: pointer;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n"])));t.default=o.a.memo((function(e){var t=e.data,a=t.submitText,n=void 0===a?"Submit":a,l=t.cancelText,v=void 0===l?"Cancel":l,g=t.onPrimaryAction,y=t.hasLastName,k=void 0!==y&&y,x=t.invitations,w=void 0===x?[]:x,T=t.type,C=t.fromRegister,N=Object(c.useState)(w),S=Object(i.a)(N,2),R=S[0],A=S[1],I=Object(c.useState)({valid:{},message:{}}),D=Object(i.a)(I,2),L=D[0],F=D[1],P=Object(O.cb)()._t,U=Object(s.c)(),M=Object(c.useState)(!0),W=Object(i.a)(M,2),H=W[0],K=W[1],B=Object(c.useState)(!1),q=Object(i.a)(B,2),V=q[0],Y=q[1],z=Object(c.useState)(!1),G=Object(i.a)(z,2),X=(G[0],G[1]),Q=Object(s.d)((function(e){return e.session.user})),Z={closeButton:P("BUTTON.CLOSE","Close"),availableToAdmin:P("TOOLTIP.AVAILABLE_TO_ADMIN","This option is only available for administrators"),userInvitations:P("LABEL.USER_INVITATIONS","User invitations"),firstName:P("INVITE.FIRST_NAME","First name"),lastName:P("INVITE.LAST_NAME","Last name"),email:P("INVITE.EMAIL","Email"),name:P("INVITE.NAME","Name")},J=function(e){e.persist();var t=e.currentTarget.dataset.id,a=e.currentTarget.name;A((function(n){return n[t][a]=e.target.value,n})),X((function(e){return!e}))},$=function(e){A((function(e){return k?e.push({first_name:"",last_name:"",email:""}):e.push({name:"",email:""}),e})),X((function(e){return!e}))},ee=function(e){var t=e.currentTarget.dataset.id;A((function(e){return e.splice(t,1),e})),X((function(e){return!e}))},te=function(e){A((function(t){return t.splice(e,1),t}))},ae=function(){K(!H),U(Object(f.d)({type:T}))};return Object(c.useEffect)((function(){for(var e=function(e){var t={};t=k?{first_name:"",last_name:"",email:""}:{name:"",email:""},A((function(e){return[].concat(Object(r.a)(e),[t])}))},t=R.length;t<3;t++)e()}),[]),o.a.createElement(d.a,{isOpen:H,toggle:ae,size:"lg",centered:!0},o.a.createElement(E.a,{toggle:ae,className:"invited-users-modal"},Z.userInvitations),(C||"owner"===Q.role.name||"admin"===Q.role.name)&&o.a.createElement(u.a,null,o.a.createElement("table",{className:"table table-responsive"},o.a.createElement("tr",null,k?o.a.createElement(o.a.Fragment,null,o.a.createElement("th",null,Z.firstName),o.a.createElement("th",null,Z.lastName)):o.a.createElement("th",null,Z.name),o.a.createElement("th",null,Z.email),o.a.createElement("th",null,o.a.createElement(h.s,{className:"cursor-pointer",icon:"circle-plus",onClick:$}))),R.map((function(e,t){return o.a.createElement("tr",{key:t},k?o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,o.a.createElement(b.e,{"data-id":t,placeholder:Z.firstName,name:"first_name",value:e.first_name,isValid:L.valid[t]?L.valid[t].first_name:null,feedback:L.message[t]?L.message[t].first_name:null,onChange:J})),o.a.createElement("td",null,o.a.createElement(b.e,{"data-id":t,placeholder:Z.lastName,name:"last_name",value:e.last_name,isValid:L.valid[t]?L.valid[t].last_name:null,feedback:L.message[t]?L.message[t].last_name:null,onChange:J}))):o.a.createElement("td",null,o.a.createElement(b.e,{"data-id":t,placeholder:Z.name,name:"name",value:e.name,isValid:L.valid[t]?L.valid[t].name:null,feedback:L.message[t]?L.message[t].name:null,onChange:J})),o.a.createElement("td",null,o.a.createElement(b.e,{"data-id":t,placeholder:Z.email,name:"email",value:e.email,type:"email",isValid:L.valid[t]?L.valid[t].email:null,feedback:L.message[t]?L.message[t].email:null,onChange:J})),o.a.createElement("td",null,o.a.createElement(h.s,{"data-id":t,className:"cursor-pointer",icon:"x",onClick:ee})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(j,{onClick:$},o.a.createElement(h.s,{icon:"plus"})," ",o.a.createElement("span",null,"Add another")))))),!C&&!("owner"===Q.role.name||"admin"===Q.role.name)&&o.a.createElement(u.a,null,o.a.createElement("div",null,Z.availableToAdmin)),(C||"owner"===Q.role.name||"admin"===Q.role.name)&&o.a.createElement(m.a,null,o.a.createElement(p.a,{color:"primary",onClick:function(){(function(){for(var e=!0,t={},a={},n=0;n<R.length;n++)k?""===R[n].first_name&&""===R[n].last_name&&""===R[n].email||("undefined"===typeof t[n]&&(t[n]={},a[n]={}),""===R[n].first_name?(t[n].first_name=!1,a[n].first_name="First name is required.",e=!1):t[n].first_name=!0,""===R[n].last_name?(t[n].last_name=!1,a[n].last_name="Last name is required.",e=!1):t[n].last_name=!0,""===R[n].email?(t[n].email=!1,a[n].email="Email is required.",e=!1):_.a.test(R[n].email)?t[n].email=!0:(t[n].email=!1,a[n].email="Email is invalid format.",e=!1)):""===R[n].name&&""===R[n].email||("undefined"===typeof t[n]&&(t[n]={},a[n]={}),""===R[n].name?(t[n].name=!1,a[n].name="Name is required.",e=!1):t[n].name=!0,""===R[n].email?(t[n].email=!1,a[n].email="Email is required.",e=!1):_.a.test(R[n].email)?t[n].email=!0:(t[n].email=!1,a[n].email="Email is invalid format.",e=!1));return F({valid:t,message:a}),e})()&&!V&&(Y(!0),g(k?R.filter((function(e,t){return""!==e.first_name&&""!==e.last_name&&""!==e.email})):R.filter((function(e,t){return""!==e.name&&""!==e.email})),(function(){Y(!1)}),{closeModal:ae,deleteItemByIndex:te,invitationItems:R}))}},V&&o.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),n)," ",o.a.createElement(p.a,{outline:!0,color:"secondary",onClick:ae},v)),!C&&!("owner"===Q.role.name||"admin"===Q.role.name)&&o.a.createElement(m.a,null,o.a.createElement(p.a,{outline:!0,color:"secondary",onClick:ae},Z.closeButton)))}))},647:function(e,t,a){"use strict";a.r(t);var n,r=a(11),i=a(8),l=a(1),c=a(2),o=a(0),s=a.n(o),d=a(5),u=a(629),m=a(736),p=a(728),f=a(658),b=a(3),O=a(15),E=a(27),h=a(7),_=a(663),j=Object(b.a)(u.a)(n||(n=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 20px 0;\n\n  > .form-control:not(:first-child) {\n    border-radius: 5px;\n  }\n\n  label {\n    white-space: nowrap;\n    margin: 0 20px 0 0;\n    min-width: 125px;\n  }\n\n  .form-group {\n    width: calc(100% - 145px);\n  }\n\n  button {\n    margin-left: auto;\n  }\n  .react-select-container {\n    width: 100%;\n  }\n  .react-select__multi-value__label {\n    align-self: center;\n  }\n  &.action-wrapper {\n    margin-top: 40px;\n\n    .action-archive-wrapper {\n      display: flex;\n      width: 100%;\n\n      .btn-archive {\n        display: flex;\n        margin-left: auto;\n        text-decoration: underline;\n        color: #a7abc3;\n      }\n    }\n  }\n"])));t.default=s.a.memo((function(e){var t=e.data,a=t.type,n=t.mode,c=t.item,u=void 0===c?null:c,b=t.actions,v=Object(h.p)(),g=Object(h.cb)()._t,y={linkCreateTitle:g("SHORTCUT.LINK_CREATE_TITLE","Add shortcut"),linkUpdateTitle:g("SHORTCUT.LINK_UPDATE_TITLE","Update shortcut"),linkRemoveTitle:g("SHORTCUT.LINK_REMOVE_TITLE","Remove shortcut"),createLink:g("SHORTCUT.CREATE_LINK","Add"),updateLink:g("SHORTCUT.UPDATE_LINK","Update"),removeLink:g("SHORTCUT.REMOVE_LINK","Remove"),name:g("SHORTCUT.NAME","Name"),webAddress:g("SHORTCUT.WEB_ADDRESS","Web address"),remove:g("SHORTCUT.REMOVE","Remove"),cancel:g("SHORTCUT.CANCEL","Cancel")};u&&(y=Object(l.a)(Object(l.a)({},y),{},{removeLinkBodyText:g("SHORTCUT.REMOVE_LINK_BODY_TEXT","Are you sure to remove ::name::?",{name:'<a href="'.concat(u.web_address,'" target="_blank">').concat(u.name,"</a>")})}));var k=Object(o.useRef)(),x=Object(d.c)(),w=Object(o.useState)(!0),T=Object(i.a)(w,2),C=T[0],N=T[1],S=Object(o.useState)({name:"",web_address:""}),R=Object(i.a)(S,2),A=R[0],I=R[1],D=Object(o.useState)(!1),L=Object(i.a)(D,2),F=L[0],P=L[1],U=Object(o.useState)({valid:{},message:{}}),M=Object(i.a)(U,2),W=M[0],H=M[1],K=function(e){e.persist(),I((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))})),H((function(t){return Object(l.a)(Object(l.a)({},t),{},{valid:Object(l.a)(Object(l.a)({},t.valid),{},Object(r.a)({},e.target.name,void 0)),message:Object(l.a)(Object(l.a)({},t.message),{},Object(r.a)({},e.target.name,void 0))})}))},B=function(){N(!C),x(Object(O.d)({type:a}))};Object(o.useEffect)((function(){"edit"===n&&I(Object(l.a)(Object(l.a)({},A),{},{name:u.name,web_address:u.web_address,index:u.index}))}),[]);return s.a.createElement(m.a,{isOpen:C,toggle:B,size:"lg",onOpened:function(){k&&k.current&&k.current.focus()},centered:!0},s.a.createElement(_.a,{toggle:B,className:"workspace-folder-header"},"edit"===n?y.linkUpdateTitle:y.linkCreateTitle),s.a.createElement(p.a,null,s.a.createElement(j,null,s.a.createElement("div",null,s.a.createElement(f.a,{for:"folder"},y.webAddress)),s.a.createElement(E.e,{name:"web_address",defaultValue:A.web_address,placeholder:"e.g. ".concat(v.getBaseUrl()),onChange:K,isValid:W.valid.web_address,feedback:W.message.web_address})),s.a.createElement(j,null,s.a.createElement("div",null,s.a.createElement(f.a,{for:"folder"},y.name)),s.a.createElement(E.e,{name:"name",defaultValue:A.name,placeholder:"e.g. ".concat(v.getName()," Driff website"),onChange:K,isValid:W.valid.name,feedback:W.message.name})),s.a.createElement(j,{className:"action-wrapper",style:{marginTop:"40px"}},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(function(){var e={},t={};return""===A.name?(e.name=!1,t.name="Name is required."):e.name=!0,""===A.web_address?(e.web_address=!1,t.web_address="Link is required."):e.web_address=!0,H({valid:e,message:t}),!Object.values(e).some((function(e){return!1===e}))}()&&!F)switch(P(!0),n){case"create":b.create(A,(function(){P(!1),B()}));break;case"edit":b.update(A,(function(){P(!1),B()}))}}},F&&s.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"edit"===n?y.updateLink:y.createLink),"edit"===n&&s.a.createElement("div",{className:"action-archive-wrapper"},s.a.createElement("span",{onClick:function(){b.delete(A,{dictionary:y,callback:function(){B()}})},className:"btn-archive text-link mt-2 cursor-pointer"},y.removeLink)))))}))},648:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(8),i=a(2),l=a(0),c=a.n(l),o=a(5),s=a(82),d=a(736),u=a(728),m=a(729),p=a(3),f=a(15),b=a(7),O=a(663),E=a(52);function h(){var e=Object(i.a)([""]);return h=function(){return e},e}var _=Object(p.a)(d.a)(h());t.default=c.a.memo((function(e){var t=e.data,a=t.className,i=void 0===a?"":a,d=t.type,p=t.file,h=t.folder_id,j=t.dictionary,v=t.actions,g=Object(b.j)().folders,y=Object(o.c)(),k=Object(l.useState)(null),x=Object(r.a)(k,2),w=x[0],T=x[1],C=Object(l.useState)(!1),N=Object(r.a)(C,2),S=N[0],R=N[1],A=function(){y(Object(f.d)({type:d}))},I=Object.values(g).filter((function(e){return"undefined"===typeof e.payload&&((!h||e.id!==h)&&!e.is_archived)})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{id:e.id,label:e.search})})),D=Object(b.S)().generalSettings.dark_mode;return c.a.createElement(_,{isOpen:!0,toggle:A,centered:!0,className:"single-input-modal ".concat(i)},c.a.createElement(O.a,{toggle:A},j.headerText),c.a.createElement(u.a,null,c.a.createElement("div",null,j.bodyText),c.a.createElement(s.a,{styles:"0"===D?E.b:E.a,options:I,onChange:function(e){T(e)}})),c.a.createElement(m.a,null,c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){S||null===w||(R(!0),v.onSubmit({name:p.search,file_id:p.id,folder_id:w.id},(function(){R(!1),A()}),{selectedFolder:w.label}))}},S&&c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),j.submitText),c.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){A()}},j.cancelText)))}))},649:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s,d=a(69),u=a.n(d),m=a(93),p=a(12),f=a(11),b=a(1),O=a(8),E=a(2),h=a(0),_=a.n(h),j=a(667),v=a.n(j),g=a(5),y=a(736),k=a(728),x=a(629),w=a(729),T=a(709),C=a(3),N=a(15),S=a(137),R=a(7),A=a(663),I=a(27),D=a(98),L=a.n(D),F=a(6),P=a(97),U=a(44),M=Object(C.a)(y.a)(n||(n=Object(E.a)(["\n  .invalid-feedback {\n    display: block;\n  }\n  .modal-body {\n    padding-bottom: 0 !important;\n  }\n  .file-attachments-container {\n    display: inline-flex;\n  }\n"]))),W=C.a.div(r||(r=Object(E.a)(["\n  display: flex;\n  width: 100%;\n  flex-flow: column;\n  > div {\n    margin-bottom: 10px;\n  }\n"]))),H=Object(C.a)(I.f)(i||(i=Object(E.a)(["\n  display: block;\n"]))),K=C.a.div(l||(l=Object(E.a)(["\n  z-index: 3;\n"]))),B=C.a.div(c||(c=Object(E.a)(["\n  z-index: 2;\n"]))),q=C.a.div(o||(o=Object(E.a)(["\n  z-index: 1;\n"]))),V=Object(C.a)(I.c)(s||(s=Object(E.a)(["\n  .description-input {\n    height: ","px;\n    max-height: 400px;\n  }\n\n  label {\n    min-width: 100%;\n    font-weight: 500;\n  }\n"])),(function(e){return e.height>80?e.height:80}));t.default=_.a.memo((function(e){var t=e.data,a=t.type,n=t.item,r=t.parentItem,i=void 0===r?null:r,l=t.itemType,c=void 0===l?null:l,o=t.actions,s=t.params,d=t.mode,E=void 0===d?"create":d,j=Object(R.S)().generalSettings,y=j.date_picker_format,C=j.time_picker_format,D=j.language,Y=Object(R.cb)()._t,z=Object(g.c)(),G=Object(R.X)(),X=Object(R.ib)(),Q=Object(g.d)((function(e){return e.session.user})),Z=Object(g.d)((function(e){return e.users.users})),J=Object(g.d)((function(e){return e.workspaces.workspaces})),$=Object(g.d)((function(e){return e.workspaces.workspacesLoaded})),ee=Object(h.useState)(0),te=Object(O.a)(ee,2),ae=te[0],ne=te[1],re=Object(h.useState)(!1),ie=Object(O.a)(re,2),le=ie[0],ce=ie[1],oe=Object(h.useState)({title:{value:"POST"===c?n.title:i?i.title:""},description:{value:n&&n.body?n.body:""},set_time:{value:"1h"},topic_id:{value:null},assigned_to:{value:null}}),se=Object(O.a)(oe,2),de=se[0],ue=se[1],me=n&&n.remind_at&&Math.round(+new Date/1e3)>n.remind_at.timestamp?L.a.unix(n.remind_at.timestamp).toDate():L()().add(1,"m").toDate(),pe=Object(h.useState)(n&&n.remind_at?"pick_data":""),fe=Object(O.a)(pe,2),be=fe[0],Oe=fe[1],Ee=Object(h.useState)(n&&n.remind_at?L.a.unix(n.remind_at.timestamp).toDate():L()().add(20,"m").toDate()),he=Object(O.a)(Ee,2),_e=he[0],je=he[1],ve=Object(h.useState)(!(!n||!n.remind_at)||null),ge=Object(O.a)(ve,2),ye=ge[0],ke=ge[1],xe=Object(h.useState)(!0),we=Object(O.a)(xe,2),Te=we[0],Ce=we[1],Ne=Object(h.useState)(!1),Se=Object(O.a)(Ne,2),Re=Se[0],Ae=Se[1],Ie=Object(h.useState)([]),De=Object(O.a)(Ie,2),Le=De[0],Fe=De[1],Pe=Object(h.useState)(null),Ue=Object(O.a)(Pe,2),Me=Ue[0],We=Ue[1],He=Object(h.useState)([]),Ke=Object(O.a)(He,2),Be=Ke[0],qe=Ke[1],Ve=Object(h.useState)(null),Ye=Object(O.a)(Ve,2),ze=Ye[0],Ge=Ye[1],Xe=Object(h.useState)(""),Qe=Object(O.a)(Xe,2),Ze=Qe[0],Je=Qe[1],$e=Object(h.useState)(!1),et=Object(O.a)($e,2),tt=et[0],at=et[1],nt=Object(h.useState)([]),rt=Object(O.a)(nt,2),it=rt[0],lt=rt[1],ct=Object(h.useState)([]),ot=Object(O.a)(ct,2),st=ot[0],dt=ot[1],ut=Object(h.useState)([]),mt=Object(O.a)(ut,2),pt=mt[0],ft=mt[1],bt=Object(h.useState)(!1),Ot=Object(O.a)(bt,2),Et=Ot[0],ht=Ot[1],_t=Object(h.useState)([]),jt=Object(O.a)(_t,2),vt=jt[0],gt=jt[1],yt=Object(h.useState)(null),kt=Object(O.a)(yt,2),xt=kt[0],wt=kt[1],Tt=Object(h.useRef)(null),Ct=Object(h.useRef)(0),Nt=function(){qe(Object.values(Z).map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})})))};Object(h.useEffect)((function(){if($&&tt){if(!c&&s&&J[s.workspaceId]){var e=Object(b.a)({},J[s.workspaceId]);We(Object(b.a)(Object(b.a)({},e),{},{icon:"compass",value:e.id,label:e.name})),ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:e.id}})),qe(e.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})})))}if(c&&i&&"CHAT"===c&&"TOPIC"===i.type&&J[i.entity_id]){var t=Object(b.a)({},J[i.entity_id]);We(Object(b.a)(Object(b.a)({},t),{},{icon:"compass",value:t.id,label:t.name})),ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:t.id}})),qe(t.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})})))}if(c&&"POST"===c&&"create"===E){var a=n.recipients.find((function(e){return"TOPIC"===e.type}));if(a){var r=Object(b.a)({},J[a.id]);We(Object(b.a)(Object(b.a)({},r),{},{icon:"compass",value:r.id,label:r.name})),ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:r.id}})),qe(r.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})})))}}if(c&&"POST_COMMENT"===c&&i&&"create"===E){var l=i.recipients.find((function(e){return"TOPIC"===e.type}));if(l){var o=Object(b.a)({},J[l.id]);We(Object(b.a)(Object(b.a)({},o),{},{icon:"compass",value:o.id,label:o.name})),ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:o.id}})),qe(o.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})})))}}Fe(Object.values(J).map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"compass",value:e.id,label:e.name})})))}}),[tt,$,s]),Object(h.useEffect)((function(){if("edit"===E&&n&&n.workspace&&J[n.workspace.id]){var e=Object(b.a)({},J[n.workspace.id]);We(Object(b.a)(Object(b.a)({},e),{},{icon:"compass",value:e.id,label:e.name})),qe(e.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})}))),ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:e.id},assigned_to:{value:n.assigned_to?n.assigned_to.id:null}})),n.assigned_to&&Ge(Object(b.a)(Object(b.a)({},n.assigned_to),{},{icon:"user-avatar",value:n.assigned_to.id,label:n.assigned_to.name?n.assigned_to.name:n.assigned_to.email,type:"USER"}))}else"edit"===E&&n&&!n.workspace?(ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:null},assigned_to:{value:n.assigned_to?n.assigned_to.id:null}})),n.assigned_to&&Ge(Object(b.a)(Object(b.a)({},n.assigned_to),{},{icon:"user-avatar",value:n.assigned_to.id,label:n.assigned_to.name?n.assigned_to.name:n.assigned_to.email,type:"USER"})),Nt()):Nt();"edit"===E&&n&&n.files.length&&dt(n.files.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.file_id})}))),at(!0)}),[]);var St={title:Object(h.useRef)(null),dropzone:Object(h.useRef)(null)},Rt={author:Y("REMINDER.AUTHOR","Author"),title:Y("REMINDER.TITLE","Title"),description:Y("REMINDER.DESCRIPTION","Description"),remindMeOn:Y("REMINDER.REMIND_ME_ON","Remind me in"),message:Y("REMINDER.MESSAGE","Message"),oneHour:Y("REMINDER.ONE_HOUR","1 hour"),threeHours:Y("REMINDER.THREE_HOURS","3 hours"),tomorrow:Y("REMINDER.TOMORROW","Tomorrow"),pickDateTime:Y("REMINDER.PICK_DATE_TIME","Pick date and time"),cancel:Y("REMINDER.CANCEL","Cancel"),feedbackReminderDateFuture:Y("FEEDBACK.REMINDER_DATE_MUST_BE_FUTURE","Reminder date must be in the future."),feedbackReminderDateOverdue:Y("FEEDBACK.REMINDER_DATE_OVERDUE","Note: Reminder date is overdue."),reminderInfo:Y("REMINDER.INFO","Reminders help to organize your thoughts and guide you through your day."),snooze:Y("REMINDER.REMIND","Remind"),workspaceLabel:Y("LABEL.WORKSPACE","Workspace"),assignedToLabel:Y("LABEL.ASSIGN_TO","Assign to"),fileAttachments:Y("POST.FILE_ATTACHMENTS","File attachments"),uploadingAndSending:Y("TOASTER.CREATING_TODO_WITH_FILE","Uploading file and creating reminder"),unsuccessful:Y("FILE_UNSUCCESSFULL","Upload File Unsuccessful")};Rt.chatReminder="edit"===E?Y("TODO.EDIT","Edit todo"):Y("TODO.NEW","New todo");var At=function(){Ce(!Te),z(Object(N.d)({type:a}))},It=function(e){var t=e.currentTarget,a=t.name,n=t.value;ue((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(f.a)({},a,Object(b.a)(Object(b.a)({},e[a]),{},{value:n})))}))},Dt=function(e,t,a,n){(""!==n.getText(e).trim()||vt.length>0)&&ue((function(t){return Object(b.a)(Object(b.a)({},t),{},{description:Object(b.a)(Object(b.a)({},t.description),{},{value:e})})}))},Lt=function(e,t){ke(!1),Oe(be===t?"":t)},Ft=function(e){e&&!Re&&(St.title.current=e,setTimeout((function(){St.title.current.focus(),Ae(!0)}),500))},Pt=function(e){We(e),e?(ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:e.id},assigned_to:{value:ze&&e.member_ids.some((function(e){return ze.id!==e}))?null:de.assigned_to.value}})),qe(e.members.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})}))),ze&&e.member_ids.some((function(e){return ze.id!==e}))&&Ge(null)):(ue(Object(b.a)(Object(b.a)({},de),{},{topic_id:{value:null},assigned_to:{value:null}})),Nt(),Ge(null))},Ut=function(e){Ge(e),ue(e?Object(b.a)(Object(b.a)({},de),{},{assigned_to:{value:e.id}}):Object(b.a)(Object(b.a)({},de),{},{assigned_to:{value:null}}))},Mt=function(e){Je(e)},Wt=function(){St.dropzone.current&&St.dropzone.current.open()},Ht=function(){ht(!1)},Kt=function(e){st.some((function(t){return t.id===parseInt(e)}))&&ft([].concat(Object(p.a)(st.filter((function(t){return t.id===parseInt(e)}))),Object(p.a)(pt))),dt((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))})),lt((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))}))},Bt=function(e){var t=e.loaded/e.total;null===Tt.current?Tt.current=G.info(_.a.createElement("div",null,Rt.uploadingAndSending,"."),{progress:Ct.current,autoClose:!0}):G.update(Tt.current,{progress:t,autoClose:!0})},qt=function(){setTimeout((function(){Tt.curent&&G.dismiss(Tt.current)}),500)},Vt=function(){null!==Tt.curent&&(ce(!1),qt(),G.error(_.a.createElement("div",null,Rt.unsuccessful,".")),Tt.current=null)};function Yt(){return(Yt=Object(m.a)(u.a.mark((function e(t){var a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:"create",a=new FormData,n={user_id:Q.id,file_type:"private",folder_id:null,fileOption:null,options:{config:{onUploadProgress:Bt}}},it.map((function(e,t){return a.append("files[".concat(t,"]"),e.bodyFormData.get("file"))})),n.files=a,e.next=7,new Promise((function(e,t){return e(Object(U.C)(n))})).then((function(e){t=Object(b.a)(Object(b.a)({},t),{},{file_ids:[].concat(Object(p.a)(e.data.map((function(e){return e.id}))),Object(p.a)(t.file_ids))}),o.onSubmit(t,qt)})).catch((function(e){Vt()}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return _.a.createElement(M,{isOpen:Te,toggle:At,size:"lg",className:"todo-reminder-modal",centered:!0},_.a.createElement(A.a,{toggle:At},Rt.chatReminder),_.a.createElement(k.a,{"data-set-update":ae,onDragOver:function(){Et||ht(!0)}},_.a.createElement(P.a,{hide:!Et,ref:St.dropzone,onDragLeave:Ht,onDrop:function(e){!function(e){var t=[];e.forEach((function(e){var a=new FormData;a.append("file",e);var n=Math.floor(Date.now());"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/webp"===e.type?t.push({rawFile:e,bodyFormData:a,type:"IMAGE",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:Q}):"video/mp4"===e.type?t.push({rawFile:e,bodyFormData:a,type:"VIDEO",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:Q}):t.push({rawFile:e,bodyFormData:a,type:"DOC",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:Q})})),lt((function(e){return[].concat(Object(p.a)(e),t)})),Ht()}(e.acceptedFiles)},onCancel:Ht,attachedFiles:it}),null===c&&_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"column"},_.a.createElement("div",{className:"col-12 modal-info"},Rt.reminderInfo),_.a.createElement("div",{className:"col-12 modal-label"},Rt.title),_.a.createElement("div",{className:"col-12"},_.a.createElement(I.e,{innerRef:Ft,name:"title",defaultValue:de.title.value,placeholder:Rt.title,onChange:It,isValid:de.title.valid,feedback:de.title.feedback,autoFocus:!0})),_.a.createElement("div",{className:"col-12"},_.a.createElement(V,{className:"modal-description",height:X.height-660,defaultValue:de.description.value,showFileButton:!0,onChange:Dt,onOpenFileDialog:Wt,disableBodyMention:!0,modal:"reminders",mentionedUserIds:[],setInlineImages:gt,setImageLoading:wt})),(it.length>0||st.length>0)&&_.a.createElement("div",{className:"col-12"},_.a.createElement("div",null,_.a.createElement("label",{className:"modal-label",for:"workspace"},Rt.fileAttachments)),_.a.createElement("div",{className:"file-attachments-container"},_.a.createElement(F.h,{attachedFiles:[].concat(Object(p.a)(it),Object(p.a)(st)),handleRemoveFile:Kt})))),_.a.createElement("div",{className:"column clearfix"},_.a.createElement("div",{className:"col-lg-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.workspaceLabel),_.a.createElement(K,{className:"mb-2"},_.a.createElement(I.d,{options:Le,value:Me,onChange:Pt,isMulti:!1,isClearable:!0}))),_.a.createElement("div",{className:"col-lg-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.assignedToLabel),_.a.createElement(B,{className:"mb-2"},_.a.createElement(I.h,{options:Be,value:ze,inputValue:Ze,onChange:Ut,onInputChange:Mt,isMulti:!1,isClearable:!0,isSearchable:!0}))))),"POST"===c&&_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"column"},_.a.createElement("div",{className:"col-12 modal-info"},Rt.reminderInfo),_.a.createElement("div",{className:"col-12 modal-label"},Rt.author),_.a.createElement("div",{className:"col-12 mb-3"},n.author.name),_.a.createElement("div",{className:"col-12 modal-label"},Rt.title),_.a.createElement("div",{className:"col-12"},_.a.createElement(I.e,{innerRef:Ft,name:"title",defaultValue:de.title.value,placeholder:Rt.title,onChange:It,isValid:de.title.valid,feedback:de.title.feedback,autoFocus:!0})),_.a.createElement("div",{className:"col-12"},_.a.createElement(V,{className:"modal-description",height:X.height-660,defaultValue:de.description.value,showFileButton:!0,onChange:Dt,onOpenFileDialog:Wt,disableBodyMention:!0,modal:"reminders",mentionedUserIds:[],setInlineImages:gt,setImageLoading:wt})),(it.length>0||st.length>0)&&_.a.createElement("div",{className:"col-12"},_.a.createElement("div",null,_.a.createElement("label",{className:"modal-label",for:"workspace"},Rt.fileAttachments)),_.a.createElement("div",{className:"file-attachments-container"},_.a.createElement(F.h,{attachedFiles:[].concat(Object(p.a)(it),Object(p.a)(st)),handleRemoveFile:Kt}))),_.a.createElement("div",{className:"column clearfix"},_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.workspaceLabel),_.a.createElement(K,{className:" mb-2"},_.a.createElement(I.d,{options:Le,value:Me,onChange:Pt,isMulti:!1,isClearable:!0}))),_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.assignedToLabel),_.a.createElement(B,{className:"mb-2"},_.a.createElement(I.h,{options:Be,value:ze,inputValue:Ze,onChange:Ut,onInputChange:Mt,isMulti:!1,isClearable:!0,isSearchable:!0})))))),"CHAT"===c&&_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"column"},_.a.createElement("div",{className:"col-12 modal-info"},Rt.reminderInfo),_.a.createElement("div",{className:"col-12 modal-label"},Rt.author),_.a.createElement("div",{className:"col-12 mb-3"},n.user?n.user.name:"System"),_.a.createElement("div",{className:"col-12 modal-label"},Rt.title),_.a.createElement("div",{className:"col-12"},_.a.createElement(I.e,{innerRef:Ft,name:"title",defaultValue:de.title.value,placeholder:Rt.title,onChange:It,isValid:de.title.valid,feedback:de.title.feedback,autoFocus:!0})),_.a.createElement("div",{className:"col-12"},_.a.createElement(V,{className:"modal-description",height:X.height-660,defaultValue:de.description.value,showFileButton:!0,onChange:Dt,onOpenFileDialog:Wt,disableBodyMention:!0,modal:"reminders",mentionedUserIds:[],setInlineImages:gt,setImageLoading:wt})),(it.length>0||st.length>0)&&_.a.createElement("div",{className:"col-12"},_.a.createElement("div",null,_.a.createElement("label",{className:"modal-label",for:"workspace"},Rt.fileAttachments)),_.a.createElement("div",{className:"file-attachments-container"},_.a.createElement(F.h,{attachedFiles:[].concat(Object(p.a)(it),Object(p.a)(st)),handleRemoveFile:Kt})))),_.a.createElement("div",{className:"column clearfix"},_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.workspaceLabel),_.a.createElement(K,{className:"mb-2"},_.a.createElement(I.d,{options:Le,value:Me,onChange:Pt,isMulti:!1,isClearable:!0}))),_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.assignedToLabel),_.a.createElement(B,{className:"mb-2"},_.a.createElement(I.h,{options:Be,value:ze,inputValue:Ze,onChange:Ut,onInputChange:Mt,isMulti:!1,isClearable:!0,isSearchable:!0}))))),"POST_COMMENT"===c&&_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"column"},_.a.createElement("div",{className:"col-12 modal-info"},Rt.reminderInfo),_.a.createElement("div",{className:"col-12 modal-label"},Rt.author),_.a.createElement("div",{className:"col-12 mb-3"},n.author.name),_.a.createElement("div",{className:"col-12 modal-label"},Rt.title),_.a.createElement("div",{className:"col-12"},_.a.createElement(I.e,{innerRef:Ft,name:"title",defaultValue:de.title.value,placeholder:Rt.title,onChange:It,isValid:de.title.valid,feedback:de.title.feedback,autoFocus:!0})),_.a.createElement("div",{className:"col-12"},_.a.createElement(V,{className:"modal-description",height:X.height-660,defaultValue:de.description.value,showFileButton:!0,onChange:Dt,onOpenFileDialog:Wt,disableBodyMention:!0,modal:"reminders",mentionedUserIds:[],setInlineImages:gt,setImageLoading:wt})),(it.length>0||st.length>0)&&_.a.createElement("div",{className:"col-12"},_.a.createElement("div",null,_.a.createElement("label",{className:"modal-label",for:"workspace"},Rt.fileAttachments)),_.a.createElement("div",{className:"file-attachments-container"},_.a.createElement(F.h,{attachedFiles:[].concat(Object(p.a)(it),Object(p.a)(st)),handleRemoveFile:Kt})))),_.a.createElement("div",{className:"column clearfix"},_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.workspaceLabel),_.a.createElement(K,{className:"mb-2"},_.a.createElement(I.d,{options:Le,value:Me,onChange:Pt,isMulti:!1,isClearable:!0}))),_.a.createElement("div",{className:"col-6 float-left"},_.a.createElement("div",{className:"modal-label"},Rt.assignedToLabel),_.a.createElement(B,{className:"mb-2"},_.a.createElement(I.h,{options:Be,value:ze,inputValue:Ze,onChange:Ut,onInputChange:Mt,isMulti:!1,isClearable:!0,isSearchable:!0}))))),_.a.createElement(q,{className:"column mt-2"},_.a.createElement("div",{className:"col-12 col-lg-4 modal-label mb-1"},Rt.remindMeOn),_.a.createElement("div",{className:"col-12 mb-3"},_.a.createElement(W,null,_.a.createElement(S.a,{readOnly:!0,onClick:function(e){Lt(0,"1h")},checked:"1h"===be,value:"1h",name:"role"},Rt.oneHour),_.a.createElement(S.a,{readOnly:!0,onClick:function(e){Lt(0,"3h")},checked:"3h"===be,value:"3h",name:"role"},Rt.threeHours),_.a.createElement(S.a,{readOnly:!0,onClick:function(e){Lt(0,"tomorrow")},checked:"tomorrow"===be,value:"tomorrow",name:"role"},Rt.tomorrow),_.a.createElement(S.a,{readOnly:!0,onClick:function(){Oe("pick_data"),ke(!0)},checked:"pick_data"===be,value:"pick_data",name:"role"},Rt.pickDateTime),ye&&_.a.createElement(x.a,null,_.a.createElement(v.a,{minDate:me,onChange:function(e){je(e)},value:_e,locale:D,format:"".concat(y," ").concat(C),disableClock:!0}),_.a.createElement(H,{valid:de.set_time.valid},de.set_time.feedback)))))),_.a.createElement(w.a,null,_.a.createElement(T.a,{outline:!0,color:"secondary",onClick:At},Rt.cancel),_.a.createElement(T.a,{color:"primary",onClick:function(){if(!le&&function(){var e=Object(b.a)({},de);if(""===de.title.value.trim()?(e.title.valid=!1,e.title.feedback="Title is required."):(e.title.value=de.title.value.trim(),e.title.valid=!0,e.title.feedback=null),"pick_data"===be){var t=new Date,a=new Date(_e);if(a>t){var n=L.a.utc(a).format("YYYY-MM-DD HH:mm:ss");e.set_time.value=n.slice(0,-2)+"00",e.set_time.valid=!0,e.set_time.feedback=null}else if(_e.getTime()===a.getTime()){var r=L.a.utc(a).format("YYYY-MM-DD HH:mm:ss");e.set_time.value=r.slice(0,-2)+"00",e.set_time.valid=!0,e.set_time.feedback=Rt.feedbackReminderDateOverdue}else e.set_time.valid=!1,e.set_time.feedback=Rt.feedbackReminderDateFuture}else e.set_time.value=be,e.set_time.valid=!0;return ue(e),ne((function(e){return e?0:1})),!Object.keys(e).map((function(t){return e[t].valid})).some((function(e){return!1===e}))}()&&!xt){ce(!0);var e={};Object.keys(de).forEach((function(t){"set_time"===t?""!==de[t].value&&(e[t]=de[t].value):de[t].value&&(e[t]=de[t].value)})),e=Object(b.a)(Object(b.a)({},e),{},{file_ids:[].concat(Object(p.a)(vt.map((function(e){return e.id}))),Object(p.a)(st.map((function(e){return e.id})))),remove_file_ids:pt.map((function(e){return e.id}))}),it.length>0?(!function(e){Yt.apply(this,arguments)}(e),At()):(o.onSubmit(e,(function(e,t){})),ce(!1),At())}},disabled:xt||""===de.title.value},le&&_.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),Rt.snooze)," "))}))},650:function(e,t,a){"use strict";a.r(t);var n,r,i,l=a(1),c=a(8),o=a(2),s=a(0),d=a.n(s),u=a(5),m=a(736),p=a(728),f=a(729),b=a(709),O=a(3),E=a(15),h=a(7),_=a(663),j=a(27),v=Object(O.a)(m.a)(n||(n=Object(o.a)(["\n  .modal-footer {\n    justify-content: space-between;\n  }\n  .margin-left-auto {\n    margin-left: auto;\n  }\n"]))),g=Object(O.a)(j.i)(r||(r=Object(o.a)(["\n  width: 100%;\n  min-height: 300px;\n  max-height: 600px;\n  border-radius: 6px;\n  border: 1px solid #e1e1e1;\n\n  &.description-input {\n    overflow: auto;\n    overflow-x: hidden;\n    position: static;\n    width: 100%;\n  }\n  .ql-toolbar {\n    position: absolute;\n    bottom: -25px;\n    padding: 0;\n    border: none;\n    .ql-formats {\n      margin-right: 10px;\n    }\n  }\n  .ql-container {\n    border: none;\n    max-height: inherit;\n  }\n  .ql-editor {\n    padding: 5px;\n    max-height: inherit;\n  }\n"]))),y=O.a.div(i||(i=Object(o.a)(["\n  text-align: right;\n"])));t.default=d.a.memo((function(e){var t=e.data,a=t.type,n=t.item,r=Object(u.c)(),i=Object(s.useState)(!0),o=Object(c.a)(i,2),O=o[0],k=o[1],x=Object(s.useState)({title:"",description:"",textOnly:"",major_release:!1}),w=Object(c.a)(x,2),T=w[0],C=w[1],N=Object(s.useState)(!1),S=Object(c.a)(N,2),R=S[0],A=(S[1],Object(s.useState)(!1)),I=Object(c.a)(A,2),D=I[0],L=I[1],F=Object(s.useState)(!1),P=Object(c.a)(F,2),U=P[0],M=P[1],W=Object(s.useState)(!1),H=Object(c.a)(W,2),K=H[0],B=H[1],q=function(){n?!n.draft_id||n.body===T.description&&n.action_text===T.title?(k(!O),r(Object(E.d)({type:a}))):B(!0):""!==T.title&&""!==T.description?B(!0):(k(!O),r(Object(E.d)({type:a})))},V=function(){B(!K),M(!1)},Y=function(){L(!D),M(!1)},z=function(e){L(!D),M(!0),k(!O),e&&X(),r(Object(E.d)({type:a}))};Object(s.useEffect)((function(){n&&C({title:n.action_text,description:n.body,textOnly:n.body,major_release:n.major_release})}),[]);var G=function(){r(Object(E.g)({type:"release",draft_id:n.draft_id},(function(e,t){e||r(Object(E.C)({id:n.draft_id}))})))},X=function(){n&&n.draft_id?G():r(Object(E.j)({id:n.id})),q()},Q=function(){n&&n.draft_id?r(Object(E.cb)(Object(l.a)(Object(l.a)({type:"release",draft_id:n.draft_id},T),{},{action_text:T.title,body:T.description}),(function(e,t){}))):r(Object(E.Q)(Object(l.a)(Object(l.a)({},T),{},{action_text:T.title,body:T.description,type:"release"}))),k(!O),r(Object(E.d)({type:a}))},Z=Object(s.useRef)(null),J=Object(h.M)({mode:"description",mentionOrientation:"top",quillRef:Z,disableMention:!0}).modules;return d.a.createElement(v,{isOpen:O,toggle:q,size:"lg",className:"todo-reminder-modal",centered:!0},d.a.createElement(_.a,{toggle:q},"Release note"),d.a.createElement(p.a,null,d.a.createElement(m.a,{isOpen:D,toggle:Y,onClosed:U?q:void 0,centered:!0},d.a.createElement(_.a,{toggle:Y},"Delete log"),d.a.createElement(p.a,null,"Are you sure you want to delete this release log?"),d.a.createElement(f.a,null,d.a.createElement(b.a,{className:"btn-outline-secondary",onClick:function(){return z(!1)}},"Cancel"),d.a.createElement(b.a,{color:"primary",onClick:function(){return z(!0)}},"Delete"))),d.a.createElement(m.a,{isOpen:K,toggle:V,onClosed:U?q:void 0,centered:!0},d.a.createElement(_.a,{toggle:V},"Save as draft"),d.a.createElement(p.a,null,"Save entry as draft?"),d.a.createElement(f.a,null,d.a.createElement(b.a,{className:"btn-outline-secondary",onClick:function(){return z(!1)}},"Cancel"),d.a.createElement(b.a,{color:"primary",onClick:Q},"Save"))),d.a.createElement("div",{className:"col-12 modal-label"},"Title"),d.a.createElement("div",{className:"col-12"},d.a.createElement(j.e,{name:"title",defaultValue:T.title,placeholder:"title",onChange:function(e){var t=e.currentTarget.value;C((function(e){return Object(l.a)(Object(l.a)({},e),{},{title:t})}))},autoFocus:!0})),d.a.createElement("div",{className:"col-12 modal-label"},"Description"),d.a.createElement("div",{className:"col-12"},d.a.createElement(g,{ref:Z,onChange:function(e,t,a,n){var r=n.getText(e);""!==r.trim()&&C((function(t){return Object(l.a)(Object(l.a)({},t),{},{description:e,textOnly:r})}))},modules:J,name:"description",defaultValue:n?n.body:""})),d.a.createElement("br",null),d.a.createElement(y,{className:"col-12"},d.a.createElement(j.a,{name:"must_read",checked:T.major_release,onClick:function(){C(Object(l.a)(Object(l.a)({},T),{},{major_release:!T.major_release}))},type:"danger"},"Major release"))),d.a.createElement(f.a,null,n&&d.a.createElement("div",null,d.a.createElement(b.a,{className:"mr-1",outline:!0,color:"secondary",onClick:Y},"Delete"),n.draft_id&&d.a.createElement(b.a,{outline:!0,color:"secondary",onClick:Q,disabled:""===T.textOnly||""===T.title},"Update draft")),!n&&d.a.createElement("div",null,d.a.createElement(b.a,{outline:!0,color:"secondary",onClick:V,disabled:""===T.textOnly||""===T.title},"Save as draft")),d.a.createElement("div",{className:n?"":"margin-left-auto"},d.a.createElement(b.a,{outline:!0,color:"secondary",onClick:q},"Cancel"),d.a.createElement(b.a,{color:"primary ml-2",onClick:function(){if(n){var e={id:n.id,body:T.description,action_text:T.title,major_release:T.major_release};n.draft_id?(delete e.id,r(Object(E.e)(e,(function(e,t){e||G()})))):r(Object(E.db)(e)),q()}else{var t={body:T.description,action_text:T.title,major_release:T.major_release};r(Object(E.e)(t)),q()}},disabled:""===T.textOnly||""===T.title},R&&d.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),n&&n.draft_id?"Save":n?"Update":"Save")," ")))}))},651:function(e,t,a){"use strict";a.r(t);var n,r,i=a(1),l=a(8),c=a(2),o=a(0),s=a.n(o),d=a(5),u=a(629),m=a(736),p=a(728),f=a(658),b=a(630),O=a(729),E=a(709),h=a(37),_=a(82),j=a(3),v=a(15),g=a(663),y=a(7),k=a(52),x=a(27),w=Object(j.a)(u.a)(n||(n=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n"]))),T=j.a.div(r||(r=Object(c.a)(["\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  transition: background 0.15s ease;\n  svg {\n    transition: none;\n  }\n  &:hover {\n    background: #25282c;\n    svg {\n      color: #ffffff;\n    }\n  }\n"])));t.default=s.a.memo((function(e){var t=e.data,a=t.type,n=t.mode,r=t.item,c=Object(d.c)(),u=Object(y.H)(),j=u.createNewPostList,C=u.updatePostsList,N=u.deletePostsList,S=u.connectPostList,R=u.fetchPostList,A=u.updatePostListConnect,I=Object(d.d)((function(e){return e.posts.postsLists})),D=Object(o.useState)(!1),L=Object(l.a)(D,2),F=L[0],P=L[1],U=Object(o.useState)(!0),M=Object(l.a)(U,2),W=M[0],H=M[1],K=Object(o.useState)({name:"edit"===n?r.post.name:""}),B=Object(l.a)(K,2),q=B[0],V=B[1],Y=Object(o.useState)({post_id:r&&r.post.hasOwnProperty("id")?r.post.id:null,link_id:""}),z=Object(l.a)(Y,2),G=z[0],X=z[1],Q=Object(o.useState)({name:null,link_id:null}),Z=Object(l.a)(Q,2),J=Z[0],$=Z[1],ee=Object(o.useState)({name:"",link_id:""}),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],re=Object(y.S)().generalSettings.dark_mode,ie=Object(y.cb)()._t,le={postListInfo:ie("POST.POST_LIST_INFO","Lists help you to combine post to groups (just for you!) or todo's"),cancel:ie("BUTTON.CANCEL","Cancel"),saveList:ie("BUTTON.SAVE_LIST","Save list"),addPost:ie("BUTTON.ADD_TO_LIST","Add"),update:ie("BUTTON.UPDATE","Update"),newList:ie("POST_LIST.NEW_LIST","New list"),updateList:ie("POST_LIST.UPDATE_LIST","Update list"),addToList:ie("POST_LIST.ADD_TO_LIST","Add to list"),title:ie("LABEL.TITLE","Title"),maxCharacters:ie("FEEDBACK.MAX_CHARACTERS","Max 50 characters"),requiredTitle:ie("FEEDBACK.REQUIRED","Title is required"),requiredPostList:ie("FEEDBACK.REQUIRED_POST_LIST","Please Select Post List"),archiveThisList:ie("POST_LIST.POST_LIST_ARCHIVE","Archive this list")},ce=function(){H(!W),c(Object(v.d)({type:a}))},oe=Object(o.useCallback)((function(){P(!0),N({id:r.post.id},(function(e,t){e||(ce(),R())}))}),[q,r]),se=Object(o.useCallback)((function(){return""===q.name||q.name.length>50?(ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:le.requiredTitle})})),$((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:!1})})),!1):(ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:""})})),void $((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:!0})})))}),[q.name,ne,$]);return s.a.createElement(m.a,{isOpen:W,toggle:ce,size:"lg",className:"chat-forward-modal",centered:!0},s.a.createElement(g.a,{toggle:ce},"add"===n?le.addToList:"edit"===n?le.updateList:le.newList),s.a.createElement(p.a,null,s.a.createElement(w,{className:"modal-input mt-0"},s.a.createElement("div",{className:"w-100"},s.a.createElement(f.a,{className:"modal-info pb-3 pt-3"},le.postListInfo),s.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},s.a.createElement("div",{className:"name-wrapper w-100"},"create"===n||"edit"===n?s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{className:"modal-label",for:"name"},le.title),s.a.createElement(b.a,{name:"name",onFocus:function(){ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:""})})),$((function(e){return Object(i.a)(Object(i.a)({},e),{},{name:!0})}))},onChange:function(e){e.persist(),V((function(t){return Object(i.a)(Object(i.a)({},t),{},{name:e.target.value.trim()})}))},onBlur:function(){se()},valid:J.name,invalid:null!==J.name&&!J.name,placeholder:le.title,defaultValue:"edit"===n?r.post.name:""}),s.a.createElement(x.f,{valid:J.name},ae.name)):s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{className:"react-select-container",styles:"0"===re?k.b:k.a,isMulti:!1,isClearable:!0,components:{Option:function(e){return s.a.createElement(T,null,s.a.createElement(h.f.Option,e,e.data&&s.a.createElement("span",{className:"d-flex justify-content-start align-items-center"},s.a.createElement("div",{className:"select-option"},e.children))))}},options:I.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{label:e.name,value:e.id})})),onChange:function(e){null===e?($((function(e){return Object(i.a)(Object(i.a)({},e),{},{link_id:!1})})),ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{link_id:le.requiredPostList})})),X((function(e){return Object(i.a)(Object(i.a)({},e),{},{link_id:""})}))):($((function(e){return Object(i.a)(Object(i.a)({},e),{},{link_id:!0})})),X((function(t){return Object(i.a)(Object(i.a)({},t),{},{link_id:e.id})})))}}),s.a.createElement(x.f,{valid:J.link_id},ae.link_id)))))),"edit"===n&&s.a.createElement("span",{onClick:oe,className:"btn-archive text-link mt-2 cursor-pointer d-flex flex-row-reverse"},le.archiveThisList)),s.a.createElement(O.a,null,s.a.createElement(E.a,{outline:!0,color:"secondary",onClick:ce},le.cancel),s.a.createElement(E.a,{color:"primary",onClick:function(){if(!F)if("create"===n){if(!J.name)return;P(!0);var e={name:q.name};j(e,(function(e,t){e||(ce(),R())}))}else if("add"===n){if(!J.link_id)return;P(!0);var t=Object(i.a)({},G);S(t,(function(e,t){e||R({},(function(e,a){e||(A(t.data),ce())}))}))}else if("edit"===n){if(!J.name)return;P(!0);var a={name:q.name,id:r.post.id};C(a,(function(e,t){e||(ce(),R())}))}}},F&&s.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"add"===n?le.addPost:"edit"===n?le.update:le.saveList)))}))},652:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s=a(69),d=a.n(s),u=a(93),m=a(12),p=a(1),f=a(8),b=a(2),O=a(98),E=a.n(O),h=a(0),_=a.n(h),j=a(5),v=a(629),g=a(736),y=a(728),k=a(658),x=a(630),w=a(3),T=a(15),C=a(18),N=a(21),S=a(6),R=a(97),A=a(27),I=a(7),D=a(663),L=a(44),F=a(36),P=a(14),U=a(11),M=w.a.div(n||(n=Object(b.a)(["\n  transition: all 0.3s ease !important;\n  width: 100%;\n\n  label {\n    min-width: auto;\n    font-size: 12.6px;\n\n    &:hover {\n      color: #972c86;\n    }\n  }\n"]))),W=w.a.div(r||(r=Object(b.a)(["\n  .react-select-container {\n    width: 300px !important;\n    @media all and (max-width: 480px) {\n      width: 100%;\n    }\n  }\n"]))),H=Object(w.a)(A.d)(i||(i=Object(b.a)([""]))),K=function(e){var t=e.dictionary,n=e.form,r=e.userOptions,i=e.isExternalUser,l=e.shareOption,c=e.setShareOption,o=e.setForm,s=e.user,d=[].concat(Object(m.a)(r.filter((function(e){return e.id!==s.id})).map((function(e){return Object(p.a)(Object(p.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name?e.name:e.email,type:"USER"})}))),[{id:a(71).generate(),value:"all",label:"All users",icon:"users",all_ids:r.filter((function(e){return e.id!==s.id})).map((function(e){return e.id}))}]),u=Object(m.a)(d),f=Object(m.a)(d),b=[{id:"internal",value:"internal",label:t.internalTeamLabel,icon:"eye-off"},{id:"external",value:"external",label:t.internalAndExternalTeamLabel,icon:"eye"}],O=function(e){var t=e.target.dataset.name;switch(t){case"no_reply":o((function(e){var a;return Object(p.a)(Object(p.a)({},e),{},(a={},Object(U.a)(a,t,!e[t]),Object(U.a)(a,"reply_required",!0!==!e[t]&&e.reply_required),a))}));break;case"reply_required":o((function(e){var a;return Object(p.a)(Object(p.a)({},e),{},(a={},Object(U.a)(a,t,!e[t]),Object(U.a)(a,"no_reply",!0!==!e[t]&&e.no_reply),Object(U.a)(a,"mustReplyUsers",0===e.mustReplyUsers.length&&e.selectedAddressTo.length>0?[{id:"all",value:"all",label:"All users",icon:"users",all_ids:r.filter((function(e){return e.id!==s.id})).map((function(e){return e.id}))}]:e.mustReplyUsers),a))}));break;default:o((function(e){var a;return Object(p.a)(Object(p.a)({},e),{},(a={},Object(U.a)(a,t,!e[t]),Object(U.a)(a,"mustReadUsers",0===e.mustReadUsers.length&&e.selectedAddressTo.length>0?[{id:"all",value:"all",label:"All users",icon:"users",all_ids:r.filter((function(e){return e.id!==s.id})).map((function(e){return e.id}))}]:e.mustReadUsers),a))}))}};Object(h.useEffect)((function(){(n.mustReplyUsers.find((function(e){return"all"===e.value}))||n.mustReadUsers.find((function(e){return"all"===e.value})))&&(n.shared_with_client||o(Object(p.a)(Object(p.a)({},n),{},{shared_with_client:!0})))}),[n]),n.requiredUsers.length&&n.mustReadUsers.find((function(e){return"all"===e.value}))&&(u=d.filter((function(e){return"all"===e.value}))),n.requiredUsers.length&&n.mustReplyUsers.find((function(e){return"all"===e.value}))&&(f=d.filter((function(e){return"all"===e.value})));var E=n.selectedAddressTo.some((function(e){return("TOPIC"===e.type||"WORKSPACE"===e.type)&&e.is_shared}));return _.a.createElement(M,null,_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement(A.a,{name:"must_read",checked:n.must_read,onClick:O,type:"danger"},t.mustRead)),_.a.createElement(W,{className:"d-flex align-items-center"},n.must_read&&_.a.createElement(H,{options:n.selectedAddressTo.length>0?u:[],value:n.mustReadUsers,onChange:function(e){null===e?o(Object(p.a)(Object(p.a)({},n),{},{mustReadUsers:[]})):e.find((function(e){return"all"===e.value}))?o(Object(p.a)(Object(p.a)({},n),{},{mustReadUsers:e.filter((function(e){return"all"===e.value})),shared_with_client:!0})):o(Object(p.a)(Object(p.a)({},n),{},{mustReadUsers:e}))},isMulti:!0,isClearable:!0,maxMenuHeight:250,menuPlacement:"top",placeholder:"Select must read"})),_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement(A.a,{name:"reply_required",checked:n.reply_required,onClick:O,type:"warning"},t.replyRequired)),_.a.createElement(W,{className:"d-flex align-items-center"},n.reply_required&&_.a.createElement(H,{options:n.selectedAddressTo.length>0?f:[],value:n.mustReplyUsers,onChange:function(e){null===e?o(Object(p.a)(Object(p.a)({},n),{},{mustReplyUsers:[]})):e.find((function(e){return"all"===e.value}))?o(Object(p.a)(Object(p.a)({},n),{},{mustReplyUsers:e.filter((function(e){return"all"===e.value})),shared_with_client:!0})):o(Object(p.a)(Object(p.a)({},n),{},{mustReplyUsers:e}))},isMulti:!0,isClearable:!0,maxMenuHeight:250,menuPlacement:"top",placeholder:"Select must reply"})),_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement(A.a,{name:"no_reply",checked:n.no_reply,onClick:O,type:"info"},t.noReplies)),_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement(A.a,{name:"must_read",checked:n.showApprover,onClick:function(){o(Object(p.a)(Object(p.a)({},n),{},{showApprover:!n.showApprover}))}},t.approve)),_.a.createElement(W,{className:"d-flex align-items-center"},n.showApprover&&_.a.createElement(H,{options:d,value:n.approvers,onChange:function(e){null===e?o(Object(p.a)(Object(p.a)({},n),{},{approvers:[]})):e.find((function(e){return"all"===e.value}))?o(Object(p.a)(Object(p.a)({},n),{},{approvers:e.filter((function(e){return"all"===e.value}))})):o(Object(p.a)(Object(p.a)({},n),{},{approvers:e}))},isMulti:!0,isClearable:!0,maxMenuHeight:250,menuPlacement:"top"})),!i&&E&&_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement("span",null,t.shareWithClient)),!i&&E&&_.a.createElement(W,{className:"d-flex align-items-center"},_.a.createElement(H,{options:b,value:l,onChange:function(e){c(e),"external"===e.id?o(Object(p.a)(Object(p.a)({},n),{},{shared_with_client:!0})):o(Object(p.a)(Object(p.a)({},n),{},{shared_with_client:!1}))},maxMenuHeight:250,menuPlacement:"top"})))},B=a(25),q=function(e){var t=e.workspace_ids,a=e.addressIds,n=Object(I.cb)()._t;return{dictionary:{createPost:n("POST.CREATE_POST","Create post"),createNewPost:n("POST.CREATE_NEW_POST","Create new post"),editPost:n("POST.EDIT_POST","Edit post"),postTitle:n("POST.TITLE","Title"),postInfo:n("POST_INFO","A post is a message that can contain text and images. It can be directed at one or more workspaces, and to one or multiple persons."),visibility:n("POST.VISIBILITY","Visibility"),workspace:n("POST.WORKSPACE","Workspace"),responsible:n("POST.RESPONSIBLE","Responsible"),addressed:n("POST.ADDRESSED","Addressed"),addressedTo:n("POST.ADDRESSED_TO","Addressed to"),addressedPeople:n("POST.ADDRESSED_PEOPLE","Addressed people"),addressedPeopleOnly:n("POST.ADDRESSED_PEOPLE_ONLY","Addressed people only"),description:n("POST.DESCRIPTION","Description"),saveAsDraft:n("POST.SAVE_AS_DRAFT","Save as draft"),moreOptions:n("POST.MORE_OPTIONS","More options"),replyRequired:n("POST.REPLY_REQUIRED","Reply required"),mustRead:n("POST.MUST_READ","Must read"),noReplies:n("POST.NO_REPLIES","No replies"),schedulePost:n("POST.SCHEDULE","Schedule"),updatePostButton:n("POST.UPDATE_BUTTON","Update post"),createPostButton:n("POST.CREATE_BUTTON","Create post"),save:n("POST.SAVE","Save"),discard:n("POST.DISCARD","Discard"),draftBody:n("POST.DRAFT_BODY","Not sure about the content? Save it as a draft."),postVisibilityInfo:n("POST.POST_VISIBILITY_COUNT_INFO","This post will be visible to ::user_count:: in ::workspace_count::",{user_count:Object(B.renderToString)(_.a.createElement("span",{className:"user-popup"},1===a.length?n("POST.NUMBER_USER","1 user"):n("POST.NUMBER_USERS","::count:: users",{count:a.length}))),workspace_count:Object(B.renderToString)(_.a.createElement("span",{className:"workspace-popup"},1===t.length?n("POST.NUMBER_WORKSPACE","1 workspace"):n("POST.NUMBER_WORKSPACES","::count:: workspaces",{count:t.length})))}),approve:n("POST.APPROVE","Approve"),shareWithClient:n("POST.SHARE_WITH_CLIENT","Who can read this post"),fileUploadLabel:n("LABEL.EXTERNAL_WORKSPACE_FILES","Files added to workspace can be seen by internal and external accounts"),internalTeamLabel:n("LABEL.INTERNAL_TEAM","Internal team"),internalAndExternalTeamLabel:n("LABEL.INTERNAL_AND_EXTERTNAL_TEAM","Internal and external team"),uploading:n("FILE_UPLOADING","Uploading File"),unsuccessful:n("FILE_UNSUCCESSFULL","Upload File Unsuccessful"),fileAttachments:n("POST.FILE_ATTACHMENTS","File attachments"),sendingPost:n("TOASTER.SENDING_POST","Sending post"),updatingPost:n("TOASTER.UPDATING_POST","Updating post"),uploadingAndSending:n("TOASTER.SENDING_POST_WITH_FILE","Uploading file and sending post")}}},V=Object(w.a)(v.a)(l||(l=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  margin: 20px 0;\n\n  label {\n    margin: 0 20px 0 0;\n    min-width: 109px;\n  }\n  button {\n    margin-left: auto;\n  }\n  .react-select-container {\n    width: 100%;\n  }\n  .react-select__multi-value__label {\n    align-self: center;\n  }\n  &.modal-input {\n    z-index: 2;\n  }\n  &.more-option {\n    //z-index: 0;\n    overflow: unset;\n    width: 100%;\n    @media all and (max-width: 480px) {\n      margin-left: 0;\n      margin-right: 0;\n      margin-bottom: 1rem;\n    }\n  }\n  &.schedule-post {\n    width: 100%;\n    label {\n      margin: 0 20px 0 0;\n    }\n    .feather {\n      color: #c7ced6;\n    }\n    .react-date-picker__wrapper {\n      border: thin solid #c8ced5;\n      border-radius: 4px;\n      color: #c7ced6;\n      .react-date-picker__inputGroup {\n        padding: 0 6px;\n      }\n    }\n    #placeholder {\n      color: #c7ced6;\n    }\n    input {\n      color: #505050;\n      &::-webkit-input-placeholder {\n        color: #c7ced6;\n      }\n    }\n\n    .dark & {\n      input {\n        color: #ffffff;\n        &::-webkit-input-placeholder {\n          color: #c7ced6;\n        }\n      }\n    }\n  }\n  &.file-attachment-wrapper {\n    margin-top: 0;\n    margin-bottom: 20px;\n  }\n  &.file-attachment-wrapper > div {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    .react-select-container {\n      max-width: 300px;\n    }\n  }\n  .file-attachments {\n    position: relative;\n    max-width: 100%;\n    // margin-left: 3rem;\n    // margin-right: 2rem;\n    @media all and (max-width: 480px) {\n      margin-left: 0;\n    }\n    ul {\n      //margin-right: 128px;\n      margin-bottom: 0;\n      @media all and (max-width: 480px) {\n        padding-right: 40px;\n      }\n      li {\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n  }\n  .user-popup {\n    cursor: pointer;\n    margin: 0 0.25rem;\n  }\n  .workspace-popup {\n    cursor: pointer;\n    margin: 0 0.25rem;\n  }\n  .user-list {\n    transition: all 0.5s ease;\n    position: absolute;\n    bottom: 22px;\n    right: 0;\n    background-color: #fff;\n    border: 1px solid #dee2e6;\n    padding: 0;\n    border-radius: 6px;\n    opacity: 0;\n    max-height: 0;\n    overflow: auto;\n    overflow-x: hidden;\n    width: 230px;\n\n    .dark & {\n      background: #191c20;\n    }\n\n    &.active {\n      padding: 5px 10px;\n      opacity: 1;\n      max-height: 255px;\n    }\n\n    img {\n      min-width: 28px;\n    }\n\n    .item-user-name {\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: block;\n    }\n  }\n  .workspace-list {\n    position: absolute;\n    bottom: 22px;\n    right: 0;\n    background-color: #fff;\n    border: 1px solid #dee2e6;\n    padding: 0;\n    border-radius: 6px;\n    opacity: 0;\n    max-height: 0;\n    overflow: auto;\n    width: 230px;\n\n    .dark & {\n      background: #191c20;\n    }\n\n    &.active {\n      padding: 5px 10px;\n      opacity: 1;\n      max-height: 255px;\n    }\n\n    .item-workspace-name {\n      display: block;\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n  .post-visibility-container {\n    width: 100%;\n    .post-info {\n      font-size: 0.8rem;\n      flex-flow: wrap;\n      justify-content: flex-end;\n      @media all and (max-width: 480px) {\n        justify-content: flex-start;\n      }\n    }\n  }\n  .dark & {\n    input {\n      color: #ffffff !important;\n      &::-webkit-input-placeholder {\n        color: #c7ced6;\n      }\n    }\n  }\n  &.file-attachment-wrapper .file-label {\n    font-size: 0.8rem;\n  }\n"]))),Y=w.a.div(c||(c=Object(b.a)(["\n  cursor: pointer;\n  margin-bottom: 5px;\n  &:hover {\n    color: #972c86;\n  }\n  @media all and (max-width: 480px) {\n    margin-top: 40px;\n  }\n  svg {\n    transition: all 0.3s;\n    width: 15px;\n    margin-left: 5px;\n\n    &.ti-plus {\n      transform: rotate(-540deg);\n    }\n    &.rotate-in {\n      transform: rotate(0deg);\n    }\n  }\n"]))),z=Object(w.a)(A.c)(o||(o=Object(b.a)(["\n  .description-input {\n    height: ","px;\n  }\n\n  label {\n    min-width: 100%;\n    font-weight: 500;\n  }\n"])),(function(e){return e.height>80?e.height:80})),G=[{id:"remove_automatically",value:"remove_automatically",label:"Remove file automatically in 5 days",icon:"file-minus"}];t.default=_.a.memo((function(e){var t=e.data,a=t.type,n=t.mode,r=t.item,i=void 0===r?{}:r,l=t.params,c=void 0===l?null:l,o=Object(F.g)(),s=Object(I.ib)(),b=Object(h.useRef)(),O=Object(j.c)(),v=Object(I.X)(),w=Object(h.useRef)(!0),U=Object(j.d)((function(e){return e.session.user})),M="external"===U.type,W=Object(j.d)((function(e){return e.global.recipients})),H=Object(j.d)((function(e){return e.workspaces.workspaces})),B=Object(j.d)((function(e){return e.workspaces.activeTopic})),X=Object(h.useState)(Math.floor(Date.now()/1e3)),Q=Object(f.a)(X,1)[0],Z=Object(h.useState)(!0),J=Object(f.a)(Z,2),$=J[0],ee=J[1],te=Object(h.useState)(null),ae=Object(f.a)(te,2),ne=ae[0],re=ae[1],ie=Object(h.useState)(!1),le=Object(f.a)(ie,2),ce=le[0],oe=le[1],se=Object(h.useState)([]),de=Object(f.a)(se,2),ue=de[0],me=de[1],pe=Object(h.useState)([]),fe=Object(f.a)(pe,2),be=fe[0],Oe=fe[1],Ee=Object(h.useState)(!1),he=Object(f.a)(Ee,2),_e=he[0],je=he[1],ve=Object(h.useState)([]),ge=Object(f.a)(ve,2),ye=ge[0],ke=ge[1],xe=Object(h.useState)([]),we=Object(f.a)(xe,2),Te=we[0],Ce=we[1],Ne=Object(h.useState)([]),Se=Object(f.a)(Ne,2),Re=Se[0],Ae=Se[1],Ie=Object(h.useState)(null),De=Object(f.a)(Ie,2),Le=De[0],Fe=De[1],Pe=Object(h.useState)(!1),Ue=Object(f.a)(Pe,2),Me=Ue[0],We=Ue[1],He=Object(h.useState)([]),Ke=Object(f.a)(He,2),Be=Ke[0],qe=Ke[1],Ve=Object(h.useState)(null),Ye=Object(f.a)(Ve,2),ze=Ye[0],Ge=Ye[1],Xe=Object(h.useRef)(null),Qe=Object(h.useRef)(0),Ze={reactQuillRef:Object(h.useRef)(null),more_options:Object(h.useRef)(null),dropzone:Object(h.useRef)(null),arrow:Object(h.useRef)(null),visibilityInfo:Object(h.useRef)(null)},Je=Object(h.useState)({must_read:!1,reply_required:!1,no_reply:!1,is_private:!1,has_folder:!1,title:"",selectedAddressTo:[],body:"",textOnly:"",show_at:null,end_at:null,approvers:[],showApprover:!1,mention_ids:[],requiredUsers:[],shared_with_client:!1,mustReadUsers:[],mustReplyUsers:[]}),$e=Object(f.a)(Je,2),et=$e[0],tt=$e[1],at=Object(I.lb)({addressTo:et.selectedAddressTo}),nt=at.options,rt=at.getDefaultAddressTo,it=at.getAddressTo,lt=at.responsible_ids,ct=at.recipient_ids,ot=at.is_personal,st=at.workspace_ids,dt=at.userOptions,ut=at.addressIds,mt=at.actualUsers,pt=Object(I.I)({draftId:ne,initTimestamp:Q,isExternalUser:M,item:i,form:et,is_personal:ot,params:c,responsible_ids:lt,user:U,topicId:c?B.id:null,toaster:v,setDraftId:re,savingDraft:Me,setSavingDraft:We}),ft=pt.draftSaved,bt=pt.handleDeleteDraft,Ot=q({workspace_ids:st,addressIds:ut}).dictionary,Et=Object(h.useState)({id:"internal",value:"internal",label:Ot.internalTeamLabel,icon:null}),ht=Object(f.a)(Et,2),_t=ht[0],jt=ht[1],vt=Object(h.useRef)(null),gt=function(e){return vt.current=v.info(e)},yt=function(){return v.dismiss(vt.current)},kt=function(){ee(!$),O(Object(T.d)({type:a}))},xt=function(){kt()},wt=function(){oe(!1)};function Tt(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(u.a)(d.a.mark((function e(t){var a,n,r,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"create",n=new FormData,r={user_id:U.id,file_type:"private",folder_id:null,fileOption:ze,options:{config:{onUploadProgress:St}}},ue.map((function(e,t){return n.append("files[".concat(t,"]"),e.bodyFormData.get("file"))})),r.files=n,e.next=7,new Promise((function(e,t){return e(Object(L.C)(r))})).then((function(e){"edit"===a?(t=Object(p.a)(Object(p.a)({},t),{},{file_ids:[].concat(Object(m.a)(e.data.map((function(e){return e.id}))),Object(m.a)(t.file_ids))}),O(Object(C.Db)(t,(function(){Xe.current&&v.dismiss(Xe.current),je(!1),bt()})))):(t=Object(p.a)(Object(p.a)({},t),{},{file_ids:[].concat(Object(m.a)(e.data.map((function(e){return e.id}))),Object(m.a)(t.file_ids))}),O(Object(C.pb)(t,(function(e,t){if(Xe.current&&v.dismiss(Xe.current),je(!1),!e)if(bt(),c){var a={topic_id:B.id,filter:"my_posts",tag:null};O(Object(N.W)(a)),B.folder_id?o.push("/workspace/posts/".concat(B.folder_id,"/").concat(Object(P.h)(B.folder_name),"/").concat(B.id,"/").concat(Object(P.h)(B.name),"/post/").concat(t.data.id,"/").concat(Object(P.h)(t.data.title))):o.push("/workspace/posts/".concat(B.id,"/").concat(Object(P.h)(B.name),"/post/").concat(t.data.id,"/").concat(Object(P.h)(t.data.title)))}else{O(Object(C.Vb)({filter:"my_posts",tag:null})),o.push("/posts/".concat(t.data.id,"/").concat(Object(P.h)(t.data.title)))}}))))})).catch((function(e){Nt(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=function(){null!==Xe.curent&&(je(!1),v.dismiss(Xe.current),v.error(_.a.createElement("div",null,Ot.unsuccessful,".")),Xe.current=null)},St=function(e){var t=e.loaded/e.total;null===Xe.current?Xe.current=v.info(_.a.createElement("div",null,Ot.uploadingAndSending,"."),{progress:Qe.current,autoClose:!0}):v.update(Xe.current,{progress:t,autoClose:!0})};Object(h.useEffect)((function(){if(i.hasOwnProperty("draft"))tt(i.draft.form),re(i.draft.draft_id);else if(c&&null!==B&&"edit"!==n)tt(Object(p.a)(Object(p.a)({},et),{},{selectedAddressTo:rt(),requiredUsers:[{id:"all",value:"all",label:"All users",icon:"users",all_ids:ut}]}));else if("edit"===n&&i.hasOwnProperty("post")){var e=i.post.users_approval.filter((function(e){return null!==e.ip_address&&!e.is_approved})).length,t=it(i.post.recipients).map((function(e){return"USER"===e.type?e.type_id:e.participant_ids})).flat(),a=(t=Object(m.a)(new Set(t)).filter((function(e){return e!==U.id}))).length===i.post.must_read_users.length,r=t.length===i.post.must_reply_users.length;tt(Object(p.a)(Object(p.a)({},et),{},{body:i.post.body,textOnly:i.post.body,title:i.post.title,has_folder:!!i.post.recipients.find((function(e){return"TOPIC"===e.type})),no_reply:i.post.is_read_only,must_read:i.post.is_must_read,reply_required:i.post.is_must_reply,selectedAddressTo:it(i.post.recipients),file_ids:i.post.files.map((function(e){return e.id})),show_at:i.post.show_at,end_at:i.post.end_at,showApprover:i.post.users_approval.length>0,shared_with_client:i.post.shared_with_client,approvers:i.post.users_approval.length>0?i.post.users_approval.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{icon:"user-avatar",value:t.id,label:t.name,type:"USER",ip_address:e?null:t.ip_address,is_approved:!e&&t.is_approved})})):[],mustReadUsers:i.post.must_read_users.length>0?a?[{id:"all",value:"all",label:"All users",icon:"users",all_ids:t}]:i.post.must_read_users.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name,type:"USER"})})):[],mustReplyUsers:i.post.must_reply_users.length>0?r?[{id:"all",value:"all",label:"All users",icon:"users",all_ids:t}]:i.post.must_reply_users.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{icon:"user-avatar",value:e.id,label:e.name,type:"USER"})})):[]})),Oe(i.post.files.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{rawFile:e})})))}return function(){w.current=null}}),[]);Object(h.useEffect)((function(){w.current&&(et.shared_with_client?jt({id:"external",value:"external",label:Ot.internalAndExternalTeamLabel,icon:"eye"}):jt({id:"internal",value:"internal",label:Ot.internalTeamLabel,icon:"eye-off"}))}),[et.shared_with_client]);var Rt=et.selectedAddressTo.some((function(e){return("TOPIC"===e.type||"WORKSPACE"===e.type)&&e.is_shared}));return _.a.createElement(g.a,{isOpen:$,toggle:xt,size:"xl",onOpened:function(){b&&b.current&&b.current.focus()},centered:!0,className:"post-modal"},_.a.createElement(D.a,{toggle:xt},ft?"Draft saved":Me?"Saving draft...":"edit"===n?Ot.editPost:Ot.createNewPost),_.a.createElement(y.a,{onDragOver:function(){ce||oe(!0)}},_.a.createElement(R.a,{hide:!ce,ref:Ze.dropzone,onDragLeave:wt,onDrop:function(e){!function(e){var t=[];e.forEach((function(e){var a=new FormData;a.append("file",e);var n=Math.floor(Date.now());"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/webp"===e.type?t.push({rawFile:e,bodyFormData:a,type:"IMAGE",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:U}):"video/mp4"===e.type?t.push({rawFile:e,bodyFormData:a,type:"VIDEO",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:U}):t.push({rawFile:e,bodyFormData:a,type:"DOC",id:n,status:!1,src:URL.createObjectURL(e),name:e.name?e.name:e.path,uploader:U})})),me((function(e){return[].concat(Object(m.a)(e),t)})),wt()}(e.acceptedFiles)},onCancel:wt,attachedFiles:ue}),_.a.createElement(V,{className:"modal-input mt-0"},_.a.createElement("div",{className:"w-100"},_.a.createElement(k.a,{className:"modal-info pb-3"},Ot.postInfo)),_.a.createElement("div",{className:"w-100"},_.a.createElement(k.a,{className:"modal-label",for:"post-title"},Ot.postTitle),_.a.createElement(x.a,{className:"w-100",style:{borderRadius:"5px"},value:et.title,onChange:function(e){tt(Object(p.a)(Object(p.a)({},et),{},{title:e.target.value}))},innerRef:b}))),_.a.createElement(V,{className:"modal-input"},_.a.createElement(k.a,{className:"modal-label",for:"workspace"},Ot.addressedTo),_.a.createElement(A.d,{options:nt,value:et.selectedAddressTo,onChange:function(e){if(null===e)tt(Object(p.a)(Object(p.a)({},et),{},{selectedAddressTo:[],shared_with_client:!1}));else{var t=e.some((function(e){return("TOPIC"===e.type||"WORKSPACE"===e.type)&&e.is_shared}));tt(Object(p.a)(Object(p.a)({},et),{},{selectedAddressTo:e,shared_with_client:!!t&&et.shared_with_client}))}},isMulti:!0,isClearable:!0})),_.a.createElement(z,{className:"modal-description",height:s.height-660,showFileButton:!0,onChange:function(e,t,a,n){var r=n.getText(e),i=[];n.getContents().ops&&n.getContents().ops.length&&function(e){if((e=e.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}))).length){var t=et.selectedAddressTo.map((function(e){return"USER"===e.type?e.type_id:e.participant_ids})).flat(),a=W.filter((function(e){return"USER"===e.type&&U.id===e.type_id||!("USER"!==e.type||!t.some((function(t){return t===e.type_id})))})).map((function(e){return e.id})),n=et.selectedAddressTo.map((function(e){return e.id})),r=[].concat(Object(m.a)(a),Object(m.a)(n),Object(m.a)(Te)),i=e.filter((function(e){return!r.some((function(t){return t===e}))}));ke(i.length?i.map((function(e){return parseInt(e)})):[])}else Ce([]),ke([])}(i=n.getContents().ops.filter((function(e){return e.insert.mention&&"external"!==e.insert.mention.type})).map((function(e){return e.insert.mention.id}))),qe(n.getContents()),tt(Object(p.a)(Object(p.a)({},et),{},{body:e,textOnly:r.trim(),mention_ids:i.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}))}))},onOpenFileDialog:function(){Ze.dropzone.current&&Ze.dropzone.current.open()},defaultValue:i.hasOwnProperty("draft")?et.body:"edit"===n?i.post.body:"",mode:n,required:!0,mentionedUserIds:ye,workspaces:H,onAddUsers:function(e){var t=nt.filter((function(t){return e.some((function(e){return e.id===t.id}))}));tt(Object(p.a)(Object(p.a)({},et),{},{selectedAddressTo:[].concat(Object(m.a)(t),Object(m.a)(et.selectedAddressTo))})),ke([]),Ce([].concat(Object(m.a)(Te),Object(m.a)(e.map((function(e){return parseInt(e.id)})))))},onDoNothing:function(e){Ce(e.map((function(e){return e.id}))),ke(ye.filter((function(t){return!e.some((function(e){return e.id===t}))})))},setInlineImages:Ae,setImageLoading:Fe,disableBodyMention:M,prioMentionIds:ut,members:Object.values(mt).filter((function(e){return"external"===U.type?ut.some((function(t){return e.id===t})):!!("external"===e.type&&ut.some((function(t){return t===e.id}))||"internal"===e.type&&null!==e.role)}))}),(ue.length>0||be.length>0)&&_.a.createElement(V,{className:"file-attachment-wrapper"},_.a.createElement("div",{className:"mb-2"},_.a.createElement(k.a,{className:"modal-label",for:"workspace"},Ot.fileAttachments)),_.a.createElement("div",{className:"mb-2"},_.a.createElement(A.d,{options:G,value:ze,onChange:function(e){Ge(e)},isClearable:!0,maxMenuHeight:250,menuPlacement:"top",placeholder:"File options"}),Rt&&!M&&_.a.createElement("span",{className:"file-label ml-2"},Ot.fileUploadLabel)),_.a.createElement("div",null,_.a.createElement(S.h,{attachedFiles:[].concat(Object(m.a)(ue),Object(m.a)(be)),handleRemoveFile:function(e){Oe((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))})),me((function(t){return t.filter((function(t){return t.id!==parseInt(e)}))}))}}))),_.a.createElement(V,{className:"modal-label more-option"},_.a.createElement(Y,null,Ot.moreOptions),_.a.createElement(K,{userOptions:dt,dictionary:Ot,form:et,isExternalUser:M,shareOption:_t,setShareOption:jt,setForm:tt,user:U})),_.a.createElement(V,{className:"mt-0 mb-0"},_.a.createElement("button",{className:"btn btn-primary",disabled:0===et.selectedAddressTo.length||""===et.title||Le,onClick:function(){if(!_e&&!Le){je(!0);var e=et.selectedAddressTo.some((function(e){return("TOPIC"===e.type||"WORKSPACE"===e.type)&&e.is_shared})),t=Be.ops&&Be.ops.length>0?Be.ops.filter((function(t){return et.shared_with_client&&e?t.insert.mention&&("internal"===t.insert.mention.type||"external"===t.insert.mention.type):t.insert.mention&&"internal"===t.insert.mention.type})).map((function(e){return parseInt(e.insert.mention.type_id)})):[],a={title:et.title,body:et.body,responsible_ids:lt,type:"post",personal:ot,recipient_ids:ct,must_read:et.must_read?1:0,must_reply:et.reply_required?1:0,read_only:et.no_reply?1:0,show_at:et.show_at?E()(et.show_at,"YYYY-MM-DD").format("YYYY-MM-DD"):et.end_at?E()(new Date).add(1,"day").format("YYYY-MM-DD"):null,end_at:et.end_at?E()(et.end_at,"YYYY-MM-DD").format("YYYY-MM-DD"):null,tag_ids:[],file_ids:Re.map((function(e){return e.id})),code_data:{base_link:"".concat("https://").concat(localStorage.getItem("slug"),".").concat("drevv.com")},approval_user_ids:et.showApprover&&et.approvers.find((function(e){return"all"===e.value}))?et.approvers.find((function(e){return"all"===e.value})).all_ids:et.showApprover?et.approvers.map((function(e){return e.value})).filter((function(e){return U.id!==e})):[],required_user_ids:[],shared_with_client:et.shared_with_client&&e||M?1:0,body_mention_ids:t.filter((function(e){return ut.some((function(t){return t===e}))})),must_read_user_ids:et.must_read&&et.mustReadUsers.find((function(e){return"all"===e.value}))?ut.filter((function(e){return e!==U.id})):et.must_read?et.mustReadUsers.map((function(e){return e.value})).filter((function(e){return U.id!==e})):[],must_reply_user_ids:et.reply_required&&et.mustReplyUsers.find((function(e){return"all"===e.value}))?ut.filter((function(e){return e!==U.id})):et.reply_required?et.mustReplyUsers.map((function(e){return e.value})).filter((function(e){return U.id!==e})):[]};"edit"===n?(a=Object(p.a)(Object(p.a)({},a),{},{id:i.post.id,file_ids:[].concat(Object(m.a)(be.map((function(e){return e.id}))),Object(m.a)(a.file_ids))}),i.post.users_approval.find((function(e){return null!==e.ip_address&&e.is_approved}))&&delete a.approval_user_ids,ue.length?Tt(a,"edit"):et.selectedAddressTo.length&&(gt(Ot.updatingPost),O(Object(C.Db)(a,(function(e,t){yt(),je(!1),bt()}))))):ue.length?Tt(a,"create"):et.selectedAddressTo.length&&(gt(Ot.sendingPost),O(Object(C.pb)(a,(function(e,t){if(yt(),je(!1),!e)if(bt(),c){var a={topic_id:B.id,filter:"my_posts",tag:null};O(Object(N.W)(a)),B.folder_id?o.push("/workspace/posts/".concat(B.folder_id,"/").concat(Object(P.h)(B.folder_name),"/").concat(B.id,"/").concat(Object(P.h)(B.name),"/post/").concat(t.data.id,"/").concat(Object(P.h)(t.data.title))):o.push("/workspace/posts/".concat(B.id,"/").concat(Object(P.h)(B.name),"/post/").concat(t.data.id,"/").concat(Object(P.h)(t.data.title)))}else{O(Object(C.Vb)({filter:"my_posts",tag:null})),o.push("/posts/".concat(t.data.id,"/").concat(Object(P.h)(t.data.title)))}})))),kt(!1)}}},_e&&_.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"edit"===n?Ot.updatePostButton:Ot.createPostButton)),_.a.createElement(V,{className:"mb-0 mt-1"},_.a.createElement(S.n,{dictionary:Ot,formRef:Ze,selectedAddressTo:et.selectedAddressTo,workspaceIds:st,userOptions:dt}))))}))},663:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(635),a(636),a(637),a(638),a(639),a(640),a(641);var n=a(24),r=a(2),i=a(0),l=a.n(i),c=a(3),o=a(6);function s(){var e=Object(r.a)(["\n  width: 20px;\n  height: 20px;\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  font-size: 17px;\n  color: #505050;\n  font-weight: 600;\n\n  button:focus {\n    outline: none;\n  }\n"]);return d=function(){return e},e}var u=c.a.div(d()),m=Object(c.a)(o.s)(s()),p=l.a.memo((function(e){var t=e.className,a=void 0===t?"":t,r=e.children,i=e.toggle,c=Object(n.a)(e,["className","children","toggle"]);return l.a.createElement(u,Object.assign({className:"model-header-section modal-header ".concat(a)},c),l.a.createElement("h5",{className:"modal-title"},r),l.a.createElement("button",{type:"button",onClick:i,className:"close","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},l.a.createElement(m,{icon:"x"}))))}));a(642),a(643),a(644),a(645),a(646),a(647),a(648),a(649),a(634),a(650),a(651),a(652)}}]);